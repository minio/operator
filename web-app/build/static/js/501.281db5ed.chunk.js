(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[501],{9505:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(72791),o=n(81207);const r=(e,t)=>{const[n,r]=(0,a.useState)(!1);return[n,(n,a,s,c)=>{r(!0),o.Z.invoke(n,a,s,c).then((t=>{r(!1),e(t)})).catch((e=>{r(!1),t(e)}))}]}},27331:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var a=n(72791),o=n(78687),r=n(57689),s=n(11135),c=n(25787),l=n(23814),i=n(45248),d=n(81207),p=n(3216),m=n(41320),u=n(51691),h=n(21435),v=n(61889),x=n(9505),f=n(40306),Z=n(75952),b=n(87995),j=n(80184);const g=e=>{let{deleteOpen:t,selectedPod:n,closeDeleteModalAndRefresh:o}=e;const r=(0,m.TL)(),[s,c]=(0,a.useState)(""),[l,i]=(0,x.Z)((()=>o(!0)),(e=>r((0,b.Ih)(e))));return(0,j.jsx)(f.Z,{title:"Delete Pod",confirmText:"Delete",isOpen:t,titleIcon:(0,j.jsx)(Z.NvT,{}),isLoading:l,onConfirm:()=>{s===n.name?i("DELETE","/api/v1/namespaces/".concat(n.namespace,"/tenants/").concat(n.tenant,"/pods/").concat(n.name)):(0,b.Ih)({errorMessage:"Tenant name is incorrect",detailedError:""})},onClose:()=>o(!1),confirmButtonProps:{disabled:s!==n.name||l},confirmationContent:(0,j.jsxs)(u.Z,{children:["To continue please type ",(0,j.jsx)("b",{children:n.name})," in the box.",(0,j.jsx)(v.ZP,{item:!0,xs:12,children:(0,j.jsx)(h.Z,{id:"retype-pod",name:"retype-pod",onChange:e=>{c(e.target.value)},label:"",value:s})})]})})};var y=n(27391),k=n(63466),C=n(27454);const S=(0,c.Z)((e=>(0,s.Z)({...l.oZ,...l.VX,...l.Bz})))((e=>{let{classes:t}=e;const n=(0,m.TL)(),s=(0,r.s0)(),{tenantName:c,tenantNamespace:l}=(0,r.UO)(),u=(0,o.v9)((e=>e.tenants.loadingTenant)),[h,x]=(0,a.useState)([]),[f,S]=(0,a.useState)(!0),[w,P]=(0,a.useState)(!1),[z,E]=(0,a.useState)(null),[I,T]=(0,a.useState)(""),[N,M]=(0,a.useState)(""),[A,D]=(0,a.useState)(!1),[L,R]=(0,a.useState)(!1),[V,B]=(0,a.useState)(!1),[H,O]=(0,a.useState)(!1),[F,K]=(0,a.useState)("");(0,a.useEffect)((()=>{if(L){let e=document.createElement("a");e.setAttribute("href","data:application/gzip;base64,".concat(N)),e.setAttribute("download",F),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),R(!1),B(!0)}}),[L,F,N]);const U=h.filter((e=>e.name.toLowerCase().includes(I.toLowerCase()))),_=[{type:"view",onClick:e=>{s("/namespaces/".concat(l||"","/tenants/").concat(c||"","/pods/").concat(e.name))}},{type:"delete",onClick:e=>{e.tenant=c,e.namespace=l,E(e),P(!0)}}];(0,a.useEffect)((()=>{u&&S(!0)}),[u]),(0,a.useEffect)((()=>{f&&d.Z.invoke("GET","/api/v1/namespaces/".concat(l||"","/tenants/").concat(c||"","/pods")).then((e=>{for(let t=0;t<e.length;t++){let n=Date.now()/1e3|0;e[t].time=(0,i.v1)((n-parseInt(e[t].timeCreated)).toString())}x(e),S(!1)})).catch((e=>{n((0,b.Ih)({errorMessage:"Error loading pods",detailedError:e.detailedError}))}))}),[f,c,l,n]),(0,a.useEffect)((()=>{A?(M(""),d.Z.invoke("GET","/api/v1/namespaces/".concat(l,"/tenants/").concat(c,"/log-report")).then((async e=>{M(decodeURIComponent(e.blob)),K(e.filename||"tenant-log-report.zip"),D(!1),R(!0),0===e.filename.length||0===e.blob.length?O(!0):O(!1)})).catch((e=>{n((0,b.Ih)(e)),D(!1),O(!0)}))):D(!1)}),[c,l,A,n]);return(0,j.jsxs)(a.Fragment,{children:[w&&(0,j.jsx)(g,{deleteOpen:w,selectedPod:z,closeDeleteModalAndRefresh:e=>{P(!1),S(!0)}}),(0,j.jsxs)(v.ZP,{container:!0,children:[(0,j.jsx)(v.ZP,{item:!0,xs:4,children:(0,j.jsx)("h1",{className:t.sectionTitle,children:"Pods"})}),(0,j.jsxs)(v.ZP,{item:!0,xs:4,children:[V&&!H&&"Tenant report downloaded to "+F,H&&"There was a problem generating the report"]}),(0,j.jsx)(v.ZP,{item:!0,xs:4,display:"flex",justifyContent:"flex-end",children:(0,j.jsx)(C.Z,{tooltip:"A report of all tenant logs will be generated as a .zip file and downloaded for analysis. This report can be uploaded to SUBNET to enable our team to best assist you in troubleshooting.",children:(0,j.jsx)(Z.zxk,{id:"log_report",onClick:()=>{D(!0)},disabled:0===h.length,children:"Download Log Report"})})})]}),(0,j.jsx)(v.ZP,{item:!0,xs:12,className:t.actionsTray,children:(0,j.jsx)(y.Z,{placeholder:"Search Pods",className:t.searchField,id:"search-resource",label:"",InputProps:{disableUnderline:!0,startAdornment:(0,j.jsx)(k.Z,{position:"start",children:(0,j.jsx)(Z.W1M,{})})},onChange:e=>{T(e.target.value)},variant:"standard"})}),(0,j.jsx)(v.ZP,{item:!0,xs:12,className:t.tableBlock,children:(0,j.jsx)(p.Z,{columns:[{label:"Name",elementKey:"name",width:200},{label:"Status",elementKey:"status"},{label:"Age",elementKey:"time"},{label:"Pod IP",elementKey:"podIP"},{label:"Restarts",elementKey:"restarts",renderFunction:e=>null!==e?e:0},{label:"Node",elementKey:"node"}],isLoading:f,records:U,itemActions:_,entityName:"Pods",idField:"name"})})]})}))},26759:(e,t,n)=>{"use strict";var a=n(64836);t.Z=void 0;var o=a(n(45649)),r=n(80184),s=(0,o.default)((0,r.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");t.Z=s},70366:(e,t,n)=>{"use strict";var a=n(64836);t.Z=void 0;var o=a(n(45649)),r=n(80184),s=(0,o.default)((0,r.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp");t.Z=s},97911:(e,t,n)=>{"use strict";var a=n(64836);t.Z=void 0;var o=a(n(45649)),r=n(80184),s=(0,o.default)((0,r.jsx)("path",{d:"M14.67 5v14H9.33V5h5.34zm1 14H21V5h-5.33v14zm-7.34 0V5H3v14h5.33z"}),"ViewColumn");t.Z=s},94454:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var a=n(63366),o=n(87462),r=n(72791),s=n(28182),c=n(94419),l=n(12065),i=n(97278),d=n(76189),p=n(80184);const m=(0,d.Z)((0,p.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),u=(0,d.Z)((0,p.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),h=(0,d.Z)((0,p.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var v=n(14036),x=n(31402),f=n(66934),Z=n(75878),b=n(21217);function j(e){return(0,b.Z)("MuiCheckbox",e)}const g=(0,Z.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),y=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],k=(0,f.ZP)(i.Z,{shouldForwardProp:e=>(0,f.FO)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,"default"!==n.color&&t["color".concat((0,v.Z)(n.color))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,o.Z)({color:(t.vars||t).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,l.Fq)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{["&.".concat(g.checked,", &.").concat(g.indeterminate)]:{color:(t.vars||t).palette[n.color].main},["&.".concat(g.disabled)]:{color:(t.vars||t).palette.action.disabled}})})),C=(0,p.jsx)(u,{}),S=(0,p.jsx)(m,{}),w=(0,p.jsx)(h,{}),P=r.forwardRef((function(e,t){var n,l;const i=(0,x.Z)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=C,color:m="primary",icon:u=S,indeterminate:h=!1,indeterminateIcon:f=w,inputProps:Z,size:b="medium",className:g}=i,P=(0,a.Z)(i,y),z=h?f:u,E=h?f:d,I=(0,o.Z)({},i,{color:m,indeterminate:h,size:b}),T=(e=>{const{classes:t,indeterminate:n,color:a}=e,r={root:["root",n&&"indeterminate","color".concat((0,v.Z)(a))]},s=(0,c.Z)(r,j,t);return(0,o.Z)({},t,s)})(I);return(0,p.jsx)(k,(0,o.Z)({type:"checkbox",inputProps:(0,o.Z)({"data-indeterminate":h},Z),icon:r.cloneElement(z,{fontSize:null!=(n=z.props.fontSize)?n:b}),checkedIcon:r.cloneElement(E,{fontSize:null!=(l=E.props.fontSize)?l:b}),ownerState:I,ref:t,className:(0,s.Z)(T.root,g)},P,{classes:T}))}))},26769:(e,t,n)=>{var a=n(39066),o=n(93629),r=n(43141);e.exports=function(e){return"string"==typeof e||!o(e)&&r(e)&&"[object String]"==a(e)}}}]);
//# sourceMappingURL=501.281db5ed.chunk.js.map