"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[483],{5578:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(2791),l=a(184);const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(a){return(0,l.jsx)(n.Suspense,{fallback:t,children:(0,l.jsx)(e,{...a})})}}},9114:(e,t,a)=>{a.d(t,{Z:()=>s});a(2791);var n=a(9945),l=a(184);const s=e=>{let{placeholder:t="",onChange:a,overrideClass:s,value:i,id:r="search-resource",label:o="",sx:c}=e;return(0,l.jsx)(n.Wzg,{placeholder:t,className:s||"",id:r,label:o,onChange:e=>{a(e.target.value)},value:i,startIcon:(0,l.jsx)(n.W1M,{}),sx:c})}},6483:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var n=a(2791),l=a(9945),s=a(7995),i=a(7689),r=a(1320),o=a(7238),c=a(2295),d=a(5248),u=a(6444),h=a(6181),x=a.n(h),g=a(184);const m=u.ZP.div((e=>{let{theme:t}=e;return{margin:"0px 20px","& .value":{fontSize:18,color:x()(t,"mutedText","#87888d"),fontWeight:400,"&.normal":{color:x()(t,"fontColor","#000")}},"& .unit":{fontSize:12,color:x()(t,"secondaryText","#5B5C5C"),fontWeight:"bold"},"& .label":{textAlign:"center",color:x()(t,"mutedText","#87888d"),fontSize:12,whiteSpace:"nowrap","&.normal":{color:x()(t,"secondaryText","#5B5C5C")}}}})),p=e=>{let{label:t,value:a,unit:s,variant:i="normal"}=e;return(0,g.jsxs)(m,{children:[(0,g.jsxs)(l.xuv,{style:{textAlign:"center"},children:[(0,g.jsx)("span",{className:"value ".concat(i),children:a}),s&&(0,g.jsxs)(n.Fragment,{children:[" ",(0,g.jsx)("span",{className:"unit",children:s})]})]}),(0,g.jsx)(l.xuv,{className:"label",children:t})]})};var j=a(4815);const f=u.ZP.div((e=>{let{theme:t}=e;return{border:"".concat(x()(t,"borderColor","#eaeaea")," 1px solid"),borderRadius:3,padding:15,cursor:"pointer","&.disabled":{backgroundColor:x()(t,"signalColors.danger","red")},"&:hover":{backgroundColor:x()(t,"boxBackground","#FBFAFA")},"& .tenantTitle":{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,"& h1":{padding:0,margin:0,marginBottom:5,fontSize:22,color:x()(t,"screenTitle.iconColor","#07193E"),["@media (max-width: ".concat(l.Egj.md,"px)")]:{marginBottom:0}}},"& .tenantDetails":{display:"flex",gap:40,"& span":{fontSize:14},["@media (max-width: ".concat(l.Egj.md,"px)")]:{flexFlow:"column-reverse",gap:5}},"& .tenantMetrics":{display:"flex",alignItems:"center",marginTop:20,gap:25,borderTop:"".concat(x()(t,"borderColor","#E2E2E2")," 1px solid"),paddingTop:20,"& svg.tenantIcon":{color:x()(t,"screenTitle.iconColor","#07193E"),fill:x()(t,"screenTitle.iconColor","#07193E")},"& .metric":{"& .min-icon":{color:x()(t,"fontColor","#000"),width:13,marginRight:5}},"& .metricLabel":{fontSize:14,fontWeight:"bold",color:x()(t,"fontColor","#000")},"& .metricText":{fontSize:24,fontWeight:"bold"},"& .unit":{fontSize:12,fontWeight:"normal"},"& .status":{fontSize:12,color:x()(t,"mutedText","#87888d")},["@media (max-width: ".concat(l.Egj.md,"px)")]:{marginTop:8,paddingTop:8}},"& .namespaceLabel":{display:"inline-flex",color:x()(t,"signalColors.dark","#000"),backgroundColor:x()(t,"borderColor","#E2E2E2"),borderRadius:2,padding:"4px 8px",fontSize:10,marginRight:20},"& .redState":{color:x()(t,"signalColors.danger","#C51B3F"),"& .min-icon":{width:16,height:16,float:"left",marginRight:4}},"& .yellowState":{color:x()(t,"signalColors.warning","#FFBD62"),"& .min-icon":{width:16,height:16,float:"left",marginRight:4}},"& .greenState":{color:x()(t,"signalColors.good","#4CCB92"),"& .min-icon":{width:16,height:16,float:"left",marginRight:4}},"& .greyState":{color:x()(t,"signalColors.disabled","#E6EBEB"),"& .min-icon":{width:16,height:16,float:"left",marginRight:4}}}})),v=e=>{let{tenant:t}=e;const a=(0,r.TL)(),s=(0,i.s0)();let u={value:"n/a",unit:""},h={value:"n/a",unit:""},x={value:"n/a",unit:""},m={value:"n/a",unit:""},v={value:"n/a",unit:""};if(t.capacity_raw){const e=(0,d.ae)("".concat(t.capacity_raw),!0).split(" ");u.value=e[0],u.unit=e[1]}if(t.capacity){const e=(0,d.ae)("".concat(t.capacity),!0).split(" ");h.value=e[0],h.unit=e[1]}if(t.capacity_usage){const e=(0,d.l5)(t.capacity_usage,!0).split(" ");x.value=e[0],x.unit=e[1]}let y=[];if(t.tiers&&0!==t.tiers.length){var b,C;y=null===(b=t.tiers)||void 0===b?void 0:b.map((e=>({value:e.size,variant:e.name})));let e=null===(C=t.tiers)||void 0===C?void 0:C.filter((e=>"internal"===e.type)).reduce(((e,t)=>e+t.size),0),a=t.tiers.filter((e=>"internal"!==e.type)).reduce(((e,t)=>e+t.size),0);const n=(0,d.l5)(a,!0).split(" ");v.value=n[0],v.unit=n[1];const l=(0,d.l5)(e,!0).split(" ");m.value=l[0],m.unit=l[1]}else y=[{value:t.capacity_usage||0,variant:"STANDARD"}];return(0,g.jsx)(n.Fragment,{children:(0,g.jsx)(f,{id:"list-tenant-".concat(t.name),onClick:()=>{a((0,o.V7)({name:t.name,namespace:t.namespace})),a((0,c.v)()),s("/namespaces/".concat(t.namespace,"/tenants/").concat(t.name,"/summary"))},children:(0,g.jsxs)(l.rjZ,{container:!0,children:[(0,g.jsxs)(l.rjZ,{item:!0,xs:12,className:"tenantTitle",children:[(0,g.jsx)(l.xuv,{children:(0,g.jsx)("h1",{children:t.name})}),(0,g.jsx)(l.xuv,{children:(0,g.jsxs)("span",{className:"namespaceLabel",children:["Namespace:\xa0",t.namespace]})})]}),(0,g.jsx)(l.rjZ,{item:!0,xs:12,sx:{marginTop:2},children:(0,g.jsxs)(l.rjZ,{container:!0,children:[(0,g.jsx)(l.rjZ,{item:!0,xs:2,children:(0,g.jsx)(j.Z,{totalCapacity:t.capacity||0,usedSpaceVariants:y,statusClass:(e=>{switch(e){case"red":return"redState";case"yellow":return"yellowState";case"green":return"greenState";default:return"greyState"}})(t.health_status)})}),(0,g.jsxs)(l.rjZ,{item:!0,xs:7,children:[(0,g.jsxs)(l.rjZ,{item:!0,xs:!0,sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginTop:"10px"},children:[(0,g.jsx)(p,{label:"Raw Capacity",value:u.value,unit:u.unit}),(0,g.jsx)(p,{label:"Usable Capacity",value:h.value,unit:h.unit}),(0,g.jsx)(p,{label:"Pools",value:"".concat(t.pool_count)})]}),(0,g.jsx)(l.rjZ,{item:!0,xs:12,sx:{paddingLeft:"20px",marginTop:"15px"},children:(0,g.jsxs)("span",{className:"status",children:[(0,g.jsx)("strong",{children:"State:"})," ",t.currentState]})})]}),(0,g.jsx)(l.rjZ,{item:!0,xs:3,children:(0,g.jsx)(n.Fragment,{children:(0,g.jsxs)(l.rjZ,{container:!0,sx:{gap:20},children:[(0,g.jsxs)(l.rjZ,{item:!0,xs:2,sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,g.jsx)(l.FU8,{className:"muted",style:{width:25}}),(0,g.jsx)(l.xuv,{className:"muted",sx:{fontSize:12,fontWeight:"400"},children:"Usage"})]}),(0,g.jsxs)(l.rjZ,{item:!0,xs:9,sx:{paddingTop:8},children:[(!t.tiers||0===t.tiers.length)&&(0,g.jsxs)(l.xuv,{sx:{fontSize:14,fontWeight:400},children:[(0,g.jsx)("span",{className:"muted",children:"Internal: "})," ","".concat(x.value," ").concat(x.unit)]}),t.tiers&&t.tiers.length>0&&(0,g.jsxs)(n.Fragment,{children:[(0,g.jsxs)(l.xuv,{sx:{fontSize:14,fontWeight:400},children:[(0,g.jsx)("span",{className:"muted",children:"Internal: "})," ","".concat(m.value," ").concat(m.unit)]}),(0,g.jsxs)(l.xuv,{sx:{fontSize:14,fontWeight:400},children:[(0,g.jsx)("span",{className:"muted",children:"Tiered: "})," ","".concat(v.value," ").concat(v.unit)]})]})]})]})})})]})})]})})})};var y=a(5578),b=a(6166),C=a(9762),S=a(463);let T={};const w=e=>{let{rowRenderFunction:t,totalItems:a,defaultHeight:l}=e;const s=e=>{let{index:a,style:n}=e;return(0,g.jsx)("div",{style:n,children:t(a)})};return(0,g.jsx)(n.Fragment,{children:(0,g.jsx)(C.Z,{isItemLoaded:e=>!!T[e],loadMoreItems:(e,t)=>{for(let a=e;a<=t;a++)T[a]=1;for(let a=e;a<=t;a++)T[a]=2},itemCount:a,children:e=>{let{onItemsRendered:t,ref:n}=e;return(0,g.jsx)(S.qj,{children:e=>{let{width:i,height:r}=e;return(0,g.jsx)(b.t7,{itemSize:l||220,height:r,itemCount:a,width:i,ref:n,onItemsRendered:t,children:s})}})}})})};var z=a(9114),Z=a(7454),_=a(9435),F=a(9626);const R=(0,y.Z)(n.lazy((()=>a.e(798).then(a.bind(a,7798))))),N=()=>{const e=(0,r.TL)(),t=(0,i.s0)(),[a,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)([]),[x,m]=(0,n.useState)(!1),[p,j]=(0,n.useState)(null),[f,y]=(0,n.useState)("name"),b=u.filter((e=>""===c||e.name.indexOf(c)>=0));b.sort(((e,t)=>{switch(f){case"capacity":return e.capacity&&t.capacity?e.capacity>t.capacity?1:e.capacity<t.capacity?-1:0:0;case"usage":return e.capacity_usage&&t.capacity_usage?e.capacity_usage>t.capacity_usage?1:e.capacity_usage<t.capacity_usage?-1:0:0;case"active_status":return"red"===e.health_status&&"red"!==t.health_status?1:"red"!==e.health_status&&"red"===t.health_status?-1:0;case"failing_status":return"green"===e.health_status&&"green"!==t.health_status?1:"green"!==e.health_status&&"green"===t.health_status?-1:0;default:return e.name>t.name?1:e.name<t.name?-1:0}})),(0,n.useEffect)((()=>{if(a){(()=>{F.h.tenants.listAllTenants().then((e=>{var t;if(!e.data)return void o(!1);let a=null!==(t=e.data.tenants)&&void 0!==t?t:[];h(a),o(!1)})).catch((t=>{e((0,s.Ih)(t)),o(!1)}))})()}}),[a,e]),(0,n.useEffect)((()=>{o(!0)}),[]);return(0,g.jsxs)(n.Fragment,{children:[x&&(0,g.jsx)(R,{newServiceAccount:p,open:x,closeModal:()=>{m(!1),j(null)},entity:"Tenant"}),(0,g.jsx)(_.Z,{label:"Tenants",middleComponent:(0,g.jsx)(z.Z,{placeholder:"Filter Tenants",onChange:e=>{d(e)},value:c}),actions:(0,g.jsxs)(l.rjZ,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"},children:[(0,g.jsx)(Z.Z,{tooltip:"Refresh Tenant List",children:(0,g.jsx)(l.zxk,{id:"refresh-tenant-list",onClick:()=>{o(!0)},icon:(0,g.jsx)(l.DuK,{}),variant:"regular"})}),(0,g.jsx)(Z.Z,{tooltip:"Create Tenant",children:(0,g.jsx)(l.zxk,{id:"create-tenant",label:"Create Tenant",onClick:()=>{t("/tenants/add")},icon:(0,g.jsx)(l.dtP,{}),variant:"callAction"})})]})}),(0,g.jsx)(l.Xgh,{variant:"constrained",children:(0,g.jsxs)(l.rjZ,{item:!0,xs:12,style:{height:"calc(100vh - 195px)"},children:[a&&(0,g.jsx)(l.kod,{}),!a&&(0,g.jsxs)(n.Fragment,{children:[0!==b.length&&(0,g.jsxs)(n.Fragment,{children:[(0,g.jsx)(l.rjZ,{item:!0,xs:12,style:{display:"flex",justifyContent:"flex-end",marginBottom:10},children:(0,g.jsx)("div",{style:{maxWidth:200,width:"95%",display:"flex",flexDirection:"row",alignItems:"center"},children:(0,g.jsx)(l.PhF,{id:"sort-by",label:"Sort by",value:f,onChange:e=>{y(e)},name:"sort-by",options:[{label:"Name",value:"name"},{label:"Capacity",value:"capacity"},{label:"Usage",value:"usage"},{label:"Active Status",value:"active_status"},{label:"Failing Status",value:"failing_status"}],noLabelMinWidth:!0})})}),(0,g.jsx)(w,{rowRenderFunction:e=>{const t=b[e]||null;return t?(0,g.jsx)(v,{tenant:t}):null},totalItems:b.length})]}),0===b.length&&(0,g.jsx)(l.rjZ,{container:!0,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,g.jsx)(l.rjZ,{item:!0,xs:8,children:(0,g.jsx)(l.KfX,{iconComponent:(0,g.jsx)(l.zb0,{}),title:"Tenants",help:(0,g.jsxs)(n.Fragment,{children:["Tenant is the logical structure to represent a MinIO deployment. A tenant can have different size and configurations from other tenants, even a different storage class.",(0,g.jsx)("br",{}),(0,g.jsx)("br",{}),"To get started,\xa0",(0,g.jsx)(l.vmT,{onClick:()=>{t("/tenants/add")},children:"Create a Tenant."})]})})})})]})]})})]})}},4815:(e,t,a)=>{a.d(t,{Z:()=>x});a(2791);var n=a(9945),l=a(2600),s=a(5390),i=a(1048),r=a(5248),o=a(184);const c=e=>{let{totalValue:t,sizeItems:a,bgColor:n="#ededed"}=e;return(0,o.jsx)("div",{style:{width:"100%",height:12,backgroundColor:n,borderRadius:30,display:"flex",transitionDuration:"0.3s",overflow:"hidden"},children:a.map(((e,a)=>{const n=100*e.value/t;return(0,o.jsx)("div",{style:{width:"".concat(n,"%"),height:"100%",backgroundColor:e.color,transitionDuration:"0.3s"}},"itemSize-".concat(a.toString()))}))})};var d=a(6444),u=a(6181),h=a.n(u);const x=e=>{let{totalCapacity:t,usedSpaceVariants:a,statusClass:u,render:x="pie"}=e;const g=["#8dacd3","#bca1ea","#92e8d2","#efc9ac","#97f274","#f7d291","#71ACCB","#f28282","#e28cc1","#2781B0"],m=(0,d.Fg)(),p="".concat(h()(m,"borderColor","#ededed"),"70"),j=a.reduce(((e,t)=>e+t.value),0),f=t-j;let v=[];const y=a.find((e=>"STANDARD"===e.variant))||{value:0,variant:"empty"};if(a.length>10){v=[{value:j-y.value,color:"#2781B0",label:"Total Tiers Space"}]}else v=a.filter((e=>"STANDARD"!==e.variant)).map(((e,t)=>({value:e.value,color:g[t],label:"Tier - ".concat(e.variant)})));let b=h()(m,"signalColors.main","#07193E");const C=100*y.value/t;C>=90?b=h()(m,"signalColors.danger","#C83B51"):C>=75&&(b=h()(m,"signalColors.warning","#FFAB0F"));const S=[{value:y.value,color:b,label:"Used Space by Tenant"},...v,{value:f,color:"bar"===x?p:"transparent",label:"Empty Space"}];if("bar"===x){const e=S.map((e=>({value:e.value,color:e.color,itemName:e.label})));return(0,o.jsx)("div",{style:{width:"100%",marginBottom:15},children:(0,o.jsx)(c,{totalValue:t,sizeItems:e,bgColor:p})})}return(0,o.jsxs)("div",{style:{position:"relative",width:110,height:110},children:[(0,o.jsx)("div",{style:{position:"absolute",right:-5,top:15,zIndex:400},className:u,children:(0,o.jsx)(n.J$M,{style:{border:"#fff 2px solid",borderRadius:"100%",width:20,height:20}})}),(0,o.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontWeight:"bold",fontSize:11},children:isNaN(j)?"N/A":(0,r.l5)(j)}),(0,o.jsx)("div",{children:(0,o.jsxs)(l.u,{width:110,height:110,children:[(0,o.jsx)(s.b,{data:[{value:100}],cx:"50%",cy:"50%",dataKey:"value",outerRadius:50,innerRadius:40,fill:p,isAnimationActive:!1,stroke:"none"}),(0,o.jsx)(s.b,{data:S,cx:"50%",cy:"50%",dataKey:"value",outerRadius:50,innerRadius:40,children:S.map(((e,t)=>(0,o.jsx)(i.b,{fill:e.color,stroke:"none"},"cellCapacity-".concat(t))))})]})})]})}}}]);
//# sourceMappingURL=483.5d1963c6.chunk.js.map