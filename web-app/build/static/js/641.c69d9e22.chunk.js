"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[641],{9641:(e,n,a)=>{a.r(n),a.d(n,{default:()=>v});var t=a(5043),s=a(9456),i=a(9923),l=a(2961),o=a(4159),r=a(6483),c=a(649),d=a(8661),x=a(579);const v=()=>{const e=(0,l.jL)(),n=(0,s.d4)((e=>e.tenants.tenantInfo)),a=(0,s.d4)((e=>e.tenants.loadingTenant)),[v,m]=(0,t.useState)(!1),[u,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)([]),[j,g]=(0,t.useState)([]),[y,k]=(0,t.useState)(!1),b=(0,t.useCallback)((()=>{c.A.invoke("GET","/api/v1/namespaces/".concat(null===n||void 0===n?void 0:n.namespace,"/tenants/").concat(null===n||void 0===n?void 0:n.name,"/configuration")).then((e=>{e.environmentVariables&&(f(e.environmentVariables),k(e.sftpExposed))})).catch((n=>{e((0,o.C9)(n))}))}),[n,e]);(0,t.useEffect)((()=>{n&&b()}),[n,b]);return(0,x.jsxs)(t.Fragment,{children:[(0,x.jsx)(d.A,{title:"Save and Restart",confirmText:"Restart",cancelText:"Cancel",titleIcon:(0,x.jsx)(i.$rg,{}),isLoading:v,onClose:()=>h(!1),isOpen:u,onConfirm:()=>{m(!0);let a={environmentVariables:p.filter((e=>""!==e.key)),keysToBeDeleted:j,sftpExposed:y};c.A.invoke("PATCH","/api/v1/namespaces/".concat(null===n||void 0===n?void 0:n.namespace,"/tenants/").concat(null===n||void 0===n?void 0:n.name,"/configuration"),a).then((()=>{m(!1),h(!1),b()})).catch((n=>{e((0,o.C9)(n)),m(!1)}))},confirmationContent:(0,x.jsx)(t.Fragment,{children:"Are you sure you want to save the changes and restart the service?"})}),a?(0,x.jsx)(i.azJ,{sx:{textAlign:"center"},children:(0,x.jsx)(i.aHM,{})}):(0,x.jsxs)(i.azJ,{children:[(0,x.jsx)(i._xt,{separator:!0,sx:{marginBottom:15},children:"Configuration"}),(0,x.jsx)(i.xA9,{container:!0,sx:{"& .envVarRow":{display:"flex",alignItems:"center",justifyContent:"flex-start","&:last-child":{borderBottom:0},"@media (max-width: 900px)":{flex:1,"& div label":{minWidth:50}}},"& .rowActions":{display:"flex",justifyContent:"flex-end","@media (max-width: 900px)":{flex:1}},"& .overlayAction":{marginLeft:10},"& .rowItem":{marginRight:10,display:"flex","& div label":{minWidth:50},"@media (max-width: 900px)":{flexFlow:"column"}}},children:p.map(((e,n)=>(0,x.jsxs)(i.xA9,{item:!0,xs:12,className:"envVarRow",sx:{marginBottom:15},children:[(0,x.jsx)(i.xA9,{item:!0,xs:5,className:"rowItem",children:(0,x.jsx)(i.cl_,{id:"env_var_key",name:"env_var_key",label:"Key",value:e.key,onChange:e=>{const a=[...p];f(a.map(((a,t)=>t===n?{key:e.target.value,value:a.value}:a)))},index:n},"env_var_key_".concat(n.toString()))}),(0,x.jsx)(i.xA9,{item:!0,xs:5,className:"rowItem",children:(0,x.jsx)(i.cl_,{id:"env_var_value",name:"env_var_value",label:"Value",value:e.value,onChange:e=>{const a=[...p];f(a.map(((a,t)=>t===n?{key:a.key,value:e.target.value}:a)))},index:n,type:r.zt[e.key]&&r.zt[e.key].secret?"password":"text"},"env_var_value_".concat(n.toString()))}),(0,x.jsxs)(i.xA9,{item:!0,xs:2,className:"rowActions",children:[(0,x.jsx)("div",{className:"overlayAction",children:(0,x.jsx)(i.K0,{size:"small",onClick:()=>{const e=[...p];e.push({key:"",value:""}),f(e)},disabled:n!==p.length-1,children:(0,x.jsx)(i.REV,{})})}),(0,x.jsx)("div",{className:"overlayAction",children:(0,x.jsx)(i.K0,{size:"small",onClick:()=>{const a=p.filter(((e,a)=>a!==n));f(a),g([...j,e.key])},disabled:p.length<=1,children:(0,x.jsx)(i.YPx,{})})})]})]},"tenant-envVar-".concat(n.toString()))))}),(0,x.jsx)(i.xA9,{container:!0,children:(0,x.jsx)(i.xA9,{item:!0,xs:12,sx:{justifyContent:"end",textAlign:"right",marginBottom:15},children:(0,x.jsx)(i.dOG,{label:"SFTP",indicatorLabels:["Enabled","Disabled"],checked:y,value:"expose_sftp",id:"expose-sftp",name:"expose-sftp",onChange:()=>{k(!y)},description:""})})}),(0,x.jsx)(i.xA9,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"},children:(0,x.jsx)(i.$nd,{id:"save-environment-variables",type:"submit",variant:"callAction",disabled:u||v,onClick:()=>h(!0),label:"Save"})})]})]})}}}]);
//# sourceMappingURL=641.c69d9e22.chunk.js.map