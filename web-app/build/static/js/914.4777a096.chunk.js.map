{"version":3,"file":"static/js/914.4777a096.chunk.js","mappings":"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","sources":["screens/LoginPage/LoginCallback.tsx","../node_modules/@mui/icons-material/ErrorOutline.js"],"sourcesContent":["// This file is part of MinIO Operator\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useEffect, useState } from \"react\"; // eslint-disable-line @typescript-eslint/no-unused-vars\nimport { useNavigate } from \"react-router-dom\";\nimport api from \"../../common/api\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport { baseUrl } from \"../../history\";\nimport { Paper } from \"@mui/material\";\nimport Grid from \"@mui/material/Grid\";\nimport Typography from \"@mui/material/Typography\";\nimport { Button } from \"mds\";\nimport ErrorOutlineIcon from \"@mui/icons-material/ErrorOutline\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    paper: {\n      borderRadius: 8,\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      width: 800,\n      height: 424,\n      margin: \"auto\",\n      position: \"absolute\",\n      top: \"50%\",\n      left: \"50%\",\n      marginLeft: -400,\n      marginTop: -212,\n      \"&.MuiPaper-root\": {\n        borderRadius: 8,\n      },\n    },\n    mainContainer: {\n      position: \"relative\",\n      height: 424,\n    },\n    theOcean: {\n      borderTopLeftRadius: 8,\n      borderBottomLeftRadius: 8,\n      background:\n        \"transparent linear-gradient(to bottom, #073052 0%,#05122b 100%); 0% 0% no-repeat padding-box;\",\n    },\n    oceanBg: {\n      backgroundImage: \"url(/images/BG_Illustration.svg)\",\n      backgroundRepeat: \"no-repeat\",\n      backgroundPosition: \"bottom left\",\n      height: \"100%\",\n      width: 324,\n    },\n    theLogin: {\n      padding: \"40px 45px 20px 45px\",\n    },\n    extraDetailsContainer: {\n      fontStyle: \"italic\",\n      color: \"#9C9C9C\",\n      transition: \"all .2s ease-in-out\",\n      padding: \"0 5px\",\n      marginTop: 5,\n      overflow: \"auto\",\n    },\n    errorLabel: {\n      color: \"#000\",\n      fontSize: 18,\n      fontWeight: 500,\n      marginLeft: 5,\n    },\n    simpleError: {\n      marginTop: 5,\n      padding: \"2px 5px\",\n      fontSize: 16,\n      color: \"#000\",\n    },\n    messageIcon: {\n      color: \"#C72C48\",\n      display: \"flex\",\n      \"& svg\": {\n        width: 32,\n        height: 32,\n      },\n    },\n    errorTitle: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n  });\n\ninterface ILoginCallBackProps {\n  classes: any;\n}\n\nconst LoginCallback = ({ classes }: ILoginCallBackProps) => {\n  const navigate = useNavigate();\n\n  const [error, setError] = useState<string>(\"\");\n  const [errorDescription, setErrorDescription] = useState<string>(\"\");\n  const [loading, setLoading] = useState<boolean>(true);\n\n  useEffect(() => {\n    if (loading) {\n      const queryString = window.location.search;\n      const urlParams = new URLSearchParams(queryString);\n      const code = urlParams.get(\"code\");\n      const state = urlParams.get(\"state\");\n      const error = urlParams.get(\"error\");\n      const errorDescription = urlParams.get(\"errorDescription\");\n      if (error || errorDescription) {\n        setError(error || \"\");\n        setErrorDescription(errorDescription || \"\");\n        setLoading(false);\n      } else {\n        api\n          .invoke(\"POST\", \"/api/v1/login/oauth2/auth\", { code, state })\n          .then(() => {\n            // We push to history the new URL.\n            let targetPath = \"/\";\n            if (\n              localStorage.getItem(\"redirect-path\") &&\n              localStorage.getItem(\"redirect-path\") !== \"\"\n            ) {\n              targetPath = `${localStorage.getItem(\"redirect-path\")}`;\n              localStorage.setItem(\"redirect-path\", \"\");\n            }\n            if (state) {\n              localStorage.setItem(\"auth-state\", state);\n            }\n            setLoading(false);\n            navigate(targetPath);\n          })\n          .catch((error) => {\n            setError(error.errorMessage);\n            setErrorDescription(error.detailedError);\n            setLoading(false);\n          });\n      }\n    }\n  }, [loading, navigate]);\n  return error !== \"\" || errorDescription !== \"\" ? (\n    <React.Fragment>\n      <Paper className={classes.paper}>\n        <Grid container className={classes.mainContainer}>\n          <Grid item xs={7} className={classes.theOcean}>\n            <div className={classes.oceanBg} />\n          </Grid>\n          <Grid item xs={5} className={classes.theLogin}>\n            <div className={classes.errorTitle}>\n              <span className={classes.messageIcon}>\n                <ErrorOutlineIcon />\n              </span>\n              <span className={classes.errorLabel}>Error from IDP</span>\n            </div>\n            <div className={classes.simpleError}>{error}</div>\n            <Typography\n              variant=\"body1\"\n              gutterBottom\n              component=\"div\"\n              className={classes.extraDetailsContainer}\n            >\n              {errorDescription}\n            </Typography>\n            <Button\n              id={\"back-to-login\"}\n              onClick={() => {\n                window.location.href = `${baseUrl}login`;\n              }}\n              type=\"submit\"\n              variant=\"callAction\"\n              fullWidth\n            >\n              Back to Login\n            </Button>\n          </Grid>\n        </Grid>\n      </Paper>\n    </React.Fragment>\n  ) : null;\n};\n\nexport default withStyles(styles)(LoginCallback);\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), 'ErrorOutline');\nexports.default = _default;"],"names":["withStyles","theme","createStyles","paper","borderRadius","display","flexDirection","alignItems","width","height","margin","position","top","left","marginLeft","marginTop","mainContainer","theOcean","borderTopLeftRadius","borderBottomLeftRadius","background","oceanBg","backgroundImage","backgroundRepeat","backgroundPosition","theLogin","padding","extraDetailsContainer","fontStyle","color","transition","overflow","errorLabel","fontSize","fontWeight","simpleError","messageIcon","errorTitle","_ref","classes","navigate","useNavigate","_useState","useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","errorDescription","setErrorDescription","_useState5","_useState6","loading","setLoading","useEffect","queryString","window","location","search","urlParams","URLSearchParams","code","get","state","api","invoke","then","targetPath","localStorage","getItem","concat","setItem","catch","errorMessage","detailedError","_jsx","React","children","Paper","className","_jsxs","Grid","container","item","xs","ErrorOutlineIcon","Typography","variant","gutterBottom","component","Button","id","onClick","href","baseUrl","type","fullWidth","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d"],"sourceRoot":""}