"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[405],{13871:function(e,n,t){var a,i=t(30168),s=(0,t(26088).Z)("hr")(a||(a=(0,i.Z)(["\n  border-top: 0;\n  border-left: 0;\n  border-right: 0;\n  border-color: #999999;\n  background-color: transparent;\n"])));n.Z=s},96405:function(e,n,t){t.r(n);var a=t(93433),i=t(29439),s=t(1413),o=t(72791),l=t(78687),r=t(37516),c=t(51691),d=t(13400),u=t(42419),v=t(75952),f=t(11135),x=t(25787),h=t(61889),m=t(23814),p=t(21435),Z=t(41320),g=t(87995),j=t(81207),b=t(40306),y=t(45248),k=t(13871),C=t(80184),w=(0,l.$j)((function(e){return{loadingTenant:e.tenants.loadingTenant,selectedTenant:e.tenants.currentTenant,tenant:e.tenants.tenantInfo}}),null);n.default=(0,x.Z)((function(e){return(0,f.Z)((0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)({},m.oZ),m.bK),{},{envVarRow:{display:"flex",alignItems:"center",justifyContent:"flex-start","&:last-child":{borderBottom:0},"@media (max-width: 900px)":{flex:1,"& div label":{minWidth:50}}},rowActions:{display:"flex",justifyContent:"flex-end","@media (max-width: 900px)":{flex:1}},overlayAction:{marginLeft:10,"& svg":{width:15,height:15,maxWidth:15,maxHeight:15},"& button":{background:"#EAEAEA"}},loaderAlign:{textAlign:"center"},fileItem:{marginRight:10,display:"flex","& div label":{minWidth:50},"@media (max-width: 900px)":{flexFlow:"column"}}},m.Bz),m.QV),m.DF),m.oO),m.AK))}))(w((function(e){var n=e.classes,t=(0,Z.TL)(),s=(0,l.v9)((function(e){return e.tenants.tenantInfo})),f=(0,l.v9)((function(e){return e.tenants.loadingTenant})),x=(0,o.useState)(!1),m=(0,i.Z)(x,2),w=m[0],A=m[1],_=(0,o.useState)(!1),T=(0,i.Z)(_,2),P=T[0],S=T[1],I=(0,o.useState)([]),N=(0,i.Z)(I,2),E=N[0],V=N[1],F=(0,o.useState)([]),R=(0,i.Z)(F,2),z=R[0],L=R[1],H=(0,o.useState)(!1),K=(0,i.Z)(H,2),B=K[0],D=K[1],G=(0,o.useCallback)((function(){j.Z.invoke("GET","/api/v1/namespaces/".concat(null===s||void 0===s?void 0:s.namespace,"/tenants/").concat(null===s||void 0===s?void 0:s.name,"/configuration")).then((function(e){e.environmentVariables&&(V(e.environmentVariables),D(e.sftpExposed))})).catch((function(e){t((0,g.Ih)(e))}))}),[s,t]);(0,o.useEffect)((function(){s&&G()}),[s,G]);return(0,C.jsxs)(o.Fragment,{children:[(0,C.jsx)(b.Z,{title:"Save and Restart",confirmText:"Restart",cancelText:"Cancel",titleIcon:(0,C.jsx)(v.EjK,{}),isLoading:w,onClose:function(){return S(!1)},isOpen:P,onConfirm:function(){A(!0);var e={environmentVariables:E.filter((function(e){return""!==e.key})),keysToBeDeleted:z,sftpExposed:B};j.Z.invoke("PATCH","/api/v1/namespaces/".concat(null===s||void 0===s?void 0:s.namespace,"/tenants/").concat(null===s||void 0===s?void 0:s.name,"/configuration"),e).then((function(){A(!1),S(!1),G()})).catch((function(e){t((0,g.Ih)(e)),A(!1)}))},confirmationContent:(0,C.jsx)(c.Z,{children:"Are you sure you want to save the changes and restart the service?"})}),f?(0,C.jsx)("div",{className:n.loaderAlign,children:(0,C.jsx)(v.aNw,{})}):(0,C.jsxs)(h.ZP,{container:!0,spacing:1,children:[(0,C.jsxs)(h.ZP,{item:!0,xs:12,children:[(0,C.jsx)("h1",{className:n.sectionTitle,children:"Configuration"}),(0,C.jsx)(k.Z,{})]}),(0,C.jsx)(h.ZP,{container:!0,spacing:1,children:E.map((function(e,t){return(0,C.jsxs)(h.ZP,{item:!0,xs:12,className:"".concat(n.formFieldRow," ").concat(n.envVarRow),children:[(0,C.jsx)(h.ZP,{item:!0,xs:5,className:n.fileItem,children:(0,C.jsx)(p.Z,{id:"env_var_key",name:"env_var_key",label:"Key",value:e.key,onChange:function(e){var n=(0,a.Z)(E);V(n.map((function(n,a){return a===t?{key:e.target.value,value:n.value}:n})))},index:t},"env_var_key_".concat(t.toString()))}),(0,C.jsx)(h.ZP,{item:!0,xs:5,className:n.fileItem,children:(0,C.jsx)(p.Z,{id:"env_var_value",name:"env_var_value",label:"Value",value:e.value,onChange:function(e){var n=(0,a.Z)(E);V(n.map((function(n,a){return a===t?{key:n.key,value:e.target.value}:n})))},index:t,type:y.Gq[e.key]&&y.Gq[e.key].secret?"password":"text"},"env_var_value_".concat(t.toString()))}),(0,C.jsxs)(h.ZP,{item:!0,xs:2,className:n.rowActions,children:[(0,C.jsx)("div",{className:n.overlayAction,children:(0,C.jsx)(d.Z,{size:"small",onClick:function(){var e=(0,a.Z)(E);e.push({key:"",value:""}),V(e)},disabled:t!==E.length-1,children:(0,C.jsx)(u.Z,{})})}),(0,C.jsx)("div",{className:n.overlayAction,children:(0,C.jsx)(d.Z,{size:"small",onClick:function(){var n=E.filter((function(e,n){return n!==t}));V(n),L([].concat((0,a.Z)(z),[e.key]))},disabled:E.length<=1,children:(0,C.jsx)(v.HFL,{})})})]})]},"tenant-envVar-".concat(t.toString()))}))}),(0,C.jsx)(h.ZP,{container:!0,spacing:1,children:(0,C.jsx)(h.ZP,{item:!0,xs:12,justifyContent:"end",textAlign:"right",className:n.configSectionItem,children:(0,C.jsx)(r.Z,{label:"SFTP",indicatorLabels:["Enabled","Disabled"],checked:B,value:"expose_sftp",id:"expose-sftp",name:"expose-sftp",onChange:function(){D(!B)},description:""})})}),(0,C.jsx)(h.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"},children:(0,C.jsx)(v.zxk,{id:"save-environment-variables",type:"submit",variant:"callAction",disabled:P||w,onClick:function(){return S(!0)},label:"Save"})})]})]})})))},42419:function(e,n,t){var a=t(64836);n.Z=void 0;var i=a(t(45649)),s=t(80184),o=(0,i.default)((0,s.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");n.Z=o}}]);
//# sourceMappingURL=405.5df626d3.chunk.js.map