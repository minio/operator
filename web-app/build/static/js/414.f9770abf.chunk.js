"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[414],{7403:(e,t,n)=>{n.d(t,{U:()=>o,_:()=>a});const a={label:{color:"#07193E",fontSize:13,alignSelf:"center",whiteSpace:"nowrap","&:not(:first-of-type)":{marginLeft:10}},actionsTray:{display:"flex",justifyContent:"space-between",marginBottom:"1rem",alignItems:"center","& button":{flexGrow:0,marginLeft:8}}},o={modalButtonBar:{marginTop:15,display:"flex",alignItems:"center",justifyContent:"flex-end","& button":{marginRight:10},"& button:last-child":{marginRight:0}},modalFormScrollable:{maxHeight:"calc(100vh - 300px)",overflowY:"auto",paddingTop:10}}},5448:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(5043),o=n(649);const s=(e,t)=>{const[n,s]=(0,a.useState)(!1);return[n,(n,a,l,r)=>{s(!0),o.A.invoke(n,a,l,r).then((t=>{s(!1),e(t)})).catch((e=>{s(!1),t(e)}))}]}},4681:(e,t,n)=>{n.d(t,{A:()=>s});n(5043);var a=n(9923),o=n(579);const s=e=>{let{placeholder:t="",onChange:n,overrideClass:s,value:l,id:r="search-resource",label:i="",sx:c}=e;return(0,o.jsx)(a.cl_,{placeholder:t,className:s||"",id:r,label:i,onChange:e=>{n(e.target.value)},value:l,startIcon:(0,o.jsx)(a.WIv,{}),sx:c})}},3414:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var a=n(5043),o=n(9456),s=n(3216),l=n(9923),r=n(7403),i=n(6483),c=n(2961),d=n(4159),m=n(649),p=n(5448),u=n(8661),h=n(579);const x=e=>{let{deleteOpen:t,selectedPod:n,closeDeleteModalAndRefresh:o}=e;const s=(0,c.jL)(),[r,i]=(0,a.useState)(""),[m,x]=(0,p.A)((()=>o(!0)),(e=>s((0,d.C9)(e))));return(0,h.jsx)(u.A,{title:"Delete Pod",confirmText:"Delete",isOpen:t,titleIcon:(0,h.jsx)(l.xWY,{}),isLoading:m,onConfirm:()=>{r===n.name?x("DELETE","/api/v1/namespaces/".concat(n.namespace,"/tenants/").concat(n.tenant,"/pods/").concat(n.name)):(0,d.C9)({errorMessage:"Tenant name is incorrect",detailedError:""})},onClose:()=>o(!1),confirmButtonProps:{disabled:r!==n.name||m},confirmationContent:(0,h.jsxs)(a.Fragment,{children:["To continue please type ",(0,h.jsx)("b",{children:n.name})," in the box.",(0,h.jsx)(l.azJ,{sx:{marginTop:15},children:(0,h.jsx)(l.cl_,{id:"retype-pod",name:"retype-pod",onChange:e=>{i(e.target.value)},label:"",value:r})})]})})};var g=n(6681),f=n(4681);const b=()=>{const e=(0,c.jL)(),t=(0,s.Zp)(),{tenantName:n,tenantNamespace:p}=(0,s.g)(),u=(0,o.d4)((e=>e.tenants.loadingTenant)),[b,y]=(0,a.useState)([]),[j,C]=(0,a.useState)(!0),[v,S]=(0,a.useState)(!1),[A,w]=(0,a.useState)(null),[E,T]=(0,a.useState)(""),[k,I]=(0,a.useState)(""),[P,L]=(0,a.useState)(!1),[_,B]=(0,a.useState)(!1),[D,N]=(0,a.useState)(!1),[R,K]=(0,a.useState)(!1),[z,F]=(0,a.useState)("");(0,a.useEffect)((()=>{if(_){let e=document.createElement("a");e.setAttribute("href","data:application/gzip;base64,".concat(k)),e.setAttribute("download",z),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),B(!1),N(!0)}}),[_,z,k]);const M=b.filter((e=>e.name.toLowerCase().includes(E.toLowerCase()))),W=[{type:"view",onClick:e=>{t("/namespaces/".concat(p||"","/tenants/").concat(n||"","/pods/").concat(e.name))}},{type:"delete",onClick:e=>{e.tenant=n,e.namespace=p,w(e),S(!0)}}];(0,a.useEffect)((()=>{u&&C(!0)}),[u]),(0,a.useEffect)((()=>{j&&m.A.invoke("GET","/api/v1/namespaces/".concat(p||"","/tenants/").concat(n||"","/pods")).then((e=>{for(let t=0;t<e.length;t++){let n=Date.now()/1e3|0;e[t].time=(0,i.hr)((n-parseInt(e[t].timeCreated)).toString())}y(e),C(!1)})).catch((t=>{e((0,d.C9)({errorMessage:"Error loading pods",detailedError:t.detailedError}))}))}),[j,n,p,e]),(0,a.useEffect)((()=>{P?(I(""),m.A.invoke("GET","/api/v1/namespaces/".concat(p,"/tenants/").concat(n,"/log-report")).then((async e=>{I(decodeURIComponent(e.blob)),F(e.filename||"tenant-log-report.zip"),L(!1),B(!0),0===e.filename.length||0===e.blob.length?K(!0):K(!1)})).catch((t=>{e((0,d.C9)(t)),L(!1),K(!0)}))):L(!1)}),[n,p,P,e]);return(0,h.jsxs)(a.Fragment,{children:[v&&(0,h.jsx)(x,{deleteOpen:v,selectedPod:A,closeDeleteModalAndRefresh:e=>{S(!1),C(!0)}}),(0,h.jsx)(l._xt,{separator:!0,sx:{marginBottom:15},actions:(0,h.jsx)(g.A,{tooltip:"A report of all tenant logs will be generated as a .zip file and downloaded for analysis. This report can be uploaded to SUBNET to enable our team to best assist you in troubleshooting.",children:(0,h.jsx)(l.$nd,{id:"log_report",onClick:()=>{L(!0)},disabled:0===b.length,children:"Download Log Report"})}),children:"Pods"}),D&&!R&&(0,h.jsx)(l.Wei,{title:"Success",message:"Tenant report downloaded to "+z,variant:"success"}),R&&(0,h.jsx)(l.Wei,{title:"Error",message:"There was a problem generating the report",variant:"error"}),(0,h.jsxs)(l.xA9,{container:!0,sx:{marginBottom:15},children:[(0,h.jsx)(l.xA9,{item:!0,xs:4,sx:{display:"flex",alignItems:"center"}}),(0,h.jsx)(l.xA9,{item:!0,xs:4,sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"}})]}),(0,h.jsx)(l.xA9,{item:!0,xs:12,sx:r._.actionsTray,children:(0,h.jsx)(f.A,{value:E,onChange:e=>{T(e)},placeholder:"Search Pods",id:"search-resource"})}),(0,h.jsx)(l.xA9,{item:!0,xs:12,children:(0,h.jsx)(l.bQt,{columns:[{label:"Name",elementKey:"name",width:200},{label:"Status",elementKey:"status"},{label:"Age",elementKey:"time"},{label:"Pod IP",elementKey:"podIP"},{label:"Restarts",elementKey:"restarts",renderFunction:e=>null!==e?e:0},{label:"Node",elementKey:"node"}],isLoading:j,records:M,itemActions:W,entityName:"Pods",idField:"name",customPaperHeight:"calc(100vh - 400px)"})})]})}}}]);
//# sourceMappingURL=414.f9770abf.chunk.js.map