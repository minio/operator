{"version":3,"file":"static/js/847.ef311088.chunk.js","mappings":"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","sources":["screens/Console/Common/Hooks/useApi.tsx","screens/Console/Marketplace/euTimezones.ts","screens/Console/Marketplace/SetEmailModal.tsx","screens/Console/Marketplace/Marketplace.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport api from \"../../../../common/api\";\nimport { ErrorResponseHandler } from \"../../../../common/types\";\n\ntype NoReturnFunction = (param?: any) => void;\ntype ApiMethodToInvoke = (method: string, url: string, data?: any) => void;\ntype IsApiInProgress = boolean;\n\nconst useApi = (\n  onSuccess: NoReturnFunction,\n  onError: NoReturnFunction,\n): [IsApiInProgress, ApiMethodToInvoke] => {\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n\n  const callApi = (method: string, url: string, data?: any, headers?: any) => {\n    setIsLoading(true);\n    api\n      .invoke(method, url, data, headers)\n      .then((res: any) => {\n        setIsLoading(false);\n        onSuccess(res);\n      })\n      .catch((err: ErrorResponseHandler) => {\n        setIsLoading(false);\n        onError(err);\n      });\n  };\n\n  return [isLoading, callApi];\n};\n\nexport default useApi;\n","// This file is part of MinIO Operator\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nexport const euTimezones = [\n  \"europe/amsterdam\",\n  \"europe/andorra\",\n  \"europe/astrakhan\",\n  \"europe/athens\",\n  \"europe/belgrade\",\n  \"europe/berlin\",\n  \"europe/bratislava\",\n  \"europe/brussels\",\n  \"europe/bucharest\",\n  \"europe/budapest\",\n  \"europe/busingen\",\n  \"europe/chisinau\",\n  \"europe/copenhagen\",\n  \"europe/dublin\",\n  \"europe/gibraltar\",\n  \"europe/guernsey\",\n  \"europe/helsinki\",\n  \"europe/isle_of_man\",\n  \"europe/istanbul\",\n  \"europe/jersey\",\n  \"europe/kaliningrad\",\n  \"europe/kiev\",\n  \"europe/kirov\",\n  \"europe/lisbon\",\n  \"europe/ljubljana\",\n  \"europe/london\",\n  \"europe/luxembourg\",\n  \"europe/madrid\",\n  \"europe/malta\",\n  \"europe/mariehamn\",\n  \"europe/minsk\",\n  \"europe/monaco\",\n  \"europe/moscow\",\n  \"europe/oslo\",\n  \"europe/paris\",\n  \"europe/podgorica\",\n  \"europe/prague\",\n  \"europe/riga\",\n  \"europe/rome\",\n  \"europe/samara\",\n  \"europe/san_marino\",\n  \"europe/sarajevo\",\n  \"europe/saratov\",\n  \"europe/simferopol\",\n  \"europe/skopje\",\n  \"europe/sofia\",\n  \"europe/stockholm\",\n  \"europe/tallinn\",\n  \"europe/tirane\",\n  \"europe/ulyanovsk\",\n  \"europe/uzhgorod\",\n  \"europe/vaduz\",\n  \"europe/vatican\",\n  \"europe/vienna\",\n  \"europe/vilnius\",\n  \"europe/volgograd\",\n  \"europe/warsaw\",\n  \"europe/zagreb\",\n  \"europe/zaporozhye\",\n  \"europe/zurich\",\n];\n","// This file is part of MinIO Operator\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { containerForHeader } from \"../Common/FormComponents/common/styleLibrary\";\nimport ConfirmDialog from \"../Common/ModalWrapper/ConfirmDialog\";\nimport useApi from \"../Common/Hooks/useApi\";\nimport React, { Fragment, useState } from \"react\";\nimport { ISetEmailModalProps } from \"./types\";\nimport { InfoIcon } from \"mds\";\nimport { ErrorResponseHandler } from \"../../../common/types\";\nimport InputBoxWrapper from \"../Common/FormComponents/InputBoxWrapper/InputBoxWrapper\";\nimport { setErrorSnackMessage, setSnackBarMessage } from \"../../../systemSlice\";\nimport { useAppDispatch } from \"../../../store\";\nimport { euTimezones } from \"./euTimezones\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...containerForHeader,\n  });\n\nconst reEmail =\n  // eslint-disable-next-line\n  /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\nconst SetEmailModal = ({ open, closeModal }: ISetEmailModalProps) => {\n  const dispatch = useAppDispatch();\n\n  const onError = (err: ErrorResponseHandler) => {\n    dispatch(setErrorSnackMessage(err));\n    closeModal();\n  };\n\n  const onSuccess = (res: any) => {\n    let msg = `Email ${email} has been saved`;\n    dispatch(setSnackBarMessage(msg));\n    closeModal();\n  };\n\n  const [isLoading, invokeApi] = useApi(onSuccess, onError);\n  const [email, setEmail] = useState<string>(\"\");\n  const [isEmailSet, setIsEmailSet] = useState<boolean>(false);\n\n  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let v = event.target.value;\n    setIsEmailSet(reEmail.test(v));\n    setEmail(v);\n  };\n\n  const onConfirm = () => {\n    const isInEU = isEU();\n    invokeApi(\"POST\", \"/api/v1/mp-integration\", { email, isInEU });\n  };\n\n  const isEU = () => {\n    const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;\n    return euTimezones.includes(tz.toLocaleLowerCase());\n  };\n\n  return open ? (\n    <ConfirmDialog\n      title={\"Register Email\"}\n      confirmText={\"Register\"}\n      isOpen={open}\n      titleIcon={<InfoIcon />}\n      isLoading={isLoading}\n      cancelText={\"Later\"}\n      onConfirm={onConfirm}\n      onClose={closeModal}\n      confirmButtonProps={{\n        color: \"info\",\n        disabled: !isEmailSet || isLoading,\n      }}\n      confirmationContent={\n        <Fragment>\n          <p>\n            Your Marketplace subscription includes support access from the\n            <a\n              href=\"https://min.io/product/subnet\"\n              target=\"_blank\"\n              rel=\"noopener\"\n            >\n              MinIO Subscription Network (SUBNET)\n            </a>\n            .\n            <br />\n            Enter your email to register now.\n          </p>\n          <p>\n            To register later, contact{\" \"}\n            <a href=\"mailto: support@min.io\">support@min.io</a>.\n          </p>\n          <InputBoxWrapper\n            id=\"set-mp-email\"\n            name=\"set-mp-email\"\n            onChange={handleInputChange}\n            label={\"\"}\n            placeholder=\"Enter email\"\n            type={\"email\"}\n            value={email}\n          />\n        </Fragment>\n      }\n    />\n  ) : null;\n};\n\nexport default withStyles(styles)(SetEmailModal);\n","// This file is part of MinIO Operator\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport SetEmailModal from \"./SetEmailModal\";\nimport PageLayout from \"../Common/Layout/PageLayout\";\nimport { selFeatures } from \"../consoleSlice\";\nimport { useSelector } from \"react-redux\";\nimport { Navigate, useNavigate } from \"react-router-dom\";\nimport { resourcesConfigurations } from \"../Tenants/AddTenant/Steps/TenantResources/utils\";\nimport { selShowMarketplace, showMarketplace } from \"../../../systemSlice\";\nimport { useAppDispatch } from \"../../../store\";\nimport PageHeaderWrapper from \"../Common/PageHeaderWrapper/PageHeaderWrapper\";\n\nconst Marketplace = () => {\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  const features = useSelector(selFeatures);\n  const displayMarketplace = useSelector(selShowMarketplace);\n  const [isMPMode, setMPMode] = useState<boolean>(true);\n\n  useEffect(() => {\n    let mpMode = false;\n    if (features && features.length !== 0) {\n      features.forEach((feature) => {\n        if (feature in resourcesConfigurations) {\n          mpMode = true;\n          return;\n        }\n      });\n    }\n    setMPMode(mpMode);\n  }, [features, displayMarketplace]);\n\n  const getTargetPath = () => {\n    let targetPath = \"/\";\n    if (\n      localStorage.getItem(\"redirect-path\") &&\n      localStorage.getItem(\"redirect-path\") !== \"\"\n    ) {\n      targetPath = `${localStorage.getItem(\"redirect-path\")}`;\n      localStorage.setItem(\"redirect-path\", \"\");\n    }\n    return targetPath;\n  };\n\n  const closeModal = () => {\n    dispatch(showMarketplace(false));\n    navigate(getTargetPath());\n  };\n\n  if (!displayMarketplace || !isMPMode) {\n    return <Navigate to={{ pathname: getTargetPath() }} />;\n  }\n\n  if (features) {\n    return (\n      <Fragment>\n        <PageHeaderWrapper label=\"Operator Marketplace\" />\n        <PageLayout>\n          <SetEmailModal open={true} closeModal={closeModal} />\n        </PageLayout>\n      </Fragment>\n    );\n  }\n  return null;\n};\n\nexport default Marketplace;\n"],"names":["useApi","onSuccess","onError","isLoading","setIsLoading","useState","callApi","method","url","data","headers","api","invoke","then","res","catch","err","euTimezones","reEmail","withStyles","theme","createStyles","containerForHeader","_ref","open","closeModal","dispatch","useAppDispatch","invokeApi","msg","concat","email","setSnackBarMessage","setErrorSnackMessage","setEmail","isEmailSet","setIsEmailSet","isEU","tz","Intl","DateTimeFormat","resolvedOptions","timeZone","includes","toLocaleLowerCase","_jsx","ConfirmDialog","title","confirmText","isOpen","titleIcon","InfoIcon","cancelText","onConfirm","isInEU","onClose","confirmButtonProps","color","disabled","confirmationContent","_jsxs","Fragment","children","href","target","rel","InputBoxWrapper","id","name","onChange","event","v","value","test","label","placeholder","type","Marketplace","navigate","useNavigate","features","useSelector","selFeatures","displayMarketplace","selShowMarketplace","isMPMode","setMPMode","useEffect","mpMode","length","forEach","feature","resourcesConfigurations","getTargetPath","targetPath","localStorage","getItem","setItem","showMarketplace","PageHeaderWrapper","PageLayout","SetEmailModal","Navigate","to","pathname"],"sourceRoot":""}