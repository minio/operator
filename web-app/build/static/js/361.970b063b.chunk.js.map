{"version":3,"file":"static/js/361.970b063b.chunk.js","mappings":"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","sources":["screens/LoginPage/LoginCallback.tsx"],"sourcesContent":["// This file is part of MinIO Operator\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { Box, Button, LoginWrapper, WarnIcon } from \"mds\";\nimport styled from \"styled-components\";\nimport get from \"lodash/get\";\nimport { useNavigate } from \"react-router-dom\";\nimport api from \"../../common/api\";\nimport { baseUrl } from \"../../history\";\nimport { getLogoVar } from \"../../config\";\n\nconst CallBackContainer = styled.div(({ theme }) => ({\n  \"& .errorDescription\": {\n    fontStyle: \"italic\",\n    transition: \"all .2s ease-in-out\",\n    padding: \"0 15px\",\n    marginTop: 5,\n    overflow: \"auto\",\n  },\n  \"& .errorLabel\": {\n    color: get(theme, \"fontColor\", \"#000\"),\n    fontSize: 18,\n    fontWeight: \"bold\",\n    marginLeft: 5,\n  },\n  \"& .simpleError\": {\n    marginTop: 5,\n    padding: \"2px 5px\",\n    fontSize: 16,\n    color: get(theme, \"fontColor\", \"#000\"),\n  },\n  \"& .messageIcon\": {\n    color: get(theme, \"signalColors.danger\", \"#C72C48\"),\n    display: \"flex\",\n    \"& svg\": {\n      width: 32,\n      height: 32,\n    },\n  },\n  \"& .errorTitle\": {\n    display: \"flex\",\n    alignItems: \"center\",\n    borderBottom: 15,\n  },\n}));\n\nconst LoginCallback = () => {\n  const navigate = useNavigate();\n\n  const [error, setError] = useState<string>(\"\");\n  const [errorDescription, setErrorDescription] = useState<string>(\"\");\n  const [loading, setLoading] = useState<boolean>(true);\n\n  useEffect(() => {\n    if (loading) {\n      const queryString = window.location.search;\n      const urlParams = new URLSearchParams(queryString);\n      const code = urlParams.get(\"code\");\n      const state = urlParams.get(\"state\");\n      const error = urlParams.get(\"error\");\n      const errorDescription = urlParams.get(\"errorDescription\");\n      if (error || errorDescription) {\n        setError(error || \"\");\n        setErrorDescription(errorDescription || \"\");\n        setLoading(false);\n      } else {\n        api\n          .invoke(\"POST\", \"/api/v1/login/oauth2/auth\", { code, state })\n          .then(() => {\n            // We push to history the new URL.\n            let targetPath = \"/\";\n            if (\n              localStorage.getItem(\"redirect-path\") &&\n              localStorage.getItem(\"redirect-path\") !== \"\"\n            ) {\n              targetPath = `${localStorage.getItem(\"redirect-path\")}`;\n              localStorage.setItem(\"redirect-path\", \"\");\n            }\n            if (state) {\n              localStorage.setItem(\"auth-state\", state);\n            }\n            setLoading(false);\n            navigate(targetPath);\n          })\n          .catch((error) => {\n            setError(error.errorMessage);\n            setErrorDescription(error.detailedError);\n            setLoading(false);\n          });\n      }\n    }\n  }, [loading, navigate]);\n  return error !== \"\" || errorDescription !== \"\" ? (\n    <Fragment>\n      <LoginWrapper\n        logoProps={{ applicationName: \"operator\", subVariant: getLogoVar() }}\n        form={\n          <CallBackContainer>\n            <div className={\"errorTitle\"}>\n              <span className={\"messageIcon\"}>\n                <WarnIcon />\n              </span>\n              <span className={\"errorLabel\"}>Error from IDP</span>\n            </div>\n            <div className={\"simpleError\"}>{error}</div>\n            <Box className={\"errorDescription\"}>{errorDescription}</Box>\n            <Button\n              id={\"back-to-login\"}\n              onClick={() => {\n                window.location.href = `${baseUrl}login`;\n              }}\n              type=\"submit\"\n              variant=\"callAction\"\n              fullWidth\n            >\n              Back to Login\n            </Button>\n          </CallBackContainer>\n        }\n        promoHeader={<Fragment>Multi-Cloud Object&nbsp;Store</Fragment>}\n        promoInfo={\n          <Fragment>\n            MinIO's high-performance, Kubernetes-native object store is licensed\n            under GNU AGPL v3 and is available on every cloud - public, private\n            and edge. For more information on the terms of the license or to\n            learn more about commercial licensing options visit the{\" \"}\n            <a href={\"https://min.io/pricing\"}>pricing page</a>.\n          </Fragment>\n        }\n        backgroundAnimation={false}\n      />\n    </Fragment>\n  ) : null;\n};\n\nexport default LoginCallback;\n"],"names":["CallBackContainer","styled","div","_ref","theme","fontStyle","transition","padding","marginTop","overflow","color","get","fontSize","fontWeight","marginLeft","display","width","height","alignItems","borderBottom","LoginCallback","navigate","useNavigate","error","setError","useState","errorDescription","setErrorDescription","loading","setLoading","useEffect","queryString","window","location","search","urlParams","URLSearchParams","code","state","api","invoke","then","targetPath","localStorage","getItem","concat","setItem","catch","errorMessage","detailedError","_jsx","Fragment","children","LoginWrapper","logoProps","applicationName","subVariant","getLogoVar","form","_jsxs","className","WarnIcon","Box","Button","id","onClick","href","baseUrl","type","variant","fullWidth","promoHeader","promoInfo","backgroundAnimation"],"sourceRoot":""}