"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[728],{6746:(e,s,n)=>{n.d(s,{A:()=>i});var a=n(5043),t=n(9923),l=n(579);const r=e=>{const{event:s}=e,[n,r]=a.useState(!1);return(0,l.jsxs)(a.Fragment,{children:[(0,l.jsxs)(t.Hjg,{sx:{cursor:"pointer"},children:[(0,l.jsx)(t.TlP,{scope:"row",onClick:()=>r(!n),sx:{borderBottom:0},children:s.event_type}),(0,l.jsx)(t.nA6,{onClick:()=>r(!n),sx:{borderBottom:0},children:s.reason}),(0,l.jsx)(t.nA6,{onClick:()=>r(!n),sx:{borderBottom:0},children:s.seen}),(0,l.jsx)(t.nA6,{onClick:()=>r(!n),sx:{borderBottom:0},children:s.message.length>=30?`${s.message.slice(0,30)}...`:s.message}),(0,l.jsx)(t.nA6,{onClick:()=>r(!n),sx:{borderBottom:0},children:n?(0,l.jsx)(t.FUY,{}):(0,l.jsx)(t.QpL,{})})]}),(0,l.jsx)(t.Hjg,{children:(0,l.jsx)(t.nA6,{style:{paddingBottom:0,paddingTop:0},colSpan:5,children:n&&(0,l.jsx)(t.azJ,{useBackground:!0,sx:{padding:10,marginBottom:10},children:s.message})})})]})},i=e=>{let{events:s,loading:n}=e;return n?(0,l.jsx)(t.z21,{}):(0,l.jsx)(t.azJ,{withBorders:!0,customBorderPadding:"0px",children:(0,l.jsxs)(t.XIK,{"aria-label":"collapsible table",children:[(0,l.jsx)(t.ndF,{children:(0,l.jsxs)(t.Hjg,{children:[(0,l.jsx)(t.nA6,{children:"Type"}),(0,l.jsx)(t.nA6,{children:"Reason"}),(0,l.jsx)(t.nA6,{children:"Age"}),(0,l.jsx)(t.nA6,{children:"Message"}),(0,l.jsx)(t.nA6,{})]})}),(0,l.jsx)(t.BFY,{children:s.map((e=>(0,l.jsx)(r,{event:e},`${e.event_type}-${e.seen}`)))})]})})}},3728:(e,s,n)=>{n.r(s),n.d(s,{default:()=>v});var a=n(5043),t=n(9923),l=n(3216),r=n(5475),i=n(4159),o=n(2961),c=n(6483),d=n(6746),m=n(649),x=n(579);const j={display:"grid",gridTemplateColumns:"2fr 1fr",gridAutoFlow:"row",gap:2,padding:15,[`@media (max-width: ${t.nmC.sm}px)`]:{gridTemplateColumns:"1fr",gridAutoFlow:"dense"}},p=e=>{let{title:s}=e;return(0,x.jsx)(t.azJ,{sx:{borderBottom:"1px solid #eaeaea",margin:0,marginBottom:"20px"},children:(0,x.jsx)("h3",{children:s})})},b=e=>{let{describeInfo:s}=e;return(0,x.jsx)(a.Fragment,{children:(0,x.jsxs)("div",{id:"pvc-describe-summary-content",children:[(0,x.jsx)(p,{title:"Summary"}),(0,x.jsxs)(t.azJ,{sx:{...j},children:[(0,x.jsx)(t.mZW,{label:"Name",value:s.name}),(0,x.jsx)(t.mZW,{label:"Namespace",value:s.namespace}),(0,x.jsx)(t.mZW,{label:"Capacity",value:s.capacity}),(0,x.jsx)(t.mZW,{label:"Status",value:s.status}),(0,x.jsx)(t.mZW,{label:"Storage Class",value:s.storageClass}),(0,x.jsx)(t.mZW,{label:"Access Modes",value:s.accessModes.join(", ")}),(0,x.jsx)(t.mZW,{label:"Finalizers",value:s.finalizers.join(", ")}),(0,x.jsx)(t.mZW,{label:"Volume",value:s.volume}),(0,x.jsx)(t.mZW,{label:"Volume Mode",value:s.volumeMode})]})]})})},u=e=>{let{annotations:s}=e;return(0,x.jsx)(a.Fragment,{children:(0,x.jsxs)("div",{id:"pvc-describe-annotations-content",children:[(0,x.jsx)(p,{title:"Annotations"}),(0,x.jsx)(t.azJ,{children:s.map(((e,s)=>(0,x.jsx)(t.vwO,{id:`${e.key}-${e.value}`,sx:{margin:"0.5%"},label:`${e.key}: ${e.value}`},s)))})]})})},h=e=>{let{labels:s}=e;return(0,x.jsx)(a.Fragment,{children:(0,x.jsxs)("div",{id:"pvc-describe-labels-content",children:[(0,x.jsx)(p,{title:"Labels"}),(0,x.jsx)(t.azJ,{children:s.map(((e,s)=>(0,x.jsx)(t.vwO,{id:`${e.key}-${e.value}`,sx:{margin:"0.5%"},label:`${e.key}: ${e.value}`},s)))})]})})},g=e=>{let{tenant:s,namespace:n,pvcName:l,propLoading:r}=e;const[c,d]=(0,a.useState)(),[j,p]=(0,a.useState)(!0),[g,v]=(0,a.useState)("pvc-describe-summary"),C=(0,o.jL)();return(0,a.useEffect)((()=>{r&&p(!0)}),[r]),(0,a.useEffect)((()=>{j&&m.A.invoke("GET",`/api/v1/namespaces/${n}/tenants/${s}/pvcs/${l}/describe`).then((e=>{d(e),p(!1)})).catch((e=>{C((0,i.C9)(e)),p(!1)}))}),[j,l,n,s,C]),(0,x.jsx)(a.Fragment,{children:c&&(0,x.jsx)(t.tUM,{currentTabOrPath:g,onTabClick:e=>{v(e)},options:[{tabConfig:{id:"pvc-describe-summary",label:"Summary"},content:(0,x.jsx)(b,{describeInfo:c})},{tabConfig:{id:"pvc-describe-annotations",label:"Annotations"},content:(0,x.jsx)(u,{annotations:c.annotations})},{tabConfig:{id:"pvc-describe-labels",label:"Labels"},content:(0,x.jsx)(h,{labels:c.labels})}],horizontal:!0,horizontalBarBackground:!1})})},v=()=>{const e=(0,o.jL)(),{tenantName:s,PVCName:n,tenantNamespace:j}=(0,l.g)(),[p,b]=(0,a.useState)("simple-tab-0"),[u,h]=(0,a.useState)(!0),[v,C]=(0,a.useState)([]);return(0,a.useEffect)((()=>{u&&m.A.invoke("GET",`/api/v1/namespaces/${j}/tenants/${s}/pvcs/${n}/events`).then((e=>{for(let s=0;s<e.length;s++){let n=Date.now()/1e3|0;e[s].seen=(0,c.hr)((n-e[s].last_seen).toString())}C(e),h(!1)})).catch((s=>{e((0,i.C9)(s)),h(!1)}))}),[u,n,j,s,e]),(0,x.jsxs)(a.Fragment,{children:[(0,x.jsxs)(t._xt,{separator:!0,sx:{marginBottom:15},children:[(0,x.jsx)(r.N_,{to:`/namespaces/${j}/tenants/${s}/volumes`,children:"PVCs"})," ","> ",n]}),(0,x.jsx)(t.tUM,{options:[{tabConfig:{id:"simple-tab-0",label:"Events"},content:(0,x.jsxs)(a.Fragment,{children:[(0,x.jsx)(t._xt,{separator:!0,sx:{marginBottom:15},children:"Events"}),(0,x.jsx)(d.A,{events:v,loading:u})]})},{tabConfig:{id:"simple-tab-1",label:"Describe"},content:(0,x.jsx)(g,{tenant:s||"",namespace:j||"",pvcName:n||"",propLoading:u})}],currentTabOrPath:p,onTabClick:e=>{b(e)},horizontal:!0})]})}}}]);
//# sourceMappingURL=728.77fbfb0e.chunk.js.map