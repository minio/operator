"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[577],{1577:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ae});var a=n(5043),r=n(3097),i=n.n(r),s=n(9923),l=n(9456),o=n(3216),c=n(3029),d=n(6537),u=n(4493),m=n(2961),p=n(4574),x=n(969),g=n(788),h=n(1938),y=n(579);const f=p.Ay.div((()=>({"& .configSectionItem":{marginRight:15,marginBottom:15},"& .containerItem":{marginRight:15},"& .responsiveSectionItem":{"&.doubleElement":{display:"flex","& div":{flexGrow:1}},"@media (max-width: 900px)":{flexFlow:"column",alignItems:"flex-start","& div > div":{marginBottom:5,marginRight:0}}},"& .wrapperContainer":{display:"flex",alignItems:"center"},"& .envVarRow":{display:"flex",alignItems:"center",justifyContent:"flex-start","&:last-child":{borderBottom:0},"@media (max-width: 900px)":{flex:1,"& div label":{minWidth:50}}},"& .fileItem":{marginRight:10,display:"flex","& div label":{minWidth:50},"@media (max-width: 900px)":{flexFlow:"column"}},"& .rowActions":{display:"flex",justifyContent:"flex-end","@media (max-width: 900px)":{flex:1}},"& .overlayAction":{marginLeft:10,marginBottom:15}}))),v=()=>{const e=(0,m.jL)(),t=(0,l.d4)((e=>e.createTenant.fields.configure.exposeMinIO)),n=(0,l.d4)((e=>e.createTenant.fields.configure.exposeConsole)),r=(0,l.d4)((e=>e.createTenant.fields.configure.exposeSFTP)),i=(0,l.d4)((e=>e.createTenant.fields.configure.setDomains)),o=(0,l.d4)((e=>e.createTenant.fields.configure.consoleDomain)),c=(0,l.d4)((e=>e.createTenant.fields.configure.minioDomains)),d=(0,l.d4)((e=>e.createTenant.fields.configure.tenantCustom)),p=(0,l.d4)((e=>e.createTenant.fields.configure.envVars)),v=(0,l.d4)((e=>e.createTenant.fields.configure.tenantSecurityContext)),j=(0,l.d4)((e=>e.createTenant.fields.configure.customRuntime)),C=(0,l.d4)((e=>e.createTenant.fields.configure.runtimeClassName)),[_,b]=(0,a.useState)({}),S=(0,a.useCallback)(((t,n)=>{e((0,u.rJ)({pageName:"configure",field:t,value:n}))}),[e]);(0,a.useEffect)((()=>{let t=[];if(d&&(t=[{fieldKey:"tenant_securityContext_runAsUser",required:!0,value:v.runAsUser,customValidation:""===v.runAsUser||parseInt(v.runAsUser)<0,customValidationMessage:"runAsUser must be present and be 0 or more"},{fieldKey:"tenant_securityContext_runAsGroup",required:!0,value:v.runAsGroup,customValidation:""===v.runAsGroup||parseInt(v.runAsGroup)<0,customValidationMessage:"runAsGroup must be present and be 0 or more"},{fieldKey:"tenant_securityContext_fsGroup",required:!0,value:v.fsGroup,customValidation:""===v.fsGroup||parseInt(v.fsGroup)<0,customValidationMessage:"fsGroup must be present and be 0 or more"}]),i){const e=c.map(((e,t)=>({fieldKey:"minio-domain-".concat(t.toString()),required:!1,value:e,pattern:/^(https?):\/\/([a-zA-Z0-9\-.]+)(:[0-9]+)?$/,customPatternMessage:"MinIO domain is not in the form of http|https://subdomain.domain"})));t=[...t,...e,{fieldKey:"console_domain",required:!1,value:o,pattern:/^(https?):\/\/([a-zA-Z0-9\-.]+)(:[0-9]+)?(\/[a-zA-Z0-9\-./]*)?$/,customPatternMessage:"Console domain is not in the form of http|https://subdomain.domain:port/subpath1/subpath2"}]}const n=(0,g.D)(t);e((0,u.qK)({pageName:"configure",valid:0===Object.keys(n).length})),b(n)}),[e,d,v,i,o,c]);const A=e=>{b((0,x.p)(_,e))};return(0,y.jsx)(f,{children:(0,y.jsxs)(s.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,y.jsxs)(s.azJ,{className:"inputItem",children:[(0,y.jsx)(h.A,{children:"Configure"}),(0,y.jsx)("span",{className:"muted",children:"Basic configurations for tenant management"})]}),(0,y.jsxs)(s.azJ,{className:"inputItem",children:[(0,y.jsx)("h4",{style:{margin:"10px 0px 0px"},children:"Services"}),(0,y.jsx)("span",{className:"muted",children:"Whether the tenant's services should request an external IP via LoadBalancer service type."})]}),(0,y.jsx)(s.dOG,{value:"expose_minio",id:"expose_minio",name:"expose_minio",checked:t,onChange:e=>{const t=e.target.checked;S("exposeMinIO",t)},label:"Expose MinIO Service"}),(0,y.jsx)(s.dOG,{value:"expose_console",id:"expose_console",name:"expose_console",checked:n,onChange:e=>{const t=e.target.checked;S("exposeConsole",t)},label:"Expose Console Service"}),(0,y.jsx)(s.dOG,{value:"expose_sftp",id:"expose_sftp",name:"expose_sftp",checked:r,onChange:e=>{const t=e.target.checked;S("exposeSFTP",t)},label:"Expose SFTP Service"}),(0,y.jsx)(s.dOG,{value:"custom_domains",id:"custom_domains",name:"custom_domains",checked:i,onChange:e=>{const t=e.target.checked;S("setDomains",t)},label:"Set Custom Domains"}),i&&(0,y.jsx)(s.xA9,{item:!0,xs:12,className:"inputItem",children:(0,y.jsxs)("fieldset",{children:[(0,y.jsx)("legend",{children:"Custom Domains for MinIO"}),(0,y.jsxs)(s.xA9,{item:!0,xs:12,className:"configSectionItem",children:[(0,y.jsx)(s.azJ,{className:"inputItem",children:(0,y.jsx)(s.cl_,{id:"console_domain",name:"console_domain",onChange:e=>{S("consoleDomain",e.target.value),A("tenant_securityContext_runAsUser")},label:"Console Domain",value:o,placeholder:"Eg. http://subdomain.domain:port/subpath1/subpath2",error:_.console_domain||""})}),(0,y.jsxs)(s.azJ,{children:[(0,y.jsx)("h4",{children:"MinIO Domains"}),(0,y.jsx)(s.azJ,{className:"responsiveSectionItem",children:c.map(((t,n)=>(0,y.jsxs)(s.azJ,{className:"containerItem wrapperContainer",children:[(0,y.jsx)(s.cl_,{id:"minio-domain-".concat(n.toString()),name:"minio-domain-".concat(n.toString()),onChange:e=>{((e,t)=>{const n=[...c];n[t]=e,S("minioDomains",n)})(e.target.value,n)},label:"MinIO Domain ".concat(n+1),value:t,placeholder:"Eg. http://subdomain.domain",error:_["minio-domain-".concat(n.toString())]||""}),(0,y.jsx)(s.azJ,{className:"overlayAction",children:(0,y.jsx)(s.K0,{size:"small",onClick:()=>e((0,u.ib)()),disabled:n!==c.length-1,children:(0,y.jsx)(s.REV,{})})}),(0,y.jsx)(s.azJ,{className:"overlayAction",children:(0,y.jsx)(s.K0,{size:"small",onClick:()=>e((0,u.hh)(n)),disabled:c.length<=1,children:(0,y.jsx)(s.YPx,{})})})]},"minio-domain-key-".concat(n.toString()))))})]})]})]})}),(0,y.jsx)(s.dOG,{value:"tenantConfig",id:"tenant_configuration",name:"tenant_configuration",checked:d,onChange:e=>{const t=e.target.checked;S("tenantCustom",t)},label:"Security Context"}),d&&(0,y.jsx)(s.xA9,{item:!0,xs:12,className:"inputItem",children:(0,y.jsxs)("fieldset",{children:[(0,y.jsx)("legend",{children:"Security Context for MinIO"}),(0,y.jsx)(s.xA9,{item:!0,xs:12,className:"configSectionItem",children:(0,y.jsxs)(s.azJ,{className:"responsiveSectionItem doubleElement",children:[(0,y.jsx)(s.azJ,{className:"containerItem",children:(0,y.jsx)(s.cl_,{type:"number",id:"tenant_securityContext_runAsUser",name:"tenant_securityContext_runAsUser",onChange:e=>{S("tenantSecurityContext",{...v,runAsUser:e.target.value}),A("tenant_securityContext_runAsUser")},label:"Run As User",value:v.runAsUser,required:!0,error:_.tenant_securityContext_runAsUser||"",min:"0"})}),(0,y.jsx)(s.azJ,{className:"containerItem",children:(0,y.jsx)(s.cl_,{type:"number",id:"tenant_securityContext_runAsGroup",name:"tenant_securityContext_runAsGroup",onChange:e=>{S("tenantSecurityContext",{...v,runAsGroup:e.target.value}),A("tenant_securityContext_runAsGroup")},label:"Run As Group",value:v.runAsGroup,required:!0,error:_.tenant_securityContext_runAsGroup||"",min:"0"})})]})}),(0,y.jsx)("br",{}),(0,y.jsx)(s.xA9,{item:!0,xs:12,className:"configSectionItem",children:(0,y.jsxs)(s.azJ,{className:"responsiveSectionItem doubleElement",children:[(0,y.jsx)(s.azJ,{className:"containerItem",children:(0,y.jsx)(s.cl_,{type:"number",id:"tenant_securityContext_fsGroup",name:"tenant_securityContext_fsGroup",onChange:e=>{S("tenantSecurityContext",{...v,fsGroup:e.target.value}),A("tenant_securityContext_fsGroup")},label:"FsGroup",value:v.fsGroup,required:!0,error:_.tenant_securityContext_fsGroup||"",min:"0"})}),(0,y.jsx)(s.azJ,{className:"containerItem",children:(0,y.jsx)(s.l6P,{label:"FsGroupChangePolicy",id:"securityContext_fsGroupChangePolicy",name:"securityContext_fsGroupChangePolicy",value:v.fsGroupChangePolicy,onChange:e=>{S("tenantSecurityContext",{...v,fsGroupChangePolicy:e})},options:[{label:"Always",value:"Always"},{label:"OnRootMismatch",value:"OnRootMismatch"}]})})]})}),(0,y.jsx)("br",{}),(0,y.jsx)(s.xA9,{item:!0,xs:12,className:"configSectionItem",children:(0,y.jsx)(s.dOG,{value:"tenantSecurityContextRunAsNonRoot",id:"tenant_securityContext_runAsNonRoot",name:"tenant_securityContext_runAsNonRoot",checked:v.runAsNonRoot,onChange:e=>{const t=e.target.checked;S("tenantSecurityContext",{...v,runAsNonRoot:t})},label:"Do not run as Root"})})]})}),(0,y.jsx)(s.dOG,{value:"customRuntime",id:"tenant_custom_runtime",name:"tenant_custom_runtime",checked:j,onChange:e=>{const t=e.target.checked;S("customRuntime",t)},label:"Custom Runtime Configurations"}),j&&(0,y.jsx)(s.xA9,{item:!0,xs:12,className:"inputItem",children:(0,y.jsxs)("fieldset",{children:[(0,y.jsx)("legend",{children:"Custom Runtime Configurations"}),(0,y.jsx)(s.cl_,{id:"tenant_runtime_runtimeClassName",name:"tenant_runtime_runtimeClassName",onChange:e=>{S("runtimeClassName",e.target.value),A("tenant_runtime_runtimeClassName")},label:"Runtime Class Name",value:C,error:_.tenant_runtime_runtimeClassName||""})]})}),(0,y.jsx)("hr",{}),(0,y.jsxs)(s.azJ,{className:"inputItem",children:[(0,y.jsx)(h.A,{children:"Additional Environment Variables"}),(0,y.jsx)("span",{className:"muted",children:"Define additional environment variables to be used by your MinIO pods"})]}),(0,y.jsx)(s.xA9,{container:!0,children:p.map(((t,n)=>(0,y.jsxs)(s.xA9,{item:!0,xs:12,className:"formFieldRow envVarRow",children:[(0,y.jsx)(s.xA9,{item:!0,xs:5,className:"fileItem",children:(0,y.jsx)(s.cl_,{id:"env_var_key",name:"env_var_key",label:"Key",value:t.key,onChange:t=>{const a=[...p];e((0,u.kb)(a.map(((e,a)=>a===n?{key:t.target.value,value:e.value}:e))))},index:n},"env_var_key_".concat(n.toString()))}),(0,y.jsx)(s.xA9,{item:!0,xs:5,className:"fileItem",children:(0,y.jsx)(s.cl_,{id:"env_var_value",name:"env_var_value",label:"Value",value:t.value,onChange:t=>{const a=[...p];e((0,u.kb)(a.map(((e,a)=>a===n?{key:e.key,value:t.target.value}:e))))},index:n},"env_var_value_".concat(n.toString()))}),(0,y.jsxs)(s.xA9,{item:!0,xs:2,className:"rowActions",children:[(0,y.jsx)(s.azJ,{className:"overlayAction",children:(0,y.jsx)(s.K0,{size:"small",onClick:()=>{const t=[...p];t.push({key:"",value:""}),e((0,u.kb)(t))},disabled:n!==p.length-1,children:(0,y.jsx)(s.REV,{})})}),(0,y.jsx)(s.azJ,{className:"overlayAction",children:(0,y.jsx)(s.K0,{size:"small",onClick:()=>{const t=p.filter(((e,t)=>t!==n));e((0,u.kb)(t))},disabled:p.length<=1,children:(0,y.jsx)(s.YPx,{})})})]})]},"tenant-envVar-".concat(n.toString()))))})]})})},j=()=>{const e=(0,m.jL)(),t=(0,l.d4)((e=>e.createTenant.fields.identityProvider.idpSelection)),n=(0,l.d4)((e=>e.createTenant.fields.identityProvider.ADURL)),r=(0,l.d4)((e=>e.createTenant.fields.identityProvider.ADSkipTLS)),i=(0,l.d4)((e=>e.createTenant.fields.identityProvider.ADServerInsecure)),o=(0,l.d4)((e=>e.createTenant.fields.identityProvider.ADGroupSearchBaseDN)),c=(0,l.d4)((e=>e.createTenant.fields.identityProvider.ADGroupSearchFilter)),d=(0,l.d4)((e=>e.createTenant.fields.identityProvider.ADUserDNs)),p=(0,l.d4)((e=>e.createTenant.fields.identityProvider.ADGroupDNs)),h=(0,l.d4)((e=>e.createTenant.fields.identityProvider.ADLookupBindDN)),f=(0,l.d4)((e=>e.createTenant.fields.identityProvider.ADLookupBindPassword)),v=(0,l.d4)((e=>e.createTenant.fields.identityProvider.ADUserDNSearchBaseDN)),j=(0,l.d4)((e=>e.createTenant.fields.identityProvider.ADUserDNSearchFilter)),C=(0,l.d4)((e=>e.createTenant.fields.identityProvider.ADServerStartTLS)),[_,b]=(0,a.useState)({}),S=(0,a.useCallback)(((t,n)=>{e((0,u.rJ)({pageName:"identityProvider",field:t,value:n}))}),[e]),A=e=>{b((0,x.p)(_,e))};return(0,a.useEffect)((()=>{let a=[];"AD"===t&&(a=[...a,{fieldKey:"AD_URL",required:!0,value:n},{fieldKey:"ad_lookupBindDN",required:!0,value:h}]);const r=(0,g.D)(a);e((0,u.qK)({pageName:"identityProvider",valid:0===Object.keys(r).length})),b(r)}),[h,t,n,o,c,d,p,e]),(0,y.jsxs)(s.Hbc,{withBorders:!1,containerPadding:!1,sx:{"& .adUserDnRows":{display:"flex"},"& .buttonTray":{display:"flex",gap:10,alignItems:"center",marginLeft:10,marginBottom:10}},children:[(0,y.jsx)(s.cl_,{id:"AD_URL",name:"AD_URL",onChange:e=>{S("ADURL",e.target.value),A("AD_URL")},label:"LDAP Server Address",value:n,placeholder:"ldap-server:636",error:_.AD_URL||"",required:!0}),(0,y.jsx)(s.dOG,{value:"ad_skipTLS",id:"ad_skipTLS",name:"ad_skipTLS",checked:r,onChange:e=>{const t=e.target.checked;S("ADSkipTLS",t)},label:"Skip TLS Verification"}),(0,y.jsx)(s.dOG,{value:"ad_serverInsecure",id:"ad_serverInsecure",name:"ad_serverInsecure",checked:i,onChange:e=>{const t=e.target.checked;S("ADServerInsecure",t)},label:"Server Insecure"}),i?(0,y.jsxs)(s.azJ,{className:"inputItem",children:[(0,y.jsx)("span",{className:"error",children:"Warning: All traffic with Active Directory will be unencrypted"}),(0,y.jsx)("br",{})]}):null,(0,y.jsx)(s.dOG,{value:"ad_serverStartTLS",id:"ad_serverStartTLS",name:"ad_serverStartTLS",checked:C,onChange:e=>{const t=e.target.checked;S("ADServerStartTLS",t)},label:"Start TLS connection to AD/LDAP server"}),(0,y.jsx)(s.cl_,{id:"ad_lookupBindDN",name:"ad_lookupBindDN",onChange:e=>{S("ADLookupBindDN",e.target.value),A("ad_lookupBindDN")},label:"Lookup Bind DN",value:h,placeholder:"cn=admin,dc=min,dc=io",error:_.ad_lookupBindDN||"",required:!0}),(0,y.jsx)(s.cl_,{id:"ad_lookupBindPassword",name:"ad_lookupBindPassword",onChange:e=>{S("ADLookupBindPassword",e.target.value)},label:"Lookup Bind Password",value:f,placeholder:"admin"}),(0,y.jsx)(s.cl_,{id:"ad_userDNSearchBaseDN",name:"ad_userDNSearchBaseDN",onChange:e=>{S("ADUserDNSearchBaseDN",e.target.value)},label:"User DN Search Base DN",value:v,placeholder:"dc=min,dc=io"}),(0,y.jsx)(s.cl_,{id:"ad_userDNSearchFilter",name:"ad_userDNSearchFilter",onChange:e=>{S("ADUserDNSearchFilter",e.target.value)},label:"User DN Search Filter",value:j,placeholder:"(sAMAcountName=%s)"}),(0,y.jsx)(s.cl_,{id:"ad_groupSearchBaseDN",name:"ad_groupSearchBaseDN",onChange:e=>{S("ADGroupSearchBaseDN",e.target.value)},label:"Group Search Base DN",value:o,placeholder:"ou=hwengg,dc=min,dc=io;ou=swengg,dc=min,dc=io"}),(0,y.jsx)(s.cl_,{id:"ad_groupSearchFilter",name:"ad_groupSearchFilter",onChange:e=>{S("ADGroupSearchFilter",e.target.value)},label:"Group Search Filter",value:c,placeholder:"(&(objectclass=groupOfNames)(member=%s))"}),(0,y.jsxs)("fieldset",{className:"inputItem",style:{marginTop:10},children:[(0,y.jsx)("legend",{children:"List of user DNs (Distinguished Names) to be Tenant Administrators"}),d.map(((t,n)=>(0,y.jsx)(a.Fragment,{children:(0,y.jsxs)(s.azJ,{className:"adUserDnRows",children:[(0,y.jsx)(s.cl_,{id:"ad-userdn-".concat(n.toString()),label:"",placeholder:"",name:"ad-userdn-".concat(n.toString()),value:d[n],onChange:t=>{e((0,u.UQ)({index:n,userDN:t.target.value})),A("ad-userdn-".concat(n.toString()))},index:n,error:_["ad-userdn-".concat(n.toString())]||""},"csv-ad-userdn-".concat(n.toString())),(0,y.jsxs)(s.azJ,{className:"buttonTray",children:[(0,y.jsx)(s.m_M,{tooltip:"Add User","aria-label":"add",children:(0,y.jsx)(s.K0,{size:"small",onClick:()=>{e((0,u.lJ)())},children:(0,y.jsx)(s.REV,{})})}),(0,y.jsx)(s.m_M,{tooltip:"Remove","aria-label":"add",children:(0,y.jsx)(s.K0,{size:"small",onClick:()=>{d.length>1&&e((0,u.Wi)(n))},children:(0,y.jsx)(s.YPx,{})})})]})]})},"identityField-".concat(n.toString()))))]}),(0,y.jsxs)("fieldset",{className:"inputItem",children:[(0,y.jsx)("legend",{children:"List of group DNs (Distinguished Names) to be Tenant Administrators"}),p.map(((t,n)=>(0,y.jsx)(a.Fragment,{children:(0,y.jsxs)(s.azJ,{className:"adUserDnRows",children:[(0,y.jsx)(s.cl_,{id:"ad-groupdn-".concat(n.toString()),label:"",placeholder:"",name:"ad-groupdn-".concat(n.toString()),value:p[n],onChange:t=>{e((0,u.lW)({index:n,userDN:t.target.value})),A("ad-groupdn-".concat(n.toString()))},index:n,error:_["ad-groupdn-".concat(n.toString())]||""},"csv-ad-groupdn-".concat(n.toString())),(0,y.jsxs)(s.azJ,{className:"buttonTray",children:[(0,y.jsx)(s.m_M,{tooltip:"Add Group","aria-label":"add",children:(0,y.jsx)(s.K0,{size:"small",onClick:()=>{e((0,u.Eh)())},children:(0,y.jsx)(s.REV,{})})}),(0,y.jsx)(s.m_M,{tooltip:"Remove","aria-label":"add",children:(0,y.jsx)(s.K0,{size:"small",onClick:()=>{p.length>1&&e((0,u.Vj)(n))},children:(0,y.jsx)(s.YPx,{})})})]})]})},"identityField-".concat(n.toString()))))]})]})},C=()=>{const e=(0,m.jL)(),t=(0,l.d4)((e=>e.createTenant.fields.identityProvider.idpSelection)),n=(0,l.d4)((e=>e.createTenant.fields.identityProvider.openIDConfigurationURL)),r=(0,l.d4)((e=>e.createTenant.fields.identityProvider.openIDClientID)),i=(0,l.d4)((e=>e.createTenant.fields.identityProvider.openIDSecretID)),o=(0,l.d4)((e=>e.createTenant.fields.identityProvider.openIDClaimName)),c=(0,l.d4)((e=>e.createTenant.fields.identityProvider.openIDScopes)),[d,p]=(0,a.useState)({}),h=(0,a.useCallback)(((t,n)=>{e((0,u.rJ)({pageName:"identityProvider",field:t,value:n}))}),[e]),f=e=>{p((0,x.p)(d,e))};return(0,a.useEffect)((()=>{let a=[];"OpenID"===t&&(a=[...a,{fieldKey:"openID_CONFIGURATION_URL",required:!0,value:n},{fieldKey:"openID_clientID",required:!0,value:r},{fieldKey:"openID_secretID",required:!0,value:i},{fieldKey:"openID_claimName",required:!1,value:o}]);const s=(0,g.D)(a);e((0,u.qK)({pageName:"identityProvider",valid:0===Object.keys(s).length})),p(s)}),[t,r,i,n,o,e]),(0,y.jsxs)(s.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,y.jsx)(s.cl_,{id:"openID_CONFIGURATION_URL",name:"openID_CONFIGURATION_URL",onChange:e=>{h("openIDConfigurationURL",e.target.value),f("openID_CONFIGURATION_URL")},label:"Configuration URL",value:n,placeholder:"https://your-identity-provider.com/.well-known/openid-configuration",error:d.openID_CONFIGURATION_URL||"",required:!0}),(0,y.jsx)(s.cl_,{id:"openID_clientID",name:"openID_clientID",onChange:e=>{h("openIDClientID",e.target.value),f("openID_clientID")},label:"Client ID",value:r,error:d.openID_clientID||"",required:!0}),(0,y.jsx)(s.cl_,{id:"openID_secretID",name:"openID_secretID",onChange:e=>{h("openIDSecretID",e.target.value),f("openID_secretID")},label:"Secret ID",value:i,error:d.openID_secretID||"",required:!0}),(0,y.jsx)(s.cl_,{id:"openID_claimName",name:"openID_claimName",onChange:e=>{h("openIDClaimName",e.target.value),f("openID_claimName")},label:"Claim Name",value:o,placeholder:"policy",error:d.openID_claimName||""}),(0,y.jsx)(s.cl_,{id:"openID_scopes",name:"openID_scopes",onChange:e=>{h("openIDScopes",e.target.value),f("openID_scopes")},label:"Scopes",value:c})]})},_=()=>{const e=(0,m.jL)(),t=(0,l.d4)((e=>e.createTenant.fields.identityProvider.idpSelection)),n=(0,l.d4)((e=>e.createTenant.fields.identityProvider.accessKeys)),r=(0,l.d4)((e=>e.createTenant.fields.identityProvider.secretKeys)),[i,o]=(0,a.useState)({}),c=e=>{o((0,x.p)(i,e))};return(0,a.useEffect)((()=>{let a=[];if("Built-in"===t){a=[...a];for(var i=0;i<n.length;i++)a.push({fieldKey:"accesskey-".concat(i.toString()),required:!0,value:n[i],pattern:/^[a-zA-Z0-9-]{8,63}$/,customPatternMessage:"Keys must be at least length 8"}),a.push({fieldKey:"secretkey-".concat(i.toString()),required:!0,value:r[i],pattern:/^[a-zA-Z0-9-]{8,63}$/,customPatternMessage:"Keys must be at least length 8"})}const s=(0,g.D)(a);e((0,u.qK)({pageName:"identityProvider",valid:0===Object.keys(s).length})),o(s)}),[t,n,r,e]),(0,y.jsxs)(a.Fragment,{children:["Add additional users",n.map(((t,l)=>(0,y.jsx)(a.Fragment,{children:(0,y.jsxs)(s.azJ,{sx:{gridTemplateColumns:"auto auto 50px 50px",display:"grid",gap:10,marginBottom:10},children:[(0,y.jsx)(s.cl_,{id:"accesskey-".concat(l.toString()),label:"",placeholder:"Access Key",name:"accesskey-".concat(l.toString()),value:n[l],onChange:t=>{e((0,u.p$)({index:l,accessKey:t.target.value})),c("accesskey-".concat(l.toString()))},index:l,error:i["accesskey-".concat(l.toString())]||""},"csv-accesskey-".concat(l.toString())),(0,y.jsx)(s.cl_,{id:"secretkey-".concat(l.toString()),label:"",placeholder:"Secret Key",name:"secretkey-".concat(l.toString()),value:r[l],onChange:t=>{e((0,u.cZ)({index:l,secretKey:t.target.value})),c("secretkey-".concat(l.toString()))},index:l,error:i["secretkey-".concat(l.toString())]||""},"csv-secretkey-".concat(l.toString())),(0,y.jsxs)(s.azJ,{sx:{display:"flex",alignItems:"center",gap:10,height:38},children:[(0,y.jsx)(s.K0,{size:"small",onClick:()=>{e((0,u.KJ)())},disabled:l!==n.length-1,children:(0,y.jsx)(s.REV,{})}),(0,y.jsx)(s.K0,{size:"small",onClick:()=>{e((0,u.Yq)(l))},disabled:n.length<=1,children:(0,y.jsx)(s.YPx,{})}),(0,y.jsx)(s.m_M,{tooltip:"Randomize Credentials","aria-label":"add",children:(0,y.jsx)(s.K0,{onClick:()=>{e((0,u.p$)({index:l,accessKey:(0,x.$)(16)})),e((0,u.cZ)({index:l,secretKey:(0,x.$)(16)}))},size:"small",children:(0,y.jsx)(s.Rru,{})})})]})]})},"identityField-".concat(l.toString()))))]})},b=()=>{const e=(0,m.jL)(),t=(0,l.d4)((e=>e.createTenant.fields.identityProvider.idpSelection));return(0,y.jsxs)(s.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,y.jsxs)(s.azJ,{className:"inputItem",children:[(0,y.jsx)(h.A,{children:"Identity Provider"}),(0,y.jsx)("span",{className:"muted",children:"Access to the tenant can be controlled via an external Identity Manager."})]}),(0,y.jsx)(s.xA9,{item:!0,xs:12,sx:{padding:10},children:(0,y.jsx)(s.z6M,{currentValue:t,id:"idp-options",name:"idp-options",label:"Protocol",onChange:t=>{e((0,u.YY)(t.target.value))},selectorOptions:[{label:"Built-in",value:"Built-in",icon:(0,y.jsx)(s.c2u,{})},{label:"Open ID",value:"OpenID",icon:(0,y.jsx)(s.Z4D,{})},{label:"LDAP / Active Directory",value:"AD",icon:(0,y.jsx)(s.Tp8,{})}]})}),"Built-in"===t&&(0,y.jsx)(_,{}),"OpenID"===t&&(0,y.jsx)(C,{}),"AD"===t&&(0,y.jsx)(j,{})]})};var S=n(3084);const A=p.Ay.div((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"flex-start",padding:8,borderBottom:"1px solid ".concat(i()(t,"borderColor","#E2E2E2")),"& .fileItem":{display:"flex","& .inputItem:not(:last-of-type)":{marginBottom:0},["@media (max-width: ".concat(s.nmC.md,"px)")]:{flexFlow:"column","& .inputItem:not(:last-of-type)":{marginBottom:10}}},"& .rowActions":{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:10,"@media (max-width: 900px)":{flex:1}}}})),k=()=>{const e=(0,m.jL)(),t=(0,l.d4)((e=>e.createTenant.fields.security.enableTLS)),n=(0,l.d4)((e=>e.createTenant.fields.security.enableAutoCert)),r=(0,l.d4)((e=>e.createTenant.fields.security.enableCustomCerts)),i=(0,l.d4)((e=>e.createTenant.certificates.minioServerCertificates)),o=(0,l.d4)((e=>e.createTenant.certificates.minioClientCertificates)),c=(0,l.d4)((e=>e.createTenant.certificates.minioCAsCertificates)),d=(0,a.useCallback)(((t,n)=>{e((0,u.rJ)({pageName:"security",field:t,value:n}))}),[e]);return(0,a.useEffect)((()=>{e(t?n||r?(0,u.qK)({pageName:"security",valid:!0}):(0,u.qK)({pageName:"security",valid:!1}):(0,u.qK)({pageName:"security",valid:!0}))}),[t,n,r,e]),(0,y.jsxs)(s.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,y.jsx)(s.azJ,{className:"inputItem",children:(0,y.jsx)(h.A,{children:"Security"})}),(0,y.jsx)(s.dOG,{value:"enableTLS",id:"enableTLS",name:"enableTLS",checked:t,onChange:e=>{const t=e.target.checked;d("enableTLS",t)},label:"TLS",description:"Securing all the traffic using TLS. This is required for Encryption Configuration"}),t&&(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)(s.dOG,{value:"enableAutoCert",id:"enableAutoCert",name:"enableAutoCert",checked:n,onChange:e=>{const t=e.target.checked;d("enableAutoCert",t)},label:"AutoCert",description:"The internode certificates will be generated and managed by MinIO Operator"}),(0,y.jsx)(s.dOG,{value:"enableCustomCerts",id:"enableCustomCerts",name:"enableCustomCerts",checked:r,onChange:e=>{const t=e.target.checked;d("enableCustomCerts",t)},label:"Custom Certificates",description:"Certificates used to terminated TLS at MinIO"}),r&&(0,y.jsxs)(a.Fragment,{children:[!n&&(0,y.jsx)(S.A,{}),(0,y.jsxs)("fieldset",{className:"inputItem",children:[(0,y.jsx)("legend",{children:"MinIO Server Certificates"}),i.map(((t,n)=>(0,y.jsxs)(A,{children:[(0,y.jsxs)(s.xA9,{item:!0,xs:10,className:"fileItem",children:[(0,y.jsx)(s.SxS,{onChange:(n,a,r)=>{r&&e((0,u.Ay)({id:t.id,key:"cert",fileName:a,value:r}))},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:t.cert,returnEncodedData:!0}),(0,y.jsx)(s.SxS,{onChange:(n,a,r)=>{r&&e((0,u.Ay)({id:t.id,key:"key",fileName:a,value:r}))},accept:".key,.pem",id:"tlsKey",name:"tlsKey",label:"Key",value:t.key,returnEncodedData:!0})]}),(0,y.jsxs)(s.xA9,{item:!0,xs:2,className:"rowActions",children:[(0,y.jsx)(s.K0,{size:"small",onClick:()=>{e((0,u.nI)())},disabled:n!==i.length-1,children:(0,y.jsx)(s.REV,{})}),(0,y.jsx)(s.K0,{size:"small",onClick:()=>{e((0,u.z9)(t.id))},disabled:i.length<=1,children:(0,y.jsx)(s.YPx,{})})]})]},"minio-certs-".concat(t.id))))]}),(0,y.jsxs)("fieldset",{className:"inputItem",children:[(0,y.jsx)("legend",{children:"MinIO Client Certificates"}),o.map(((t,n)=>(0,y.jsxs)(A,{children:[(0,y.jsxs)(s.xA9,{item:!0,xs:10,className:"fileItem",children:[(0,y.jsx)(s.SxS,{onChange:(n,a,r)=>{r&&e((0,u.ZJ)({id:t.id,key:"cert",fileName:a,value:r}))},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:t.cert,returnEncodedData:!0}),(0,y.jsx)(s.SxS,{onChange:(n,a,r)=>{r&&e((0,u.ZJ)({id:t.id,key:"key",fileName:a,value:r}))},accept:".key,.pem",id:"tlsKey",name:"tlsKey",label:"Key",value:t.key,returnEncodedData:!0})]}),(0,y.jsxs)(s.xA9,{item:!0,xs:2,className:"rowActions",children:[(0,y.jsx)(s.K0,{size:"small",onClick:()=>{e((0,u.Kx)())},disabled:n!==o.length-1,children:(0,y.jsx)(s.REV,{})}),(0,y.jsx)(s.K0,{size:"small",onClick:()=>{e((0,u.KK)(t.id))},disabled:o.length<=1,children:(0,y.jsx)(s.YPx,{})})]})]},"minio-certs-".concat(t.id))))]}),(0,y.jsxs)("fieldset",{className:"inputItem",children:[(0,y.jsx)("legend",{children:"MinIO CA Certificates"}),c.map(((t,n)=>(0,y.jsxs)(A,{children:[(0,y.jsx)(s.xA9,{item:!0,xs:6,className:"fileItem",children:(0,y.jsx)(s.SxS,{onChange:(n,a,r)=>{r&&e((0,u.HI)({id:t.id,key:"cert",fileName:a,value:r}))},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:t.cert,returnEncodedData:!0})}),(0,y.jsx)(s.xA9,{item:!0,xs:6,children:(0,y.jsxs)("div",{className:"rowActions",children:[(0,y.jsx)(s.K0,{size:"small",onClick:()=>{e((0,u.re)())},disabled:n!==c.length-1,children:(0,y.jsx)(s.REV,{})}),(0,y.jsx)(s.K0,{size:"small",onClick:()=>{e((0,u.xE)(t.id))},disabled:c.length<=1,children:(0,y.jsx)(s.YPx,{})})]})})]},"minio-CA-certs-".concat(t.id))))]})]})]})]})},T=()=>{const e=(0,m.jL)(),t=(0,l.d4)((e=>e.createTenant.fields.encryption.encryptionTab)),n=(0,l.d4)((e=>e.createTenant.fields.encryption.vaultEndpoint)),r=(0,l.d4)((e=>e.createTenant.fields.encryption.vaultEngine)),i=(0,l.d4)((e=>e.createTenant.fields.encryption.vaultNamespace)),o=(0,l.d4)((e=>e.createTenant.fields.encryption.vaultPrefix)),c=(0,l.d4)((e=>e.createTenant.fields.encryption.vaultAppRoleEngine)),d=(0,l.d4)((e=>e.createTenant.fields.encryption.vaultId)),p=(0,l.d4)((e=>e.createTenant.fields.encryption.vaultSecret)),h=(0,l.d4)((e=>e.createTenant.fields.encryption.vaultRetry)),f=(0,l.d4)((e=>e.createTenant.fields.encryption.vaultPing)),[v,j]=(0,a.useState)({});(0,a.useEffect)((()=>{let a=[];t||(a=[...a,{fieldKey:"vault_endpoint",required:!0,value:n},{fieldKey:"vault_id",required:!0,value:d},{fieldKey:"vault_secret",required:!0,value:p},{fieldKey:"vault_ping",required:!1,value:f,customValidation:parseInt(f)<0,customValidationMessage:"Value needs to be 0 or greater"},{fieldKey:"vault_retry",required:!1,value:h,customValidation:parseInt(h)<0,customValidationMessage:"Value needs to be 0 or greater"}]);const r=(0,g.D)(a);e((0,u.qK)({pageName:"encryption",valid:0===Object.keys(r).length})),j(r)}),[t,n,r,d,p,f,h,e]);const C=(0,a.useCallback)(((t,n)=>{e((0,u.rJ)({pageName:"encryption",field:t,value:n}))}),[e]),_=e=>{j((0,x.p)(v,e))};return(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)(s.cl_,{id:"vault_endpoint",name:"vault_endpoint",onChange:e=>{C("vaultEndpoint",e.target.value),_("vault_endpoint")},label:"Endpoint",tooltip:"Endpoint is the Hashicorp Vault endpoint",value:n,error:v.vault_endpoint||"",required:!0}),(0,y.jsx)(s.cl_,{id:"vault_engine",name:"vault_engine",onChange:e=>{C("vaultEngine",e.target.value),_("vault_engine")},label:"Engine",tooltip:"Engine is the Hashicorp Vault K/V engine path. If empty, defaults to 'kv'",value:r}),(0,y.jsx)(s.cl_,{id:"vault_namespace",name:"vault_namespace",onChange:e=>{C("vaultNamespace",e.target.value)},label:"Namespace",tooltip:"Namespace is an optional Hashicorp Vault namespace. An empty namespace means no particular namespace is used.",value:i}),(0,y.jsx)(s.cl_,{id:"vault_prefix",name:"vault_prefix",onChange:e=>{C("vaultPrefix",e.target.value)},label:"Prefix",tooltip:"Prefix is an optional prefix / directory within the K/V engine. If empty, keys will be stored at the K/V engine top level",value:o}),(0,y.jsxs)("fieldset",{className:"inputItem",children:[(0,y.jsx)("legend",{children:"App Role"}),(0,y.jsx)(s.cl_,{id:"vault_approle_engine",name:"vault_approle_engine",onChange:e=>{C("vaultAppRoleEngine",e.target.value)},label:"Engine",tooltip:"AppRoleEngine is the AppRole authentication engine path. If empty, defaults to 'approle'",value:c}),(0,y.jsx)(s.cl_,{id:"vault_id",name:"vault_id",onChange:e=>{C("vaultId",e.target.value),_("vault_id")},label:"AppRole ID",tooltip:"AppRoleSecret is the AppRole access secret for authenticating to Hashicorp Vault via the AppRole method",value:d,error:v.vault_id||"",required:!0}),(0,y.jsx)(s.cl_,{id:"vault_secret",name:"vault_secret",onChange:e=>{C("vaultSecret",e.target.value),_("vault_secret")},label:"AppRole Secret",tooltip:"AppRoleSecret is the AppRole access secret for authenticating to Hashicorp Vault via the AppRole method",value:p,error:v.vault_secret||"",required:!0}),(0,y.jsx)(s.cl_,{type:"number",min:"0",id:"vault_retry",name:"vault_retry",onChange:e=>{C("vaultRetry",e.target.value),_("vault_retry")},label:"Retry (Seconds)",value:h,error:v.vault_retry||""})]}),(0,y.jsxs)("fieldset",{className:"inputItem",children:[(0,y.jsx)("legend",{children:"Status"}),(0,y.jsx)(s.cl_,{type:"number",min:"0",id:"vault_ping",name:"vault_ping",onChange:e=>{C("vaultPing",e.target.value),_("vault_ping")},label:"Ping (Seconds)",value:f,error:v.vault_ping||""})]})]})},I=()=>{const e=(0,m.jL)(),t=(0,l.d4)((e=>e.createTenant.fields.encryption.encryptionTab)),n=(0,l.d4)((e=>e.createTenant.fields.encryption.azureEndpoint)),r=(0,l.d4)((e=>e.createTenant.fields.encryption.azureTenantID)),i=(0,l.d4)((e=>e.createTenant.fields.encryption.azureClientID)),o=(0,l.d4)((e=>e.createTenant.fields.encryption.azureClientSecret)),[c,d]=(0,a.useState)({});(0,a.useEffect)((()=>{let a=[];t||(a=[...a,{fieldKey:"azure_endpoint",required:!0,value:n},{fieldKey:"azure_tenant_id",required:!0,value:r},{fieldKey:"azure_client_id",required:!0,value:i},{fieldKey:"azure_client_secret",required:!0,value:o}]);const s=(0,g.D)(a);e((0,u.qK)({pageName:"encryption",valid:0===Object.keys(s).length})),d(s)}),[t,n,r,i,o,e]);const p=(0,a.useCallback)(((t,n)=>{e((0,u.rJ)({pageName:"encryption",field:t,value:n}))}),[e]),h=e=>{d((0,x.p)(c,e))};return(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)(s.cl_,{id:"azure_endpoint",name:"azure_endpoint",onChange:e=>{p("azureEndpoint",e.target.value),h("azure_endpoint")},label:"Endpoint",tooltip:"Endpoint is the Azure KeyVault endpoint",value:n,error:c.azure_endpoint||""}),(0,y.jsxs)("fieldset",{className:"inputItem",children:[(0,y.jsx)("legend",{children:"Credentials"}),(0,y.jsx)(s.cl_,{id:"azure_tenant_id",name:"azure_tenant_id",onChange:e=>{p("azureTenantID",e.target.value),h("azure_tenant_id")},label:"Tenant ID",tooltip:"TenantID is the ID of the Azure KeyVault tenant",value:r,error:c.azure_tenant_id||""}),(0,y.jsx)(s.cl_,{id:"azure_client_id",name:"azure_client_id",onChange:e=>{p("azureClientID",e.target.value),h("azure_client_id")},label:"Client ID",tooltip:"ClientID is the ID of the client accessing Azure KeyVault",value:i,error:c.azure_client_id||""}),(0,y.jsx)(s.cl_,{id:"azure_client_secret",name:"azure_client_secret",onChange:e=>{p("azureClientSecret",e.target.value),h("azure_client_secret")},label:"Client Secret",tooltip:"ClientSecret is the client secret accessing the Azure KeyVault",value:o,error:c.azure_client_secret||""})]})]})},N=()=>{const e=(0,m.jL)(),t=(0,l.d4)((e=>e.createTenant.fields.encryption.gcpProjectID)),n=(0,l.d4)((e=>e.createTenant.fields.encryption.gcpEndpoint)),r=(0,l.d4)((e=>e.createTenant.fields.encryption.gcpClientEmail)),i=(0,l.d4)((e=>e.createTenant.fields.encryption.gcpClientID)),o=(0,l.d4)((e=>e.createTenant.fields.encryption.gcpPrivateKeyID)),c=(0,l.d4)((e=>e.createTenant.fields.encryption.gcpPrivateKey)),d=(0,a.useCallback)(((t,n)=>{e((0,u.rJ)({pageName:"encryption",field:t,value:n}))}),[e]);return(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)(s.cl_,{id:"gcp_project_id",name:"gcp_project_id",onChange:e=>{d("gcpProjectID",e.target.value)},label:"Project ID",tooltip:"ProjectID is the GCP project ID.",value:t}),(0,y.jsx)(s.cl_,{id:"gcp_endpoint",name:"gcp_endpoint",onChange:e=>{d("gcpEndpoint",e.target.value)},label:"Endpoint",tooltip:"Endpoint is the GCP project ID. If empty defaults to: secretmanager.googleapis.com:443",value:n}),(0,y.jsxs)("fieldset",{className:"inputItem",children:[(0,y.jsx)("legend",{children:"Credentials"}),(0,y.jsx)(s.cl_,{id:"gcp_client_email",name:"gcp_client_email",onChange:e=>{d("gcpClientEmail",e.target.value)},label:"Client Email",tooltip:"Is the Client email of the GCP service account used to access the SecretManager",value:r}),(0,y.jsx)(s.cl_,{id:"gcp_client_id",name:"gcp_client_id",onChange:e=>{d("gcpClientID",e.target.value)},label:"Client ID",tooltip:"Is the Client ID of the GCP service account used to access the SecretManager",value:i}),(0,y.jsx)(s.cl_,{id:"gcp_private_key_id",name:"gcp_private_key_id",onChange:e=>{d("gcpPrivateKeyID",e.target.value)},label:"Private Key ID",tooltip:"Is the private key ID of the GCP service account used to access the SecretManager",value:o}),(0,y.jsx)(s.cl_,{id:"gcp_private_key",name:"gcp_private_key",onChange:e=>{d("gcpPrivateKey",e.target.value)},label:"Private Key",tooltip:"Is the private key of the GCP service account used to access the SecretManager",value:c})]})]})},D=()=>{const e=(0,m.jL)(),t=(0,l.d4)((e=>e.createTenant.fields.encryption.encryptionTab)),n=(0,l.d4)((e=>e.createTenant.fields.encryption.gemaltoEndpoint)),r=(0,l.d4)((e=>e.createTenant.fields.encryption.gemaltoToken)),i=(0,l.d4)((e=>e.createTenant.fields.encryption.gemaltoDomain)),o=(0,l.d4)((e=>e.createTenant.fields.encryption.gemaltoRetry)),[c,d]=(0,a.useState)({});(0,a.useEffect)((()=>{let a=[];t||(a=[...a,{fieldKey:"gemalto_endpoint",required:!0,value:n},{fieldKey:"gemalto_token",required:!0,value:r},{fieldKey:"gemalto_domain",required:!0,value:i},{fieldKey:"gemalto_retry",required:!1,value:o,customValidation:parseInt(o)<0,customValidationMessage:"Value needs to be 0 or greater"}]);const s=(0,g.D)(a);e((0,u.qK)({pageName:"encryption",valid:0===Object.keys(s).length})),d(s)}),[t,n,r,i,o,e]);const p=(0,a.useCallback)(((t,n)=>{e((0,u.rJ)({pageName:"encryption",field:t,value:n}))}),[e]),h=e=>{d((0,x.p)(c,e))};return(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)(s.cl_,{id:"gemalto_endpoint",name:"gemalto_endpoint",onChange:e=>{p("gemaltoEndpoint",e.target.value),h("gemalto_endpoint")},label:"Endpoint",tooltip:"Endpoint is the endpoint to the KeySecure server",value:n,error:c.gemalto_endpoint||"",required:!0}),(0,y.jsxs)("fieldset",{className:"inputItem",children:[(0,y.jsx)("legend",{children:"Credentials"}),(0,y.jsx)(s.cl_,{id:"gemalto_token",name:"gemalto_token",onChange:e=>{p("gemaltoToken",e.target.value),h("gemalto_token")},label:"Token",tooltip:"Token is the refresh authentication token to access the KeySecure server",value:r,error:c.gemalto_token||"",required:!0}),(0,y.jsx)(s.cl_,{id:"gemalto_domain",name:"gemalto_domain",onChange:e=>{p("gemaltoDomain",e.target.value),h("gemalto_domain")},label:"Domain",tooltip:"Domain is the isolated namespace within the KeySecure server. If empty, defaults to the top-level / root domain",value:i,error:c.gemalto_domain||"",required:!0}),(0,y.jsx)(s.cl_,{type:"number",min:"0",id:"gemalto_retry",name:"gemalto_retry",onChange:e=>{p("gemaltoRetry",e.target.value),h("gemalto_retry")},label:"Retry (seconds)",value:o,error:c.gemalto_retry||""})]})]})},K=()=>{const e=(0,m.jL)(),t=(0,l.d4)((e=>e.createTenant.fields.encryption.encryptionTab)),n=(0,l.d4)((e=>e.createTenant.fields.encryption.awsEndpoint)),r=(0,l.d4)((e=>e.createTenant.fields.encryption.awsRegion)),i=(0,l.d4)((e=>e.createTenant.fields.encryption.awsKMSKey)),o=(0,l.d4)((e=>e.createTenant.fields.encryption.awsAccessKey)),c=(0,l.d4)((e=>e.createTenant.fields.encryption.awsSecretKey)),d=(0,l.d4)((e=>e.createTenant.fields.encryption.awsToken)),[p,h]=(0,a.useState)({});(0,a.useEffect)((()=>{let a=[];t||(a=[...a,{fieldKey:"aws_endpoint",required:!0,value:n},{fieldKey:"aws_region",required:!0,value:r},{fieldKey:"aws_accessKey",required:!0,value:o},{fieldKey:"aws_secretKey",required:!0,value:c}]);const i=(0,g.D)(a);e((0,u.qK)({pageName:"encryption",valid:0===Object.keys(i).length})),h(i)}),[t,n,r,c,o,e]);const f=(0,a.useCallback)(((t,n)=>{e((0,u.rJ)({pageName:"encryption",field:t,value:n}))}),[e]),v=e=>{h((0,x.p)(p,e))};return(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)(s.cl_,{id:"aws_endpoint",name:"aws_endpoint",onChange:e=>{f("awsEndpoint",e.target.value),v("aws_endpoint")},label:"Endpoint",tooltip:"Endpoint is the AWS SecretsManager endpoint. AWS SecretsManager endpoints have the following schema: secrestmanager[-fips].<region>.amanzonaws.com",value:n,error:p.aws_endpoint||"",required:!0}),(0,y.jsx)(s.cl_,{id:"aws_region",name:"aws_region",onChange:e=>{f("awsRegion",e.target.value),v("aws_region")},label:"Region",tooltip:"Region is the AWS region the SecretsManager is located",value:r,error:p.aws_region||"",required:!0}),(0,y.jsx)(s.cl_,{id:"aws_kmsKey",name:"aws_kmsKey",onChange:e=>{f("awsKMSKey",e.target.value)},label:"KMS Key",tooltip:"KMSKey is the AWS-KMS key ID (CMK-ID) used to en/decrypt secrets managed by the SecretsManager. If empty, the default AWS KMS key is used",value:i}),(0,y.jsxs)("fieldset",{className:"inputItem",children:[(0,y.jsx)("legend",{children:"Credentials"}),(0,y.jsx)(s.cl_,{id:"aws_accessKey",name:"aws_accessKey",onChange:e=>{f("awsAccessKey",e.target.value),v("aws_accessKey")},label:"Access Key",tooltip:"AccessKey is the access key for authenticating to AWS",value:o,error:p.aws_accessKey||"",required:!0}),(0,y.jsx)(s.cl_,{id:"aws_secretKey",name:"aws_secretKey",onChange:e=>{f("awsSecretKey",e.target.value),v("aws_secretKey")},label:"Secret Key",tooltip:"SecretKey is the secret key for authenticating to AWS",value:c,error:p.aws_secretKey||"",required:!0}),(0,y.jsx)(s.cl_,{id:"aws_token",name:"aws_token",tooltip:"SessionToken is an optional session token for authenticating to AWS when using STS",onChange:e=>{f("awsToken",e.target.value)},label:"Token",value:d})]})]})},w=()=>{const e=(0,m.jL)(),t=(0,l.d4)((e=>e.createTenant.fields.encryption.replicas)),n=(0,l.d4)((e=>e.createTenant.fields.encryption.rawConfiguration)),r=(0,l.d4)((e=>e.createTenant.fields.encryption.encryptionTab)),i=(0,l.d4)((e=>e.createTenant.fields.encryption.enableEncryption)),o=(0,l.d4)((e=>e.createTenant.fields.encryption.encryptionType)),c=(0,l.d4)((e=>e.createTenant.fields.encryption.gcpProjectID)),d=(0,l.d4)((e=>e.createTenant.fields.encryption.gcpEndpoint)),p=(0,l.d4)((e=>e.createTenant.fields.encryption.gcpClientEmail)),f=(0,l.d4)((e=>e.createTenant.fields.encryption.gcpClientID)),v=(0,l.d4)((e=>e.createTenant.fields.encryption.gcpPrivateKeyID)),j=(0,l.d4)((e=>e.createTenant.fields.encryption.gcpPrivateKey)),C=(0,l.d4)((e=>e.createTenant.fields.encryption.enableCustomCertsForKES)),_=(0,l.d4)((e=>e.createTenant.fields.security.enableAutoCert)),b=(0,l.d4)((e=>e.createTenant.fields.security.enableTLS)),S=(0,l.d4)((e=>e.createTenant.certificates.minioServerCertificates)),A=(0,l.d4)((e=>e.createTenant.certificates.kesServerCertificate)),k=(0,l.d4)((e=>e.createTenant.certificates.minioMTLSCertificate)),w=(0,l.d4)((e=>e.createTenant.certificates.kmsMTLSCertificate)),z=(0,l.d4)((e=>e.createTenant.certificates.kmsCA)),P=(0,l.d4)((e=>e.createTenant.fields.security.enableCustomCerts)),E=(0,l.d4)((e=>e.createTenant.fields.encryption.kesSecurityContext)),[R,G]=(0,a.useState)({});let q=!1;b&&(_||S&&S.filter((e=>e.encoded_key&&e.encoded_cert)).length>0)&&(q=!0);const O=(0,a.useCallback)(((t,n)=>{e((0,u.rJ)({pageName:"encryption",field:t,value:n}))}),[e]),L=e=>{G((0,x.p)(R,e))};return(0,a.useEffect)((()=>{let a=[];i&&(a=[{fieldKey:"rawConfiguration",required:"kms-raw-configuration"===r,value:n},{fieldKey:"replicas",required:!0,value:t,customValidation:parseInt(t)<1,customValidationMessage:"Replicas needs to be 1 or greater"},{fieldKey:"kes_securityContext_runAsUser",required:!0,value:E.runAsUser,customValidation:""===E.runAsUser||parseInt(E.runAsUser)<0,customValidationMessage:"runAsUser must be present and be 0 or more"},{fieldKey:"kes_securityContext_runAsGroup",required:!0,value:E.runAsGroup,customValidation:""===E.runAsGroup||parseInt(E.runAsGroup)<0,customValidationMessage:"runAsGroup must be present and be 0 or more"},{fieldKey:"kes_securityContext_fsGroup",required:!0,value:E.fsGroup,customValidation:""===E.fsGroup||parseInt(E.fsGroup)<0,customValidationMessage:"fsGroup must be present and be 0 or more"}],P&&(a=[...a,{fieldKey:"serverKey",required:!_,value:A.encoded_key},{fieldKey:"serverCert",required:!_,value:A.encoded_cert},{fieldKey:"clientKey",required:!_,value:k.encoded_key},{fieldKey:"clientCert",required:!_,value:k.encoded_cert}]));const s=(0,g.D)(a);e((0,u.qK)({pageName:"encryption",valid:0===Object.keys(s).length})),G(s)}),[n,r,i,o,c,d,p,f,v,j,e,_,P,A.encoded_key,A.encoded_cert,k.encoded_key,k.encoded_cert,E,t]),(0,y.jsxs)(s.Hbc,{withBorders:!1,containerPadding:!1,sx:{"& .tabs-container":{height:"inherit"},"& .rightSpacer":{marginRight:15},"& .responsiveContainer":{"@media (max-width: 900px)":{display:"flex",flexFlow:"column"}},"& .multiContainer":{display:"flex",alignItems:"center",justifyContent:"flex-start"}},children:[(0,y.jsxs)(s.azJ,{className:"inputItem",sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,y.jsx)(h.A,{children:"Encryption"}),(0,y.jsx)(s.dOG,{label:"",indicatorLabels:["Enabled","Disabled"],checked:i,value:"tenant_encryption",id:"tenant-encryption",name:"tenant-encryption",onChange:e=>{const t=e.target.checked;O("enableEncryption",t)},description:"",disabled:!q})]}),(0,y.jsx)(s.azJ,{className:"muted inputItem",children:"MinIO Server-Side Encryption (SSE) protects objects as part of write operations, allowing clients to take advantage of server processing power to secure objects at the storage layer (encryption-at-rest). SSE also provides key functionality to regulatory and compliance requirements around secure locking and erasure."}),(0,y.jsx)("hr",{}),i&&(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)(s.tUM,{horizontal:!0,currentTabOrPath:r,onTabClick:e=>{O("encryptionTab",e)},sx:{height:"initial"},options:[{tabConfig:{label:"Options",id:"kms-options"},content:(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)(s.z6M,{currentValue:o,id:"encryptionType",name:"encryptionType",label:"KMS",onChange:e=>{O("encryptionType",e.target.value)},selectorOptions:[{label:"Vault",value:"vault"},{label:"AWS",value:"aws"},{label:"Gemalto",value:"gemalto"},{label:"GCP",value:"gcp"},{label:"Azure",value:"azure"}]}),"vault"===o&&(0,y.jsx)(T,{}),"azure"===o&&(0,y.jsx)(I,{}),"gcp"===o&&(0,y.jsx)(N,{}),"aws"===o&&(0,y.jsx)(K,{}),"gemalto"===o&&(0,y.jsx)(D,{})]})},{tabConfig:{label:"Raw Edit",id:"kms-raw-configuration"},content:(0,y.jsx)(a.Fragment,{children:(0,y.jsx)(s.xA9,{item:!0,xs:12,children:(0,y.jsx)(s.BYM,{value:n,mode:"yaml",onChange:e=>{O("rawConfiguration",e)},editorHeight:"550px"})})})}]}),(0,y.jsx)(s.kCK,{label:"Additional Configurations",sx:{margin:"0px 0px 10px"}}),(0,y.jsx)(s.dOG,{value:"enableCustomCertsForKES",id:"enableCustomCertsForKES",name:"enableCustomCertsForKES",checked:C||!_,onChange:e=>{const t=e.target.checked;O("enableCustomCertsForKES",t)},label:"Custom Certificates",disabled:!_}),(C||!_)&&(0,y.jsxs)(a.Fragment,{children:[(0,y.jsxs)("fieldset",{className:"inputItem",children:[(0,y.jsx)("legend",{children:"Encryption server certificates"}),(0,y.jsx)(s.SxS,{onChange:(t,n,a)=>{a&&(e((0,u.g8)({key:"key",fileName:n,value:a})),L("serverKey"))},accept:".key,.pem",id:"serverKey",name:"serverKey",label:"Key",error:R.serverKey||"",value:A.key,required:!_,returnEncodedData:!0}),(0,y.jsx)(s.SxS,{onChange:(t,n,a)=>{a&&(e((0,u.g8)({key:"cert",fileName:n,value:a})),L("serverCert"))},accept:".cer,.crt,.cert,.pem",id:"serverCert",name:"serverCert",label:"Cert",error:R.serverCert||"",value:A.cert,required:!_,returnEncodedData:!0})]}),(0,y.jsxs)("fieldset",{className:"inputItem",children:[(0,y.jsx)("legend",{children:"MinIO mTLS certificates (connection between MinIO and the Encryption server)"}),(0,y.jsx)(s.SxS,{onChange:(t,n,a)=>{a&&(e((0,u.oN)({key:"key",fileName:n,value:a})),L("clientKey"))},accept:".key,.pem",id:"clientKey",name:"clientKey",label:"Key",error:R.clientKey||"",value:k.key,required:!_,returnEncodedData:!0}),(0,y.jsx)(s.SxS,{onChange:(t,n,a)=>{a&&(e((0,u.oN)({key:"cert",fileName:n,value:a})),L("clientCert"))},accept:".cer,.crt,.cert,.pem",id:"clientCert",name:"clientCert",label:"Cert",error:R.clientCert||"",value:k.cert,required:!_,returnEncodedData:!0})]}),(0,y.jsxs)("fieldset",{className:"inputItem",children:[(0,y.jsx)("legend",{children:"KMS mTLS certificates (connection between the Encryption server and the KMS)"}),(0,y.jsx)(s.SxS,{onChange:(t,n,a)=>{a&&(e((0,u.vz)({key:"key",fileName:n,value:a})),L("vault_key"))},accept:".key,.pem",id:"vault_key",name:"vault_key",label:"Key",value:w.key,returnEncodedData:!0}),(0,y.jsx)(s.SxS,{onChange:(t,n,a)=>{a&&(e((0,u.vz)({key:"cert",fileName:n,value:a})),L("vault_cert"))},accept:".cer,.crt,.cert,.pem",id:"vault_cert",name:"vault_cert",label:"Cert",value:w.cert,returnEncodedData:!0}),(0,y.jsx)(s.SxS,{onChange:(t,n,a)=>{a&&(e((0,u.$U)({fileName:n,value:a})),L("vault_ca"))},accept:".cer,.crt,.cert,.pem",id:"vault_ca",name:"vault_ca",label:"CA",value:z.cert,returnEncodedData:!0})]})]}),(0,y.jsx)(s.cl_,{type:"number",min:"1",id:"replicas",name:"replicas",onChange:e=>{O("replicas",e.target.value),L("replicas")},label:"Replicas",value:t,required:!0,error:R.replicas||"",sx:{marginBottom:10}}),(0,y.jsxs)("fieldset",{className:"inputItem",children:[(0,y.jsx)("legend",{children:"SecurityContext for KES pods"}),(0,y.jsx)(s.xA9,{item:!0,xs:12,children:(0,y.jsxs)("div",{className:"multiContainer responsiveContainer",children:[(0,y.jsx)("div",{className:"rightSpacer",children:(0,y.jsx)(s.cl_,{type:"number",id:"kes_securityContext_runAsUser",name:"kes_securityContext_runAsUser",onChange:e=>{O("kesSecurityContext",{...E,runAsUser:e.target.value}),L("kes_securityContext_runAsUser")},label:"Run As User",value:E.runAsUser,required:!0,error:R.kes_securityContext_runAsUser||"",min:"0"})}),(0,y.jsx)("div",{className:"rightSpacer",children:(0,y.jsx)(s.cl_,{type:"number",id:"kes_securityContext_runAsGroup",name:"kes_securityContext_runAsGroup",onChange:e=>{O("kesSecurityContext",{...E,runAsGroup:e.target.value}),L("kes_securityContext_runAsGroup")},label:"Run As Group",value:E.runAsGroup,required:!0,error:R.kes_securityContext_runAsGroup||"",min:"0"})})]})}),(0,y.jsx)("br",{}),(0,y.jsx)(s.xA9,{item:!0,xs:12,children:(0,y.jsxs)("div",{className:"multiContainer responsiveContainer",children:[(0,y.jsx)("div",{className:"rightSpacer",children:(0,y.jsx)(s.cl_,{type:"number",id:"kes_securityContext_fsGroup",name:"kes_securityContext_fsGroup",onChange:e=>{O("kesSecurityContext",{...E,fsGroup:e.target.value}),L("kes_securityContext_fsGroup")},label:"FsGroup",value:E.fsGroup,required:!0,error:R.kes_securityContext_fsGroup||"",min:"0"})}),(0,y.jsx)("div",{className:"rightSpacer",children:(0,y.jsx)(s.l6P,{label:"FsGroupChangePolicy",id:"securityContext_fsGroupChangePolicy",name:"securityContext_fsGroupChangePolicy",value:E.fsGroupChangePolicy,onChange:e=>{O("kesSecurityContext",{...E,fsGroupChangePolicy:e})},options:[{label:"Always",value:"Always"},{label:"OnRootMismatch",value:"OnRootMismatch"}]})})]})}),(0,y.jsx)("br",{}),(0,y.jsx)(s.dOG,{value:"kesSecurityContextRunAsNonRoot",id:"kes_securityContext_runAsNonRoot",name:"kes_securityContext_runAsNonRoot",checked:E.runAsNonRoot,onChange:e=>{const t=e.target.checked;O("kesSecurityContext",{...E,runAsNonRoot:t})},label:"Do not run as Root"})]})]})]})};var z=n(4159),P=n(649),E=n(8997);const R=p.Ay.div((()=>({"& .overlayAction":{marginLeft:10,display:"flex",alignItems:"center"},"& .affinityConfigField":{display:"flex"},"& .affinityFieldLabel":{display:"flex",flexFlow:"column",flex:1},"& .affinityLabelKey":{"& div:first-child":{marginBottom:0}},"& .affinityLabelValue":{marginLeft:10,"& div:first-child":{marginBottom:0}},"& .rowActions":{display:"flex",alignItems:"center"},"& .affinityRow":{marginBottom:10,display:"flex"}}))),G=()=>{const e=(0,m.jL)(),t=(0,l.d4)((e=>e.createTenant.fields.affinity.podAffinity)),n=(0,l.d4)((e=>e.createTenant.fields.affinity.nodeSelectorLabels)),r=(0,l.d4)((e=>e.createTenant.fields.affinity.withPodAntiAffinity)),i=(0,l.d4)((e=>e.createTenant.nodeSelectorPairs)),o=(0,l.d4)((e=>e.createTenant.tolerations)),[c,d]=(0,a.useState)({}),[p,x]=(0,a.useState)(!0),[f,v]=(0,a.useState)({}),[j,C]=(0,a.useState)([]),_=(0,a.useCallback)(((t,n)=>{e((0,u.rJ)({pageName:"affinity",field:t,value:n}))}),[e]);(0,a.useEffect)((()=>{p&&P.A.invoke("GET","/api/v1/nodes/labels").then((e=>{x(!1),v(e);let t=[];for(let n in e)t.push({label:n,value:n});C(t)})).catch((t=>{x(!1),e((0,z.Dy)(t)),v({})}))}),[e,p]),(0,a.useEffect)((()=>{if(i){const e=i.filter((e=>""!==e.key)).map((e=>"".concat(e.key,"=").concat(e.value))).filter(((e,t,n)=>n.indexOf(e)===t)).join("&");_("nodeSelectorLabels",e)}}),[i,_]),(0,a.useEffect)((()=>{let a=[];if("nodeSelector"===t){let e=!0;const t=n.split("&");1===t.length&&""===t[0]&&(e=!1),t.forEach(((n,a)=>{const r=n.split("=");2!==r.length&&(e=!1),a+1!==t.length&&(""!==r[0]&&""!==r[1]||(e=!1))})),a=[...a,{fieldKey:"labels",required:!0,value:n,customValidation:!e,customValidationMessage:"You need to add at least one label key-pair"}]}const r=(0,g.D)(a);e((0,u.qK)({pageName:"affinity",valid:0===Object.keys(r).length})),d(r)}),[e,t,n]);const b=(t,n,a)=>{const r={...o[t],[n]:a};e((0,u.Um)({index:t,tolerationValue:r}))};return(0,y.jsx)(R,{children:(0,y.jsxs)(s.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,y.jsxs)(s.azJ,{className:"inputItem",children:[(0,y.jsx)(h.A,{children:"Pod Placement"}),(0,y.jsx)("span",{className:"muted",children:"Configure how pods will be assigned to nodes"})]}),(0,y.jsx)(s.azJ,{children:(0,y.jsx)(s.l1Y,{children:"Type"})}),(0,y.jsx)(s.azJ,{className:"muted inputItem",children:"MinIO supports multiple configurations for Pod Affinity"}),(0,y.jsx)(s.z6M,{currentValue:t,id:"affinity-options",name:"affinity-options",label:" ",onChange:e=>{_("podAffinity",e.target.value)},selectorOptions:[{label:"None",value:"none"},{label:"Default (Pod Anti-Affinity)",value:"default"},{label:"Node Selector",value:"nodeSelector"}],displayInColumn:!0}),"nodeSelector"===t&&(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)(s.dOG,{value:"with_pod_anti_affinity",id:"with_pod_anti_affinity",name:"with_pod_anti_affinity",checked:r,onChange:e=>{const t=e.target.checked;_("withPodAntiAffinity",t)},label:"With Pod Anti-Affinity"}),(0,y.jsxs)(s.azJ,{className:"inputBox",children:[(0,y.jsx)("h3",{children:"Labels"}),(0,y.jsx)("span",{className:"error",children:c.labels}),(0,y.jsx)(s.xA9,{container:!0,children:i&&i.map(((t,n)=>(0,y.jsxs)(s.xA9,{item:!0,xs:12,className:"affinityRow",children:[(0,y.jsxs)(s.xA9,{item:!0,xs:5,className:"affinityLabelKey",children:[j.length>0&&(0,y.jsx)(s.l6P,{onChange:t=>{const a={key:t,value:f[t][0]},r=[...i];r[n]=a,e((0,u.EZ)(r))},id:"select-access-policy",name:"select-access-policy",label:"",value:t.key,options:j}),0===j.length&&(0,y.jsx)(s.cl_,{id:"nodeselector-key-".concat(n.toString()),label:"",name:"nodeselector-".concat(n.toString()),value:t.key,onChange:t=>{const a=[...i];a[n]={key:a[n].key,value:t.target.value},e((0,u.EZ)(a))},index:n,placeholder:"Key"})]}),(0,y.jsxs)(s.xA9,{item:!0,xs:5,className:"affinityLabelValue",children:[j.length>0&&(0,y.jsx)(s.l6P,{onChange:t=>{const a=[...i];a[n]={key:a[n].key,value:t},e((0,u.EZ)(a))},id:"select-access-policy",name:"select-access-policy",label:"",value:t.value,options:f[t.key]?f[t.key].map((e=>({label:e,value:e}))):[]}),0===j.length&&(0,y.jsx)(s.cl_,{id:"nodeselector-value-".concat(n.toString()),label:"",name:"nodeselector-".concat(n.toString()),value:t.value,onChange:t=>{const a=[...i];a[n]={key:a[n].key,value:t.target.value},e((0,u.EZ)(a))},index:n,placeholder:"value"})]}),(0,y.jsxs)(s.xA9,{item:!0,xs:2,className:"rowActions",children:[(0,y.jsx)(s.azJ,{className:"overlayAction",children:(0,y.jsx)(s.K0,{size:"small",onClick:()=>{const t=[...i];j.length>0?t.push({key:j[0].value,value:f[j[0].value][0]}):t.push({key:"",value:""}),e((0,u.EZ)(t))},disabled:n!==i.length-1,children:(0,y.jsx)(s.REV,{})})}),(0,y.jsx)(s.azJ,{className:"overlayAction",children:(0,y.jsx)(s.K0,{size:"small",onClick:()=>{const t=i.filter(((e,t)=>t!==n));e((0,u.EZ)(t))},disabled:i.length<=1,children:(0,y.jsx)(s.YPx,{})})})]})]},"affinity-keyVal-".concat(n.toString()))))})]})]}),(0,y.jsx)(s.xA9,{item:!0,xs:12,className:"affinityConfigField",children:(0,y.jsxs)(s.xA9,{item:!0,className:"affinityFieldLabel",children:[(0,y.jsx)("h3",{children:"Tolerations"}),(0,y.jsx)("span",{className:"error",children:c.tolerations}),(0,y.jsx)(s.xA9,{container:!0,children:o&&o.map(((t,n)=>{var a;return(0,y.jsxs)(s.xA9,{item:!0,xs:12,className:"affinityRow",children:[(0,y.jsx)(E.A,{effect:t.effect,onEffectChange:e=>{b(n,"effect",e)},tolerationKey:t.key,onTolerationKeyChange:e=>{b(n,"key",e)},operator:t.operator,onOperatorChange:e=>{b(n,"operator",e)},value:t.value,onValueChange:e=>{b(n,"value",e)},tolerationSeconds:(null===(a=t.tolerationSeconds)||void 0===a?void 0:a.seconds)||0,onSecondsChange:e=>{b(n,"tolerationSeconds",{seconds:e})},index:n}),(0,y.jsx)(s.azJ,{className:"overlayAction",children:(0,y.jsx)(s.K0,{size:"small",onClick:()=>{e((0,u.LI)())},disabled:n!==o.length-1,children:(0,y.jsx)(s.REV,{})})}),(0,y.jsx)(s.azJ,{className:"overlayAction",children:(0,y.jsx)(s.K0,{size:"small",onClick:()=>e((0,u.Ap)(n)),disabled:o.length<=1,children:(0,y.jsx)(s.YPx,{})})})]},"affinity-keyVal-".concat(n.toString()))}))})]})})]})})},q=()=>{const e=(0,m.jL)(),t=(0,l.d4)((e=>e.createTenant.fields.configure.customImage)),n=(0,l.d4)((e=>e.createTenant.fields.configure.imageName)),r=(0,l.d4)((e=>e.createTenant.fields.configure.customDockerhub)),i=(0,l.d4)((e=>e.createTenant.fields.configure.imageRegistry)),o=(0,l.d4)((e=>e.createTenant.fields.configure.imageRegistryUsername)),c=(0,l.d4)((e=>e.createTenant.fields.configure.imageRegistryPassword)),d=(0,l.d4)((e=>e.createTenant.fields.configure.tenantCustom)),p=(0,l.d4)((e=>e.createTenant.fields.configure.kesImage)),[f,v]=(0,a.useState)({}),j=(0,a.useCallback)(((t,n)=>{e((0,u.rJ)({pageName:"configure",field:t,value:n}))}),[e]);(0,a.useEffect)((()=>{let a=[];t&&(a=[...a,{fieldKey:"image",required:!1,value:n,pattern:/^((.*?)\/(.*?):(.+))$/,customPatternMessage:"Format must be of form: 'minio/minio:VERSION'"},{fieldKey:"kesImage",required:!1,value:p,pattern:/^((.*?)\/(.*?):(.+))$/,customPatternMessage:"Format must be of form: 'minio/kes:VERSION'"}],r&&(a=[...a,{fieldKey:"registry",required:!0,value:i},{fieldKey:"registryUsername",required:!0,value:o},{fieldKey:"registryPassword",required:!0,value:c}]));const s=(0,g.D)(a);e((0,u.qK)({pageName:"configure",valid:0===Object.keys(s).length})),v(s)}),[t,n,p,r,i,o,c,e,d]);const C=e=>{v((0,x.p)(f,e))};return(0,y.jsxs)(s.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,y.jsxs)(s.azJ,{className:"inputItem",children:[(0,y.jsx)(h.A,{children:"Container Images"}),(0,y.jsx)("span",{className:"muted",children:"Specify the container images used by the Tenant and its features."})]}),(0,y.jsx)(s.cl_,{id:"image",name:"image",onChange:e=>{j("imageName",e.target.value),C("image")},label:"MinIO",value:n,error:f.image||"",placeholder:"minio/minio:RELEASE.2024-03-15T01-07-19Z"}),(0,y.jsx)(s.cl_,{id:"kesImage",name:"kesImage",onChange:e=>{j("kesImage",e.target.value),C("kesImage")},label:"KES",value:p,error:f.kesImage||"",placeholder:"minio/kes:2024-03-13T17-52-13Z"}),t&&(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)(s.azJ,{className:"inputItem",children:(0,y.jsx)("h4",{children:"Custom Container Registry"})}),(0,y.jsx)(s.dOG,{value:"custom_docker_hub",id:"custom_docker_hub",name:"custom_docker_hub",checked:r,onChange:e=>{const t=e.target.checked;j("customDockerhub",t)},label:"Use a private container registry"})]}),r&&(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)(s.cl_,{id:"registry",name:"registry",onChange:e=>{j("imageRegistry",e.target.value)},label:"Endpoint",value:i,error:f.registry||"",placeholder:"https://index.docker.io/v1/",required:!0}),(0,y.jsx)(s.cl_,{id:"registryUsername",name:"registryUsername",onChange:e=>{j("imageRegistryUsername",e.target.value)},label:"Username",value:o,error:f.registryUsername||"",required:!0}),(0,y.jsx)(s.cl_,{id:"registryPassword",name:"registryPassword",onChange:e=>{j("imageRegistryPassword",e.target.value)},label:"Password",value:c,error:f.registryPassword||"",required:!0})]})]})};var O=n(6483);const L=()=>{const e=(0,l.d4)((e=>e.createTenant.fields.tenantSize.nodes)),t=(0,l.d4)((e=>e.createTenant.fields.tenantSize.resourcesMemoryRequest)),n=(0,l.d4)((e=>e.createTenant.fields.tenantSize.ecParity)),r=(0,l.d4)((e=>e.createTenant.fields.tenantSize.distribution)),i=(0,l.d4)((e=>e.createTenant.fields.tenantSize.ecParityCalc)),o=(0,l.d4)((e=>e.createTenant.fields.tenantSize.resourcesCPURequest)),c=(0,l.d4)((e=>e.createTenant.fields.tenantSize.integrationSelection)),d=i.storageFactors.find((e=>e.erasureCode===n));return(0,y.jsxs)(s.azJ,{sx:{margin:4,"& table":{fontSize:13,"& td":{padding:8}}},children:[(0,y.jsx)(s.kCK,{label:"Resource Allocation",sx:{margin:4,padding:"5px 0"}}),(0,y.jsx)(s.XIK,{children:(0,y.jsxs)(s.BFY,{children:[(0,y.jsxs)(s.Hjg,{children:[(0,y.jsx)(s.nA6,{scope:"row",children:"Number of Servers"}),(0,y.jsx)(s.nA6,{sx:{textAlign:"right"},children:parseInt(e)>0?e:"-"})]}),""===c.typeSelection&&""===c.storageClass&&(0,y.jsxs)(a.Fragment,{children:[(0,y.jsxs)(s.Hjg,{children:[(0,y.jsx)(s.nA6,{scope:"row",children:"Drives per Server"}),(0,y.jsx)(s.nA6,{sx:{textAlign:"right"},children:r?r.disks:"-"})]}),(0,y.jsxs)(s.Hjg,{children:[(0,y.jsx)(s.nA6,{scope:"row",children:"Drive Capacity"}),(0,y.jsx)(s.nA6,{sx:{textAlign:"right"},children:r?(0,O.nO)(r.pvSize):"-"})]})]}),(0,y.jsxs)(s.Hjg,{children:[(0,y.jsx)(s.nA6,{scope:"row",children:"Total Volumes"}),(0,y.jsx)(s.nA6,{sx:{textAlign:"right"},children:r?r.persistentVolumes:"-"})]}),""===c.typeSelection&&""===c.storageClass&&(0,y.jsxs)(a.Fragment,{children:[(0,y.jsxs)(s.Hjg,{children:[(0,y.jsx)(s.nA6,{scope:"row",children:"Memory per Node"}),(0,y.jsxs)(s.nA6,{sx:{textAlign:"right"},children:[t," Gi"]})]}),(0,y.jsxs)(s.Hjg,{children:[(0,y.jsx)(s.nA6,{style:{borderBottom:0},scope:"row",children:"CPU Selection"}),(0,y.jsx)(s.nA6,{style:{borderBottom:0},sx:{textAlign:"right"},children:o})]})]})]})}),0===i.error&&d&&(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)(s.kCK,{label:"Erasure Code Configuration",sx:{margin:4,padding:"5px 0"}}),(0,y.jsx)(s.XIK,{children:(0,y.jsxs)(s.BFY,{children:[(0,y.jsxs)(s.Hjg,{children:[(0,y.jsx)(s.nA6,{scope:"row",children:"EC Parity"}),(0,y.jsx)(s.nA6,{sx:{textAlign:"right"},children:""!==n?n:"-"})]}),(0,y.jsxs)(s.Hjg,{children:[(0,y.jsx)(s.nA6,{scope:"row",children:"Raw Capacity"}),(0,y.jsx)(s.nA6,{sx:{textAlign:"right"},children:(0,O.nO)(i.rawCapacity)})]}),(0,y.jsxs)(s.Hjg,{children:[(0,y.jsx)(s.nA6,{scope:"row",children:"Usable Capacity"}),(0,y.jsx)(s.nA6,{sx:{textAlign:"right"},children:n===O.Fd?(0,O.nO)(i.rawCapacity):(0,O.nO)(d.maxCapacity)})]}),(0,y.jsxs)(s.Hjg,{children:[(0,y.jsx)(s.nA6,{style:{borderBottom:0},scope:"row",children:"Server Failures Tolerated"}),(0,y.jsx)(s.nA6,{style:{borderBottom:0},sx:{textAlign:"right"},children:n===O.Fd?0:r&&r.disks>0&&d.maxFailureTolerations?Math.floor(d.maxFailureTolerations/r.disks):"-"})]})]})})]}),""!==c.typeSelection&&""!==c.storageClass&&(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)(s.kCK,{label:"Single Instance Configuration",sx:{margin:4,padding:"5px 0"}}),(0,y.jsx)(s.XIK,{children:(0,y.jsxs)(s.BFY,{children:[(0,y.jsxs)(s.Hjg,{children:[(0,y.jsx)(s.nA6,{scope:"row",children:"CPU"}),(0,y.jsx)(s.nA6,{sx:{textAlign:"right"},children:0!==c.CPU?c.CPU:"-"})]}),(0,y.jsxs)(s.Hjg,{children:[(0,y.jsx)(s.nA6,{scope:"row",children:"Memory"}),(0,y.jsx)(s.nA6,{sx:{textAlign:"right"},children:0!==c.memory?"".concat(c.memory," Gi"):"-"})]}),(0,y.jsxs)(s.Hjg,{children:[(0,y.jsx)(s.nA6,{scope:"row",children:"Drives per Server"}),(0,y.jsx)(s.nA6,{sx:{textAlign:"right"},children:0!==c.drivesPerServer?"".concat(c.drivesPerServer):"-"})]}),(0,y.jsxs)(s.Hjg,{children:[(0,y.jsx)(s.nA6,{style:{borderBottom:0},scope:"row",children:"Drive Size"}),(0,y.jsxs)(s.nA6,{style:{borderBottom:0},sx:{textAlign:"right"},children:[c.driveSize.driveSize,c.driveSize.sizeUnit]})]})]})})]})]})};var M=n(3811),F=n(3950),U=n.n(F),B=n(5034),V=n(8661);const J=()=>{const e=(0,m.jL)(),t=(0,l.d4)((e=>e.createTenant.fields.nameTenant.namespace)),n=(0,l.d4)((e=>e.createTenant.addNSLoading)),r=(0,l.d4)((e=>e.createTenant.addNSOpen));return(0,y.jsx)(V.A,{title:"New namespace",confirmText:"Create",confirmButtonProps:{variant:"callAction"},isOpen:r,titleIcon:(0,y.jsx)(s.$rg,{}),isLoading:n,onConfirm:()=>{e((0,B.CC)())},onClose:()=>{e((0,u.e7)())},confirmationContent:(0,y.jsxs)(a.Fragment,{children:[n&&(0,y.jsx)(s.z21,{}),"Are you sure you want to add a namespace called",(0,y.jsx)("br",{}),(0,y.jsx)("b",{style:{maxWidth:"200px",whiteSpace:"normal",wordWrap:"break-word"},children:t}),"?"]})})},H=e=>{let{formToRender:t}=e;const n=(0,m.jL)(),r=(0,l.d4)((e=>e.createTenant.fields.nameTenant.namespace)),i=(0,l.d4)((e=>e.createTenant.showNSCreateButton)),o=(0,l.d4)((e=>e.createTenant.validationErrors.namespace)),c=(0,l.d4)((e=>e.createTenant.addNSOpen)),d=(0,a.useMemo)((()=>U()((()=>{n((0,B.kE)())}),500)),[n]);(0,a.useEffect)((()=>{if(""!==r)return d(),d.cancel}),[d,r]);return(0,y.jsxs)(a.Fragment,{children:[c&&(0,y.jsx)(J,{}),(0,y.jsx)(s.cl_,{id:"namespace",name:"namespace",onChange:e=>{n((0,u.KH)(e.target.value))},label:"Namespace",value:r,error:o||"",overlayIcon:i?(0,y.jsx)(s.REV,{}):null,overlayAction:()=>{n((0,u.uq)())},required:!0})]})},Y=()=>{const e=(0,m.jL)(),t=(0,l.d4)((e=>e.createTenant.fields.nameTenant.tenantName)),n=(0,l.d4)((e=>e.createTenant.validationErrors["tenant-name"]));return(0,y.jsx)(s.cl_,{id:"tenant-name",name:"tenant-name",onChange:t=>{e((0,u.s1)(t.target.value))},label:"Name",value:t,required:!0,error:n||""})},Z=e=>{let{formToRender:t}=e;const n=(0,m.jL)(),r=(0,l.d4)((e=>e.createTenant.fields.nameTenant.selectedStorageClass)),o=(0,l.d4)((e=>e.createTenant.fields.nameTenant.selectedStorageType)),p=(0,l.d4)((e=>e.createTenant.storageClasses)),x=(0,l.d4)(d.s$),g=(0,a.useCallback)(((e,t)=>{n((0,u.rJ)({pageName:"nameTenant",field:e,value:t}))}),[n]);return(0,a.useEffect)((()=>{const e=t===c.oD.default&&p.length>0||t!==c.oD.default&&""!==o;n((0,u.qK)({pageName:"nameTenant",valid:e}))}),[p,n,o,t]),(0,y.jsx)(a.Fragment,{children:(0,y.jsxs)(s.xA9,{container:!0,sx:{justifyContent:"space-between"},children:[(0,y.jsx)(s.xA9,{item:!0,sx:{width:"calc(100% - 320px)"},children:(0,y.jsx)(s.azJ,{sx:{minHeight:550},children:(0,y.jsxs)(s.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,y.jsxs)(s.azJ,{className:"inputItem",children:[(0,y.jsx)(h.A,{children:"Name"}),(0,y.jsx)("span",{className:"muted",children:"How would you like to name this new tenant?"})]}),(0,y.jsx)(Y,{}),(0,y.jsx)(H,{formToRender:t}),t===c.oD.default?(0,y.jsx)(s.l6P,{id:"storage_class",name:"storage_class",onChange:e=>{g("selectedStorageClass",e)},label:"Storage Class",value:r,options:p,disabled:p.length<1}):(0,y.jsx)(s.l6P,{id:"storage_type",name:"storage_type",onChange:e=>{n((0,u.a0)({storageType:e,features:x}))},label:i()(c.m3,"".concat(t,".variantSelectorLabel"),"Storage Type"),value:o,options:i()(c.m3,"".concat(t,".variantSelectorValues"),[])}),t===c.oD.default?(0,y.jsx)(M.A,{}):i()(c.m3,"".concat(t,".sizingComponent"),null)]})})}),(0,y.jsx)(s.xA9,{item:!0,xs:"hidden",sm:"hidden",children:(0,y.jsx)(s.azJ,{sx:{marginLeft:10,padding:2,marginTop:20},withBorders:!0,useBackground:!0,children:(0,y.jsx)(L,{})})})]})})},W=()=>{const e=(0,l.d4)(d.s$),[t,n]=(0,a.useState)(null);return(0,a.useEffect)((()=>{let t=c.oD.default;if(e&&0!==e.length){Object.keys(c.h2).forEach((n=>{e.includes(n)&&(t=i()(c.h2,n,c.oD.default))}))}n(t)}),[e]),null===t?null:(0,y.jsx)(Z,{formToRender:t})},$=["nameTenant","tenantSize","configure","affinity","identityProvider","security","encryption"];var X=n(286);const Q=()=>{const e=(0,m.jL)(),t=(0,l.d4)((e=>e.createTenant.addingTenant)),n=(0,l.d4)((e=>e.createTenant.validPages)),a=(0,l.d4)((e=>e.createTenant.fields.nameTenant.selectedStorageClass)),r=!t&&""!==a&&$.every((e=>n.includes(e)));return(0,y.jsx)(s.$nd,{id:"wizard-button-Create",variant:"callAction",color:"primary",onClick:()=>{e((0,X.J)())},disabled:!r,label:"Create"},"button-AddTenant-Create")};var ee=n(8619);const te=()=>{const e=(0,m.jL)(),t=(0,o.Zp)(),n=(0,l.d4)((e=>e.createTenant.showNewCredentials)),r=(0,l.d4)((e=>e.createTenant.createdAccount));return(0,y.jsx)(a.Fragment,{children:n&&(0,y.jsx)(ee.default,{newServiceAccount:r,open:n,closeModal:()=>{e((0,u.vH)()),t("/tenants")},entity:"Tenant"})})};var ne=n(4770);const ae=()=>{const e=(0,m.jL)(),t=(0,o.Zp)(),n=(0,l.d4)(d.s$),r=(0,l.d4)((e=>e.createTenant.addingTenant)),[p,x]=(0,a.useState)(null);(0,a.useEffect)((()=>{let e=c.oD.default;if(n&&0!==n.length){Object.keys(c.h2).forEach((t=>{n.includes(t)&&(e=i()(c.h2,t,c.oD.default))}))}x(e)}),[n]);const g={label:"Cancel",type:"custom",enabled:!0,action:()=>{e((0,u.vH)()),t("/tenants")}},h={componentRender:(0,y.jsx)(Q,{},"create-tenant")},f=[{label:"Setup",componentRender:(0,y.jsx)(W,{}),buttons:[g,h]},{label:"Configure",advancedOnly:!0,componentRender:(0,y.jsx)(v,{}),buttons:[g,h]},{label:"Images",advancedOnly:!0,componentRender:(0,y.jsx)(q,{}),buttons:[g,h]},{label:"Pod Placement",advancedOnly:!0,componentRender:(0,y.jsx)(G,{}),buttons:[g,h]},{label:"Identity Provider",advancedOnly:!0,componentRender:(0,y.jsx)(b,{}),buttons:[g,h]},{label:"Security",advancedOnly:!0,componentRender:(0,y.jsx)(k,{}),buttons:[g,h]},{label:"Encryption",advancedOnly:!0,componentRender:(0,y.jsx)(w,{}),buttons:[g,h]}];return(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)(te,{}),(0,y.jsx)(ne.A,{label:(0,y.jsx)(s.EGL,{onClick:()=>{e((0,u.vH)()),t("/tenants")},label:"Tenants"})}),(0,y.jsxs)(s.Mxu,{variant:"constrained",children:[r&&(0,y.jsx)(s.xA9,{item:!0,xs:12,children:(0,y.jsx)(s.z21,{})}),(0,y.jsx)(s.azJ,{withBorders:!0,customBorderPadding:"0px",sx:{"& .muted":{fontSize:13}},children:(0,y.jsx)(s.sQ4,{wizardSteps:f,linearMode:!1})}),p===c.oD.aws&&(0,y.jsx)(s.xA9,{item:!0,xs:12,style:{marginTop:16},children:(0,y.jsx)(s.lVp,{title:"EBS Volume Configuration.",iconComponent:(0,y.jsx)(s.NBP,{}),help:(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)("b",{children:"Performance Optimized"}),": Uses the ",(0,y.jsx)("i",{children:"gp3"})," EBS storage class class configured at 1,000Mi/s throughput and 16,000 IOPS, however the minimum volume size for this type of EBS volume is ",(0,y.jsx)("b",{children:"32Gi"}),".",(0,y.jsx)("br",{}),(0,y.jsx)("br",{}),(0,y.jsx)("b",{children:"Storage Optimized"}),": Uses the ",(0,y.jsx)("i",{children:"sc1"})," EBS storage class, however the minimum volume size for this type of EBS volume is \xa0",(0,y.jsx)("b",{children:"16Ti"})," to unlock their maximum throughput speed of 250Mi/s."]})})})]})]})}},3084:(e,t,n)=>{n.d(t,{A:()=>o});n(5043);var a=n(9456),r=n(9923),i=n(3216),s=n(579);const l=e=>{let{icon:t,description:n}=e;return(0,s.jsxs)(r.azJ,{sx:{display:"flex","& .min-icon":{marginRight:"10px",height:"23px",width:"23px",marginBottom:"10px"}},children:[t," ",(0,s.jsx)(r.azJ,{className:"muted",sx:{fontSize:"14px",fontStyle:"italic"},children:n})]})},o=()=>{const e=(0,i.g)(),t=e.tenantName||"",n=e.tenantNamespace||"",o=(0,a.d4)((e=>""!==n?n:""!==e.createTenant.fields.nameTenant.namespace?e.createTenant.fields.nameTenant.namespace:"<namespace>")),c=(0,a.d4)((e=>""!==t?t:""!==e.createTenant.fields.nameTenant.tenantName?e.createTenant.fields.nameTenant.tenantName:"<tenant-name>"));return(0,s.jsx)(r.azJ,{sx:{flex:1,border:"1px solid #eaeaea",borderRadius:"2px",display:"flex",flexFlow:"column",padding:"20px",["@media (max-width: ".concat(r.nmC.sm,"px)")]:{marginTop:0}},children:(0,s.jsxs)(r.azJ,{sx:{display:"flex",flexFlow:"column"},children:[(0,s.jsx)(l,{icon:(0,s.jsx)(r.j$V,{}),description:"TLS Certificates Warning"}),(0,s.jsxs)(r.azJ,{sx:{fontSize:"14px",marginBottom:"15px"},children:["Automatic certificate generation is not enabled.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"If you wish to continue only with ",(0,s.jsx)("b",{children:"custom certificates"})," make sure they are valid for the following internode hostnames, i.e.:",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsxs)(r.azJ,{sx:{fontSize:"14px",fontStyle:"italic"},className:"muted",children:["minio.",o,(0,s.jsx)("br",{}),"minio.",o,".svc",(0,s.jsx)("br",{}),"minio.",o,".svc.<cluster domain>",(0,s.jsx)("br",{}),"*.",c,"-hl.",o,".svc.<cluster domain>",(0,s.jsx)("br",{}),"*.",o,".svc.<cluster domain>"]}),(0,s.jsx)("br",{}),"Replace ",(0,s.jsx)("em",{children:"<tenant-name>"}),","," ",(0,s.jsx)("em",{children:"<namespace>"})," and",(0,s.jsx)("em",{children:"<cluster domain>"})," with the actual values for your MinIO tenant.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"You can learn more at our"," ",(0,s.jsx)("a",{href:"https://min.io/docs/minio/kubernetes/upstream/operations/network-encryption.html?ref=op#id5",target:"_blank",rel:"noopener",children:"documentation"}),"."]})]})})}}}]);
//# sourceMappingURL=577.4e2f491e.chunk.js.map