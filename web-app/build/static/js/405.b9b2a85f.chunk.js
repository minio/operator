"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[405],{13871:(e,n,a)=>{a.d(n,{Z:()=>i});var t,s=a(30168);const i=(0,a(26088).Z)("hr")(t||(t=(0,s.Z)(["\n  border-top: 0;\n  border-left: 0;\n  border-right: 0;\n  border-color: #999999;\n  background-color: transparent;\n"])))},96405:(e,n,a)=>{a.r(n),a.d(n,{default:()=>k});var t=a(72791),s=a(78687),i=a(37516),l=a(51691),o=a(13400),c=a(42419),r=a(75952),d=a(11135),v=a(25787),x=a(61889),h=a(23814),m=a(21435),u=a(41320),p=a(87995),f=a(81207),g=a(40306),j=a(45248),b=a(13871),y=a(80184);const Z=(0,s.$j)((e=>({loadingTenant:e.tenants.loadingTenant,selectedTenant:e.tenants.currentTenant,tenant:e.tenants.tenantInfo})),null),k=(0,v.Z)((e=>(0,d.Z)({...h.oZ,...h.bK,envVarRow:{display:"flex",alignItems:"center",justifyContent:"flex-start","&:last-child":{borderBottom:0},"@media (max-width: 900px)":{flex:1,"& div label":{minWidth:50}}},rowActions:{display:"flex",justifyContent:"flex-end","@media (max-width: 900px)":{flex:1}},overlayAction:{marginLeft:10,"& svg":{width:15,height:15,maxWidth:15,maxHeight:15},"& button":{background:"#EAEAEA"}},loaderAlign:{textAlign:"center"},fileItem:{marginRight:10,display:"flex","& div label":{minWidth:50},"@media (max-width: 900px)":{flexFlow:"column"}},...h.Bz,...h.QV,...h.DF,...h.oO,...h.AK})))(Z((e=>{let{classes:n}=e;const a=(0,u.TL)(),d=(0,s.v9)((e=>e.tenants.tenantInfo)),v=(0,s.v9)((e=>e.tenants.loadingTenant)),[h,Z]=(0,t.useState)(!1),[k,C]=(0,t.useState)(!1),[w,A]=(0,t.useState)([]),[_,T]=(0,t.useState)([]),[P,S]=(0,t.useState)(!1),I=(0,t.useCallback)((()=>{f.Z.invoke("GET","/api/v1/namespaces/".concat(null===d||void 0===d?void 0:d.namespace,"/tenants/").concat(null===d||void 0===d?void 0:d.name,"/configuration")).then((e=>{e.environmentVariables&&(A(e.environmentVariables),S(e.sftpExposed))})).catch((e=>{a((0,p.Ih)(e))}))}),[d,a]);(0,t.useEffect)((()=>{d&&I()}),[d,I]);return(0,y.jsxs)(t.Fragment,{children:[(0,y.jsx)(g.Z,{title:"Save and Restart",confirmText:"Restart",cancelText:"Cancel",titleIcon:(0,y.jsx)(r.EjK,{}),isLoading:h,onClose:()=>C(!1),isOpen:k,onConfirm:()=>{Z(!0);let e={environmentVariables:w.filter((e=>""!==e.key)),keysToBeDeleted:_,sftpExposed:P};f.Z.invoke("PATCH","/api/v1/namespaces/".concat(null===d||void 0===d?void 0:d.namespace,"/tenants/").concat(null===d||void 0===d?void 0:d.name,"/configuration"),e).then((()=>{Z(!1),C(!1),I()})).catch((e=>{a((0,p.Ih)(e)),Z(!1)}))},confirmationContent:(0,y.jsx)(l.Z,{children:"Are you sure you want to save the changes and restart the service?"})}),v?(0,y.jsx)("div",{className:n.loaderAlign,children:(0,y.jsx)(r.aNw,{})}):(0,y.jsxs)(x.ZP,{container:!0,spacing:1,children:[(0,y.jsxs)(x.ZP,{item:!0,xs:12,children:[(0,y.jsx)("h1",{className:n.sectionTitle,children:"Configuration"}),(0,y.jsx)(b.Z,{})]}),(0,y.jsx)(x.ZP,{container:!0,spacing:1,children:w.map(((e,a)=>(0,y.jsxs)(x.ZP,{item:!0,xs:12,className:"".concat(n.formFieldRow," ").concat(n.envVarRow),children:[(0,y.jsx)(x.ZP,{item:!0,xs:5,className:n.fileItem,children:(0,y.jsx)(m.Z,{id:"env_var_key",name:"env_var_key",label:"Key",value:e.key,onChange:e=>{const n=[...w];A(n.map(((n,t)=>t===a?{key:e.target.value,value:n.value}:n)))},index:a},"env_var_key_".concat(a.toString()))}),(0,y.jsx)(x.ZP,{item:!0,xs:5,className:n.fileItem,children:(0,y.jsx)(m.Z,{id:"env_var_value",name:"env_var_value",label:"Value",value:e.value,onChange:e=>{const n=[...w];A(n.map(((n,t)=>t===a?{key:n.key,value:e.target.value}:n)))},index:a,type:j.Gq[e.key]&&j.Gq[e.key].secret?"password":"text"},"env_var_value_".concat(a.toString()))}),(0,y.jsxs)(x.ZP,{item:!0,xs:2,className:n.rowActions,children:[(0,y.jsx)("div",{className:n.overlayAction,children:(0,y.jsx)(o.Z,{size:"small",onClick:()=>{const e=[...w];e.push({key:"",value:""}),A(e)},disabled:a!==w.length-1,children:(0,y.jsx)(c.Z,{})})}),(0,y.jsx)("div",{className:n.overlayAction,children:(0,y.jsx)(o.Z,{size:"small",onClick:()=>{const n=w.filter(((e,n)=>n!==a));A(n),T([..._,e.key])},disabled:w.length<=1,children:(0,y.jsx)(r.HFL,{})})})]})]},"tenant-envVar-".concat(a.toString()))))}),(0,y.jsx)(x.ZP,{container:!0,spacing:1,children:(0,y.jsx)(x.ZP,{item:!0,xs:12,justifyContent:"end",textAlign:"right",className:n.configSectionItem,children:(0,y.jsx)(i.Z,{label:"SFTP",indicatorLabels:["Enabled","Disabled"],checked:P,value:"expose_sftp",id:"expose-sftp",name:"expose-sftp",onChange:()=>{S(!P)},description:""})})}),(0,y.jsx)(x.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"},children:(0,y.jsx)(r.zxk,{id:"save-environment-variables",type:"submit",variant:"callAction",disabled:k||h,onClick:()=>C(!0),label:"Save"})})]})]})})))},42419:(e,n,a)=>{var t=a(64836);n.Z=void 0;var s=t(a(45649)),i=a(80184),l=(0,s.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");n.Z=l}}]);
//# sourceMappingURL=405.b9b2a85f.chunk.js.map