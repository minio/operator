"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[331],{9505:function(e,t,n){var a=n(29439),o=n(72791),s=n(81207);t.Z=function(e,t){var n=(0,o.useState)(!1),r=(0,a.Z)(n,2),i=r[0],c=r[1];return[i,function(n,a,o,r){c(!0),s.Z.invoke(n,a,o,r).then((function(t){c(!1),e(t)})).catch((function(e){c(!1),t(e)}))}]}},27331:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var a=n(74165),o=n(15861),s=n(29439),r=n(1413),i=n(72791),c=n(78687),l=n(57689),d=n(11135),u=n(25787),p=n(23814),f=n(45248),m=n(81207),h=n(42695),Z=n(41320),b=n(51691),x=n(21435),g=n(61889),v=n(9505),j=n(40306),y=n(59573),P=n(87995),w=n(80184),C=function(e){var t=e.deleteOpen,n=e.selectedPod,a=e.closeDeleteModalAndRefresh,o=(0,Z.TL)(),r=(0,i.useState)(""),c=(0,s.Z)(r,2),l=c[0],d=c[1],u=(0,v.Z)((function(){return a(!0)}),(function(e){return o((0,P.Ih)(e))})),p=(0,s.Z)(u,2),f=p[0],m=p[1];return(0,w.jsx)(j.Z,{title:"Delete Pod",confirmText:"Delete",isOpen:t,titleIcon:(0,w.jsx)(y.NvT,{}),isLoading:f,onConfirm:function(){l===n.name?m("DELETE","/api/v1/namespaces/".concat(n.namespace,"/tenants/").concat(n.tenant,"/pods/").concat(n.name)):(0,P.Ih)({errorMessage:"Tenant name is incorrect",detailedError:""})},onClose:function(){return a(!1)},confirmButtonProps:{disabled:l!==n.name||f},confirmationContent:(0,w.jsxs)(b.Z,{children:["To continue please type ",(0,w.jsx)("b",{children:n.name})," in the box.",(0,w.jsx)(g.ZP,{item:!0,xs:12,children:(0,w.jsx)(x.Z,{id:"retype-pod",name:"retype-pod",onChange:function(e){d(e.target.value)},label:"",value:l})})]})})},S=n(27391),T=n(63466),E=n(27454),k=(0,u.Z)((function(e){return(0,d.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},p.oZ),p.VX),p.Bz))}))((function(e){var t=e.classes,n=(0,Z.TL)(),r=(0,l.s0)(),d=(0,l.UO)(),u=d.tenantName,p=d.tenantNamespace,b=(0,c.v9)((function(e){return e.tenants.loadingTenant})),x=(0,i.useState)([]),v=(0,s.Z)(x,2),j=v[0],k=v[1],N=(0,i.useState)(!0),I=(0,s.Z)(N,2),A=I[0],L=I[1],D=(0,i.useState)(!1),K=(0,s.Z)(D,2),z=K[0],M=K[1],R=(0,i.useState)(null),B=(0,s.Z)(R,2),F=B[0],O=B[1],U=(0,i.useState)(""),_=(0,s.Z)(U,2),G=_[0],V=_[1],W=(0,i.useState)(""),X=(0,s.Z)(W,2),q=X[0],H=X[1],J=(0,i.useState)(!1),Q=(0,s.Z)(J,2),Y=Q[0],$=Q[1],ee=(0,i.useState)(!1),te=(0,s.Z)(ee,2),ne=te[0],ae=te[1],oe=(0,i.useState)(!1),se=(0,s.Z)(oe,2),re=se[0],ie=se[1],ce=(0,i.useState)(!1),le=(0,s.Z)(ce,2),de=le[0],ue=le[1],pe=(0,i.useState)(""),fe=(0,s.Z)(pe,2),me=fe[0],he=fe[1];(0,i.useEffect)((function(){if(ne){var e=document.createElement("a");e.setAttribute("href","data:application/gzip;base64,".concat(q)),e.setAttribute("download",me),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),ae(!1),ie(!0)}}),[ne,me,q]);var Ze=j.filter((function(e){return e.name.toLowerCase().includes(G.toLowerCase())})),be=[{type:"view",onClick:function(e){r("/namespaces/".concat(p||"","/tenants/").concat(u||"","/pods/").concat(e.name))}},{type:"delete",onClick:function(e){e.tenant=u,e.namespace=p,O(e),M(!0)}}];(0,i.useEffect)((function(){b&&L(!0)}),[b]),(0,i.useEffect)((function(){A&&m.Z.invoke("GET","/api/v1/namespaces/".concat(p||"","/tenants/").concat(u||"","/pods")).then((function(e){for(var t=0;t<e.length;t++){var n=Date.now()/1e3|0;e[t].time=(0,f.v1)((n-parseInt(e[t].timeCreated)).toString())}k(e),L(!1)})).catch((function(e){n((0,P.Ih)({errorMessage:"Error loading pods",detailedError:e.detailedError}))}))}),[A,u,p,n]),(0,i.useEffect)((function(){Y?(H(""),m.Z.invoke("GET","/api/v1/namespaces/".concat(p,"/tenants/").concat(u,"/log-report")).then(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H(decodeURIComponent(t.blob)),he(t.filename||"tenant-log-report.zip"),$(!1),ae(!0),0===t.filename.length||0===t.blob.length?ue(!0):ue(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n((0,P.Ih)(e)),$(!1),ue(!0)}))):$(!1)}),[u,p,Y,n]);return(0,w.jsxs)(i.Fragment,{children:[z&&(0,w.jsx)(C,{deleteOpen:z,selectedPod:F,closeDeleteModalAndRefresh:function(e){M(!1),L(!0)}}),(0,w.jsxs)(g.ZP,{container:!0,children:[(0,w.jsx)(g.ZP,{item:!0,xs:4,children:(0,w.jsx)("h1",{className:t.sectionTitle,children:"Pods"})}),(0,w.jsxs)(g.ZP,{item:!0,xs:4,children:[re&&!de&&"Tenant report downloaded to "+me,de&&"There was a problem generating the report"]}),(0,w.jsx)(g.ZP,{item:!0,xs:4,display:"flex",justifyContent:"flex-end",children:(0,w.jsx)(E.Z,{tooltip:"A report of all tenant logs will be generated as a .zip file and downloaded for analysis. This report can be uploaded to SUBNET to enable our team to best assist you in troubleshooting.",children:(0,w.jsx)(y.zxk,{id:"log_report",onClick:function(){$(!0)},disabled:0===j.length,children:"Download Log Report"})})})]}),(0,w.jsx)(g.ZP,{item:!0,xs:12,className:t.actionsTray,children:(0,w.jsx)(S.Z,{placeholder:"Search Pods",className:t.searchField,id:"search-resource",label:"",InputProps:{disableUnderline:!0,startAdornment:(0,w.jsx)(T.Z,{position:"start",children:(0,w.jsx)(y.W1M,{})})},onChange:function(e){V(e.target.value)},variant:"standard"})}),(0,w.jsx)(g.ZP,{item:!0,xs:12,className:t.tableBlock,children:(0,w.jsx)(h.Z,{columns:[{label:"Name",elementKey:"name",width:200},{label:"Status",elementKey:"status"},{label:"Age",elementKey:"time"},{label:"Pod IP",elementKey:"podIP"},{label:"Restarts",elementKey:"restarts",renderFunction:function(e){return null!==e?e:0}},{label:"Node",elementKey:"node"}],isLoading:A,records:Ze,itemActions:be,entityName:"Pods",idField:"name"})})]})}))}}]);
//# sourceMappingURL=331.a7088ae1.chunk.js.map