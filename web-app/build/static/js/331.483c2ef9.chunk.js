"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[331],{3814:(e,t,n)=>{n.d(t,{I:()=>o,O:()=>a});const a={label:{color:"#07193E",fontSize:13,alignSelf:"center",whiteSpace:"nowrap","&:not(:first-of-type)":{marginLeft:10}},actionsTray:{display:"flex",justifyContent:"space-between",marginBottom:"1rem",alignItems:"center","& button":{flexGrow:0,marginLeft:8}}},o={modalButtonBar:{marginTop:15,display:"flex",alignItems:"center",justifyContent:"flex-end","& button":{marginRight:10},"& button:last-child":{marginRight:0}},modalFormScrollable:{maxHeight:"calc(100vh - 300px)",overflowY:"auto",paddingTop:10}}},9505:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(2791),o=n(1207);const s=(e,t)=>{const[n,s]=(0,a.useState)(!1);return[n,(n,a,l,r)=>{s(!0),o.Z.invoke(n,a,l,r).then((t=>{s(!1),e(t)})).catch((e=>{s(!1),t(e)}))}]}},9114:(e,t,n)=>{n.d(t,{Z:()=>s});n(2791);var a=n(9945),o=n(184);const s=e=>{let{placeholder:t="",onChange:n,overrideClass:s,value:l,id:r="search-resource",label:i="",sx:c}=e;return(0,o.jsx)(a.Wzg,{placeholder:t,className:s||"",id:r,label:i,onChange:e=>{n(e.target.value)},value:l,startIcon:(0,o.jsx)(a.W1M,{}),sx:c})}},7331:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var a=n(2791),o=n(9434),s=n(7689),l=n(9945),r=n(3814),i=n(5248),c=n(1320),d=n(7995),m=n(1207),p=n(9505),u=n(3508),h=n(184);const g=e=>{let{deleteOpen:t,selectedPod:n,closeDeleteModalAndRefresh:o}=e;const s=(0,c.TL)(),[r,i]=(0,a.useState)(""),[m,g]=(0,p.Z)((()=>o(!0)),(e=>s((0,d.Ih)(e))));return(0,h.jsx)(u.Z,{title:"Delete Pod",confirmText:"Delete",isOpen:t,titleIcon:(0,h.jsx)(l.NvT,{}),isLoading:m,onConfirm:()=>{r===n.name?g("DELETE","/api/v1/namespaces/".concat(n.namespace,"/tenants/").concat(n.tenant,"/pods/").concat(n.name)):(0,d.Ih)({errorMessage:"Tenant name is incorrect",detailedError:""})},onClose:()=>o(!1),confirmButtonProps:{disabled:r!==n.name||m},confirmationContent:(0,h.jsxs)(a.Fragment,{children:["To continue please type ",(0,h.jsx)("b",{children:n.name})," in the box.",(0,h.jsx)(l.xuv,{sx:{marginTop:15},children:(0,h.jsx)(l.Wzg,{id:"retype-pod",name:"retype-pod",onChange:e=>{i(e.target.value)},label:"",value:r})})]})})};var x=n(7454),f=n(9114);const b=()=>{const e=(0,c.TL)(),t=(0,s.s0)(),{tenantName:n,tenantNamespace:p}=(0,s.UO)(),u=(0,o.v9)((e=>e.tenants.loadingTenant)),[b,j]=(0,a.useState)([]),[y,v]=(0,a.useState)(!0),[C,S]=(0,a.useState)(!1),[w,T]=(0,a.useState)(null),[E,I]=(0,a.useState)(""),[Z,k]=(0,a.useState)(""),[P,L]=(0,a.useState)(!1),[N,z]=(0,a.useState)(!1),[A,B]=(0,a.useState)(!1),[D,R]=(0,a.useState)(!1),[F,K]=(0,a.useState)("");(0,a.useEffect)((()=>{if(N){let e=document.createElement("a");e.setAttribute("href","data:application/gzip;base64,".concat(Z)),e.setAttribute("download",F),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),z(!1),B(!0)}}),[N,F,Z]);const O=b.filter((e=>e.name.toLowerCase().includes(E.toLowerCase()))),M=[{type:"view",onClick:e=>{t("/namespaces/".concat(p||"","/tenants/").concat(n||"","/pods/").concat(e.name))}},{type:"delete",onClick:e=>{e.tenant=n,e.namespace=p,T(e),S(!0)}}];(0,a.useEffect)((()=>{u&&v(!0)}),[u]),(0,a.useEffect)((()=>{y&&m.Z.invoke("GET","/api/v1/namespaces/".concat(p||"","/tenants/").concat(n||"","/pods")).then((e=>{for(let t=0;t<e.length;t++){let n=Date.now()/1e3|0;e[t].time=(0,i.v1)((n-parseInt(e[t].timeCreated)).toString())}j(e),v(!1)})).catch((t=>{e((0,d.Ih)({errorMessage:"Error loading pods",detailedError:t.detailedError}))}))}),[y,n,p,e]),(0,a.useEffect)((()=>{P?(k(""),m.Z.invoke("GET","/api/v1/namespaces/".concat(p,"/tenants/").concat(n,"/log-report")).then((async e=>{k(decodeURIComponent(e.blob)),K(e.filename||"tenant-log-report.zip"),L(!1),z(!0),0===e.filename.length||0===e.blob.length?R(!0):R(!1)})).catch((t=>{e((0,d.Ih)(t)),L(!1),R(!0)}))):L(!1)}),[n,p,P,e]);return(0,h.jsxs)(a.Fragment,{children:[C&&(0,h.jsx)(g,{deleteOpen:C,selectedPod:w,closeDeleteModalAndRefresh:e=>{S(!1),v(!0)}}),(0,h.jsx)(l.NZf,{separator:!0,sx:{marginBottom:15},actions:(0,h.jsx)(x.Z,{tooltip:"A report of all tenant logs will be generated as a .zip file and downloaded for analysis. This report can be uploaded to SUBNET to enable our team to best assist you in troubleshooting.",children:(0,h.jsx)(l.zxk,{id:"log_report",onClick:()=>{L(!0)},disabled:0===b.length,children:"Download Log Report"})}),children:"Pods"}),A&&!D&&(0,h.jsx)(l.J6i,{title:"Success",message:"Tenant report downloaded to "+F,variant:"success"}),D&&(0,h.jsx)(l.J6i,{title:"Error",message:"There was a problem generating the report",variant:"error"}),(0,h.jsxs)(l.rjZ,{container:!0,sx:{marginBottom:15},children:[(0,h.jsx)(l.rjZ,{item:!0,xs:4,sx:{display:"flex",alignItems:"center"}}),(0,h.jsx)(l.rjZ,{item:!0,xs:4,sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"}})]}),(0,h.jsx)(l.rjZ,{item:!0,xs:12,sx:r.O.actionsTray,children:(0,h.jsx)(f.Z,{value:E,onChange:e=>{I(e)},placeholder:"Search Pods",id:"search-resource"})}),(0,h.jsx)(l.rjZ,{item:!0,xs:12,children:(0,h.jsx)(l.wQF,{columns:[{label:"Name",elementKey:"name",width:200},{label:"Status",elementKey:"status"},{label:"Age",elementKey:"time"},{label:"Pod IP",elementKey:"podIP"},{label:"Restarts",elementKey:"restarts",renderFunction:e=>null!==e?e:0},{label:"Node",elementKey:"node"}],isLoading:y,records:O,itemActions:M,entityName:"Pods",idField:"name",customPaperHeight:"calc(100vh - 400px)"})})]})}}}]);
//# sourceMappingURL=331.483c2ef9.chunk.js.map