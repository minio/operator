"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[405],{6405:(e,n,a)=>{a.r(n),a.d(n,{default:()=>v});var t=a(2791),s=a(9434),i=a(9945),l=a(1320),o=a(7995),r=a(5248),c=a(1207),d=a(3508),x=a(184);const v=()=>{const e=(0,l.TL)(),n=(0,s.v9)((e=>e.tenants.tenantInfo)),a=(0,s.v9)((e=>e.tenants.loadingTenant)),[v,m]=(0,t.useState)(!1),[h,u]=(0,t.useState)(!1),[p,j]=(0,t.useState)([]),[f,g]=(0,t.useState)([]),[y,k]=(0,t.useState)(!1),b=(0,t.useCallback)((()=>{c.Z.invoke("GET","/api/v1/namespaces/".concat(null===n||void 0===n?void 0:n.namespace,"/tenants/").concat(null===n||void 0===n?void 0:n.name,"/configuration")).then((e=>{e.environmentVariables&&(j(e.environmentVariables),k(e.sftpExposed))})).catch((n=>{e((0,o.Ih)(n))}))}),[n,e]);(0,t.useEffect)((()=>{n&&b()}),[n,b]);return(0,x.jsxs)(t.Fragment,{children:[(0,x.jsx)(d.Z,{title:"Save and Restart",confirmText:"Restart",cancelText:"Cancel",titleIcon:(0,x.jsx)(i.EjK,{}),isLoading:v,onClose:()=>u(!1),isOpen:h,onConfirm:()=>{m(!0);let a={environmentVariables:p.filter((e=>""!==e.key)),keysToBeDeleted:f,sftpExposed:y};c.Z.invoke("PATCH","/api/v1/namespaces/".concat(null===n||void 0===n?void 0:n.namespace,"/tenants/").concat(null===n||void 0===n?void 0:n.name,"/configuration"),a).then((()=>{m(!1),u(!1),b()})).catch((n=>{e((0,o.Ih)(n)),m(!1)}))},confirmationContent:(0,x.jsx)(t.Fragment,{children:"Are you sure you want to save the changes and restart the service?"})}),a?(0,x.jsx)(i.xuv,{sx:{textAlign:"center"},children:(0,x.jsx)(i.aNw,{})}):(0,x.jsxs)(i.xuv,{children:[(0,x.jsx)(i.NZf,{separator:!0,sx:{marginBottom:15},children:"Configuration"}),(0,x.jsx)(i.rjZ,{container:!0,sx:{"& .envVarRow":{display:"flex",alignItems:"center",justifyContent:"flex-start","&:last-child":{borderBottom:0},"@media (max-width: 900px)":{flex:1,"& div label":{minWidth:50}}},"& .rowActions":{display:"flex",justifyContent:"flex-end","@media (max-width: 900px)":{flex:1}},"& .overlayAction":{marginLeft:10},"& .rowItem":{marginRight:10,display:"flex","& div label":{minWidth:50},"@media (max-width: 900px)":{flexFlow:"column"}}},children:p.map(((e,n)=>(0,x.jsxs)(i.rjZ,{item:!0,xs:12,className:"envVarRow",sx:{marginBottom:15},children:[(0,x.jsx)(i.rjZ,{item:!0,xs:5,className:"rowItem",children:(0,x.jsx)(i.Wzg,{id:"env_var_key",name:"env_var_key",label:"Key",value:e.key,onChange:e=>{const a=[...p];j(a.map(((a,t)=>t===n?{key:e.target.value,value:a.value}:a)))},index:n},"env_var_key_".concat(n.toString()))}),(0,x.jsx)(i.rjZ,{item:!0,xs:5,className:"rowItem",children:(0,x.jsx)(i.Wzg,{id:"env_var_value",name:"env_var_value",label:"Value",value:e.value,onChange:e=>{const a=[...p];j(a.map(((a,t)=>t===n?{key:a.key,value:e.target.value}:a)))},index:n,type:r.Gq[e.key]&&r.Gq[e.key].secret?"password":"text"},"env_var_value_".concat(n.toString()))}),(0,x.jsxs)(i.rjZ,{item:!0,xs:2,className:"rowActions",children:[(0,x.jsx)("div",{className:"overlayAction",children:(0,x.jsx)(i.hU,{size:"small",onClick:()=>{const e=[...p];e.push({key:"",value:""}),j(e)},disabled:n!==p.length-1,children:(0,x.jsx)(i.dtP,{})})}),(0,x.jsx)("div",{className:"overlayAction",children:(0,x.jsx)(i.hU,{size:"small",onClick:()=>{const a=p.filter(((e,a)=>a!==n));j(a),g([...f,e.key])},disabled:p.length<=1,children:(0,x.jsx)(i.HFL,{})})})]})]},"tenant-envVar-".concat(n.toString()))))}),(0,x.jsx)(i.rjZ,{container:!0,children:(0,x.jsx)(i.rjZ,{item:!0,xs:12,sx:{justifyContent:"end",textAlign:"right",marginBottom:15},children:(0,x.jsx)(i.rsf,{label:"SFTP",indicatorLabels:["Enabled","Disabled"],checked:y,value:"expose_sftp",id:"expose-sftp",name:"expose-sftp",onChange:()=>{k(!y)},description:""})})}),(0,x.jsx)(i.rjZ,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"},children:(0,x.jsx)(i.zxk,{id:"save-environment-variables",type:"submit",variant:"callAction",disabled:h||v,onClick:()=>u(!0),label:"Save"})})]})]})}}}]);
//# sourceMappingURL=405.6fef1560.chunk.js.map