"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[367],{92217:function(e,n,i){var l=i(1413),t=i(72791),o=i(61889),r=i(30829),a=i(96040),s=i(64554),d=i(11135),c=i(25787),u=i(75952),v=i(23814),m=i(78029),p=i.n(m),x=i(9534),g=i(27454),Z=i(80184);n.Z=(0,c.Z)((function(e){return(0,d.Z)((0,l.Z)({},v.YI))}))((function(e){var n=e.value,i=e.label,l=void 0===i?"":i,d=e.tooltip,c=void 0===d?"":d,v=e.mode,m=void 0===v?"json":v,h=e.classes,f=e.onBeforeChange,y=(e.readOnly,e.editorHeight),_=void 0===y?"250px":y;return(0,Z.jsxs)(t.Fragment,{children:[(0,Z.jsx)(o.ZP,{item:!0,xs:12,sx:{marginBottom:"10px"},children:(0,Z.jsxs)(r.Z,{className:h.inputLabel,children:[(0,Z.jsx)("span",{children:l}),""!==c&&(0,Z.jsx)("div",{className:h.tooltipContainer,children:(0,Z.jsx)(a.Z,{title:c,placement:"top-start",children:(0,Z.jsx)("div",{className:h.tooltip,children:(0,Z.jsx)(u.byK,{})})})})]})}),(0,Z.jsx)(o.ZP,{item:!0,xs:12,style:{maxHeight:_,overflow:"auto",border:"1px solid #eaeaea"},children:(0,Z.jsx)(x.Z,{value:n,language:m,onChange:function(e){f(null,null,e.target.value)},id:"code_wrapper",padding:15,style:{fontSize:12,backgroundColor:"#fefefe",fontFamily:"ui-monospace,SFMono-Regular,SF Mono,Consolas,Liberation Mono,Menlo,monospace",minHeight:_||"initial",color:"#000000"}})}),(0,Z.jsx)(o.ZP,{item:!0,xs:12,sx:{background:"#f7f7f7",border:"1px solid #eaeaea",borderTop:0},children:(0,Z.jsx)(s.Z,{sx:{display:"flex",alignItems:"center",padding:"2px",paddingRight:"5px",justifyContent:"flex-end","& button":{height:"26px",width:"26px",padding:"2px"," .min-icon":{marginLeft:"0"}}},children:(0,Z.jsx)(g.Z,{tooltip:"Copy to Clipboard",children:(0,Z.jsx)(p(),{text:n,children:(0,Z.jsx)(u.zxk,{type:"button",id:"copy-code-mirror",icon:(0,Z.jsx)(u.TIy,{}),color:"primary",variant:"regular"})})})})})]})}))},54639:function(e,n,i){i.d(n,{Z:function(){return y}});var l=i(29439),t=i(1413),o=i(72791),r=i(26181),a=i.n(r),s=i(61889),d=i(30829),c=i(96040),u=i(13400),v=i(99663),m=i(86711),p=i(11135),x=i(25787),g=i(23814),Z=i(75952),h=i(22512),f=i(80184),y=(0,x.Z)((function(e){return(0,p.Z)((0,t.Z)((0,t.Z)((0,t.Z)((0,t.Z)({},g.YI),g.Hr),{},{valueString:{maxWidth:350,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:2},fileInputField:{margin:"13px 0","@media (max-width: 900px)":{flexFlow:"column"}}},g.bV),{},{inputLabel:(0,t.Z)((0,t.Z)({},g.YI.inputLabel),{},{fontWeight:"normal"}),textBoxContainer:(0,t.Z)((0,t.Z)({},g.YI.textBoxContainer),{},{maxWidth:"100%",border:"1px solid #eaeaea",paddingLeft:"15px"})}))}))((function(e){var n=e.label,i=e.classes,t=e.onChange,r=e.id,p=e.name,x=e.disabled,g=void 0!==x&&x,y=e.tooltip,_=void 0===y?"":y,j=e.required,k=e.error,b=void 0===k?"":k,C=e.accept,S=void 0===C?"":C,w=e.value,K=void 0===w?"":w,P=(0,o.useState)(!1),N=(0,l.Z)(P,2),I=N[0],A=N[1];return(0,f.jsx)(o.Fragment,{children:(0,f.jsxs)(s.ZP,{item:!0,xs:12,className:"".concat(i.fileInputField," ").concat(i.fieldBottom," ").concat(i.fieldContainer," ").concat(""!==b?i.errorInField:""),children:[""!==n&&(0,f.jsxs)(d.Z,{htmlFor:r,className:"".concat(""!==b?i.fieldLabelError:""," ").concat(i.inputLabel),children:[(0,f.jsxs)("span",{children:[n,j?"*":""]}),""!==_&&(0,f.jsx)("div",{className:i.tooltipContainer,children:(0,f.jsx)(c.Z,{title:_,placement:"top-start",children:(0,f.jsx)("div",{className:i.tooltip,children:(0,f.jsx)(Z.byK,{})})})})]}),I||""===K?(0,f.jsxs)("div",{className:i.textBoxContainer,children:[(0,f.jsx)("input",{type:"file",name:p,onChange:function(e){var n=a()(e,"target.files[0].name","");!function(e,n){var i=e.target.files[0],l=new FileReader;l.readAsDataURL(i),l.onload=function(){var e=l.result;if(e){var i=e.toString().split("base64,");2===i.length&&n(i[1])}}}(e,(function(e){t(e,n)}))},accept:S,required:j,disabled:g,className:i.fileInputField}),""!==K&&(0,f.jsx)(u.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){A(!1)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:(0,f.jsx)(m.Z,{})}),""!==b&&(0,f.jsx)(h.Z,{errorMessage:b})]}):(0,f.jsxs)("div",{className:i.fileReselect,children:[(0,f.jsx)("div",{className:i.valueString,children:K}),(0,f.jsx)(u.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){A(!0)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:(0,f.jsx)(v.Z,{})})]})]})})}))},13871:function(e,n,i){var l,t=i(30168),o=(0,i(26088).Z)("hr")(l||(l=(0,t.Z)(["\n  border-top: 0;\n  border-left: 0;\n  border-right: 0;\n  border-color: #999999;\n  background-color: transparent;\n"])));n.Z=o},80666:function(e,n,i){i(72791);var l=i(99779),t=i(11135),o=i(25787),r=i(90983),a=i(81918),s=i(89164),d=i(61889),c=i(20890),u=i(64554),v=i(94721),m=i(90493),p=i(84852),x=i(20653),g=i(49900),Z=i(52502),h=i(69212),f=i(75952),y=i(80184);n.Z=(0,o.Z)((function(e){return(0,t.Z)({certificateIcon:{float:"left",paddingTop:"5px !important",paddingRight:"10px !important"},certificateInfo:{float:"right"},certificateWrapper:{height:"auto",margin:5,border:"1px solid #E2E2E2",userSelect:"text",borderRadius:4,"& h6":{fontWeight:"bold"},"& div":{padding:0}},certificateExpiry:{color:"#616161",display:"flex",alignItems:"center",flexWrap:"wrap",marginBottom:5,"& .label":{fontWeight:"bold"}},certificateDomains:{color:"#616161","& .label":{fontWeight:"bold"}},certificatesList:{border:"1px solid #E2E2E2",borderRadius:4,color:"#616161",textTransform:"lowercase",overflowY:"scroll",maxHeight:145,marginBottom:10},certificatesListItem:{padding:"0px 16px",borderBottom:"1px solid #E2E2E2","& div":{minWidth:0},"& svg":{fontSize:12,marginRight:10,opacity:.5},"& span":{fontSize:12}},certificateExpiring:{color:"orange","& .label":{fontWeight:"bold"}},certificateExpired:{color:"red","& .label":{fontWeight:"bold"}}})}))((function(e){var n=e.classes,i=e.certificateInfo,t=e.onDelete,o=void 0===t?function(){}:t,_=i.domains||[],j=l.ou.fromISO(i.expiry),k=l.ou.utc(),b=0,C="",S="";if(j){var w=j.diff(k);b=w.as("days"),C=w.minus(l.nL.fromObject({days:1})).shiftTo("days").toHuman({listStyle:"long",maximumFractionDigits:0}),b>=10&&b<30&&(S=n.certificateExpiring),b<10&&(S=n.certificateExpired,b<2&&(C=w.minus(l.nL.fromObject({minutes:1})).shiftTo("hours","minutes").toHuman({listStyle:"long",maximumFractionDigits:0}),w.as("minutes")<=1&&(C="EXPIRED")))}return(0,y.jsx)(a.Z,{variant:"outlined",color:"primary",className:n.certificateWrapper,label:(0,y.jsxs)(s.Z,{children:[(0,y.jsx)(d.ZP,{item:!0,xs:1,className:n.certificateIcon,children:(0,y.jsx)(f.Baz,{})}),(0,y.jsxs)(d.ZP,{item:!0,xs:11,className:n.certificateInfo,children:[(0,y.jsx)(c.Z,{variant:"subtitle1",display:"block",gutterBottom:!0,children:i.name}),(0,y.jsxs)(u.Z,{className:n.certificateExpiry,children:[(0,y.jsx)(Z.Z,{color:"inherit",fontSize:"small"}),"\xa0",(0,y.jsx)("span",{className:"label",children:"Expiry:\xa0"}),(0,y.jsx)("span",{children:j.toFormat("yyyy/MM/dd")})]}),(0,y.jsxs)(u.Z,{className:n.certificateExpiry,children:[(0,y.jsx)(h.Z,{color:"inherit",fontSize:"small"}),"\xa0",(0,y.jsx)("span",{className:"label",children:"Expires in:\xa0"}),(0,y.jsx)("span",{className:S,children:C})]}),(0,y.jsx)(v.Z,{}),(0,y.jsx)("br",{}),(0,y.jsx)(u.Z,{className:n.certificateDomains,children:(0,y.jsx)("span",{className:"label",children:"".concat(_.length," Domain (s):")})}),(0,y.jsx)(m.Z,{className:n.certificatesList,children:_.map((function(e,i){return(0,y.jsxs)(p.ZP,{className:n.certificatesListItem,children:[(0,y.jsx)(x.Z,{children:(0,y.jsx)(r.Z,{})}),(0,y.jsx)(g.Z,{primary:e})]},"".concat(e,"-").concat(i))}))})]})]}),onDelete:o},i.name)}))},7032:function(e,n,i){i.r(n),i.d(n,{default:function(){return F}});var l=i(93433),t=i(29439),o=i(1413),r=i(75952),a=i(11135),s=i(25787),d=i(23814),c=i(72791),u=i(78687),v=i(41320),m=i(81207),p=i(37516),x=i(61889),g=i(54639),Z=i(21435),h=i(83679),f=i(51691),y=i(20165),_=i(3579),j=i(84741),k=i(40968),b=i(40306),C=i(80666),S=i(87995),w=i(25228),K=i(43896),P=i(92217),N=i(13871),I=i(80184),A=function(e){var n=e.items,i=void 0===n?[]:n,l=e.title,t=void 0===l?"":l;return null!==i&&void 0!==i&&i.length?(0,I.jsxs)(c.Fragment,{children:[(0,I.jsx)("div",{style:{fontSize:"0.83em",fontWeight:"bold"},children:t}),(0,I.jsx)("div",{style:{display:"flex",gap:"2px",flexFlow:"column",marginLeft:"8px"},children:i.map((function(e){return(0,I.jsxs)("span",{style:{fontSize:"12px"},children:["- ",e]})}))})]}):null},R=function(e){var n=e.policies,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(n){var i=e[n]||{};return{name:n||"",identities:i.identities||[],paths:i.paths||[],allow:i.allow||[],deny:i.deny||[]}}))}(void 0===n?{}:n);return i.length?(0,I.jsxs)(x.ZP,{xs:12,marginBottom:"5px",children:[(0,I.jsx)("h4",{children:"Policies"}),(0,I.jsx)(r.xuv,{withBorders:!0,sx:{maxHeight:"200px",overflow:"auto",padding:0},children:i.map((function(e){return(0,I.jsxs)(r.xuv,{withBorders:!0,sx:{display:"flex",flexFlow:"column",gap:"2px",borderLeft:0,borderRight:0,borderTop:0},children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("b",{style:{fontSize:"0.83em",fontWeight:"bold"},children:"Policy Name:"})," ",e.name]}),(0,I.jsx)(A,{title:"Allow",items:null===e||void 0===e?void 0:e.allow}),(0,I.jsx)(A,{title:"Deny",items:null===e||void 0===e?void 0:e.deny}),(0,I.jsx)(A,{title:"Paths",items:null===e||void 0===e?void 0:e.paths}),(0,I.jsx)(A,{title:"Identities",items:null===e||void 0===e?void 0:e.identities})]})}))})]}):null},F=(0,s.Z)((function(e){return(0,a.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)({},d.oZ),d.bK),d.Bz),d.QV),d.DF),d.oO),d.AK),{},{warningBlock:{color:"red",fontSize:".85rem",margin:".5rem 0 .5rem 0",display:"flex",alignItems:"center","& svg ":{marginRight:".3rem",height:16,width:16}}}))}))((function(e){var n,i,a,s,d,A,F,E,z,G,q,D,T,M,V,B,W,L,H,O,U,Y,Q,X,J,$,ee,ne,ie,le,te,oe,re=e.classes,ae=(0,v.TL)(),se=(0,u.v9)((function(e){return e.tenants.tenantInfo})),de=(0,c.useState)(0),ce=(0,t.Z)(de,2),ue=ce[0],ve=ce[1],me=(0,c.useState)(""),pe=(0,t.Z)(me,2),xe=pe[0],ge=pe[1],Ze=(0,c.useState)(!1),he=(0,t.Z)(Ze,2),fe=he[0],ye=he[1],_e=(0,c.useState)("vault"),je=(0,t.Z)(_e,2),ke=je[0],be=je[1],Ce=(0,c.useState)("1"),Se=(0,t.Z)(Ce,2),we=Se[0],Ke=Se[1],Pe=(0,c.useState)(""),Ne=(0,t.Z)(Pe,2),Ie=Ne[0],Ae=Ne[1],Re=(0,c.useState)(!1),Fe=(0,t.Z)(Re,2),Ee=Fe[0],ze=Fe[1],Ge=(0,c.useState)({fsGroup:"1000",fsGroupChangePolicy:"Always",runAsGroup:"1000",runAsNonRoot:!0,runAsUser:"1000"}),qe=(0,t.Z)(Ge,2),De=qe[0],Te=qe[1],Me=(0,c.useState)([]),Ve=(0,t.Z)(Me,2),Be=Ve[0],We=Ve[1],Le=(0,c.useState)(null),He=(0,t.Z)(Le,2),Oe=He[0],Ue=He[1],Ye=(0,c.useState)(null),Qe=(0,t.Z)(Ye,2),Xe=Qe[0],Je=Qe[1],$e=(0,c.useState)(null),en=(0,t.Z)($e,2),nn=en[0],ln=en[1],tn=(0,c.useState)(null),on=(0,t.Z)(tn,2),rn=on[0],an=on[1],sn=(0,c.useState)(null),dn=(0,t.Z)(sn,2),cn=dn[0],un=dn[1],vn=(0,c.useState)(!1),mn=(0,t.Z)(vn,2),pn=mn[0],xn=mn[1],gn=(0,c.useState)(!1),Zn=(0,t.Z)(gn,2),hn=Zn[0],fn=Zn[1],yn=(0,c.useState)(null),_n=(0,t.Z)(yn,2),jn=_n[0],kn=_n[1],bn=(0,c.useState)(null),Cn=(0,t.Z)(bn,2),Sn=Cn[0],wn=Cn[1],Kn=(0,c.useState)(null),Pn=(0,t.Z)(Kn,2),Nn=Pn[0],In=Pn[1],An=(0,c.useState)([]),Rn=(0,t.Z)(An,2),Fn=Rn[0],En=Rn[1],zn=(0,c.useState)(!1),Gn=(0,t.Z)(zn,2),qn=Gn[0],Dn=Gn[1],Tn=(0,c.useState)(!1),Mn=(0,t.Z)(Tn,2),Vn=Mn[0],Bn=Mn[1],Wn=(0,c.useState)(!1),Ln=(0,t.Z)(Wn,2),Hn=Ln[0],On=Ln[1],Un=(0,c.useState)(null),Yn=(0,t.Z)(Un,2),Qn=Yn[0],Xn=Yn[1],Jn=(0,c.useState)(null),$n=(0,t.Z)(Jn,2),ei=$n[0],ni=$n[1],ii=(0,c.useState)(null),li=(0,t.Z)(ii,2),ti=li[0],oi=li[1],ri=(0,c.useState)(null),ai=(0,t.Z)(ri,2),si=ai[0],di=ai[1],ci=(0,c.useState)(null),ui=(0,t.Z)(ci,2),vi=ui[0],mi=ui[1],pi=(0,c.useState)({}),xi=(0,t.Z)(pi,2),gi=xi[0],Zi=xi[1],hi=function(e){Zi((0,j.he)(gi,e))},fi=(0,c.useState)(!1),yi=(0,t.Z)(fi,2),_i=yi[0],ji=yi[1];(0,c.useEffect)((function(){var e=[];if(fe){var n,i,t,o,r,a,s,d,c,u,v,m,p,x,g,Z,h,f,y,_,j,b,C,S,w,K,P,N;if(e=[{fieldKey:"replicas",required:!0,value:we,customValidation:parseInt(we)<1,customValidationMessage:"Replicas needs to be 1 or greater"},{fieldKey:"kes_securityContext_runAsUser",required:!0,value:De.runAsUser,customValidation:""===De.runAsUser||parseInt(De.runAsUser)<0,customValidationMessage:"runAsUser must be present and be 0 or more"},{fieldKey:"kes_securityContext_runAsGroup",required:!0,value:De.runAsGroup,customValidation:""===De.runAsGroup||parseInt(De.runAsGroup)<0,customValidationMessage:"runAsGroup must be present and be 0 or more"},{fieldKey:"kes_securityContext_fsGroup",required:!0,value:De.fsGroup,customValidation:""===De.fsGroup||parseInt(De.fsGroup)<0,customValidationMessage:"fsGroup must be present and be 0 or more"}],pn&&(e=[].concat((0,l.Z)(e),[{fieldKey:"serverKey",required:!1,value:(null===si||void 0===si?void 0:si.encoded_key)||""},{fieldKey:"serverCert",required:!1,value:(null===si||void 0===si?void 0:si.encoded_cert)||""},{fieldKey:"clientKey",required:!1,value:(null===Nn||void 0===Nn?void 0:Nn.encoded_key)||""},{fieldKey:"clientCert",required:!1,value:(null===Nn||void 0===Nn?void 0:Nn.encoded_cert)||""}])),"vault"===ke)e=[].concat((0,l.Z)(e),[{fieldKey:"vault_endpoint",required:!0,value:null===Oe||void 0===Oe?void 0:Oe.endpoint},{fieldKey:"vault_id",required:!0,value:null===Oe||void 0===Oe||null===(n=Oe.approle)||void 0===n?void 0:n.id},{fieldKey:"vault_secret",required:!0,value:null===Oe||void 0===Oe||null===(i=Oe.approle)||void 0===i?void 0:i.secret},{fieldKey:"vault_ping",required:!1,value:null===Oe||void 0===Oe||null===(t=Oe.status)||void 0===t?void 0:t.ping,customValidation:parseInt(null===Oe||void 0===Oe||null===(o=Oe.status)||void 0===o?void 0:o.ping)<0,customValidationMessage:"Value needs to be 0 or greater"},{fieldKey:"vault_retry",required:!1,value:null===Oe||void 0===Oe||null===(r=Oe.approle)||void 0===r?void 0:r.retry,customValidation:parseInt(null===Oe||void 0===Oe||null===(a=Oe.approle)||void 0===a?void 0:a.retry)<0,customValidationMessage:"Value needs to be 0 or greater"}]);if("aws"===ke)e=[].concat((0,l.Z)(e),[{fieldKey:"aws_endpoint",required:!0,value:null===Xe||void 0===Xe||null===(s=Xe.secretsmanager)||void 0===s?void 0:s.endpoint},{fieldKey:"aws_region",required:!0,value:null===Xe||void 0===Xe||null===(d=Xe.secretsmanager)||void 0===d?void 0:d.region},{fieldKey:"aws_accessKey",required:!0,value:null===Xe||void 0===Xe||null===(c=Xe.secretsmanager)||void 0===c||null===(u=c.credentials)||void 0===u?void 0:u.accesskey},{fieldKey:"aws_secretKey",required:!0,value:null===Xe||void 0===Xe||null===(v=Xe.secretsmanager)||void 0===v||null===(m=v.credentials)||void 0===m?void 0:m.secretkey}]);if("gemalto"===ke)e=[].concat((0,l.Z)(e),[{fieldKey:"gemalto_endpoint",required:!0,value:null===nn||void 0===nn||null===(p=nn.keysecure)||void 0===p?void 0:p.endpoint},{fieldKey:"gemalto_token",required:!0,value:null===nn||void 0===nn||null===(x=nn.keysecure)||void 0===x||null===(g=x.credentials)||void 0===g?void 0:g.token},{fieldKey:"gemalto_domain",required:!0,value:null===nn||void 0===nn||null===(Z=nn.keysecure)||void 0===Z||null===(h=Z.credentials)||void 0===h?void 0:h.domain},{fieldKey:"gemalto_retry",required:!1,value:null===nn||void 0===nn||null===(f=nn.keysecure)||void 0===f||null===(y=f.credentials)||void 0===y?void 0:y.retry,customValidation:parseInt(null===nn||void 0===nn||null===(_=nn.keysecure)||void 0===_||null===(j=_.credentials)||void 0===j?void 0:j.retry)<0,customValidationMessage:"Value needs to be 0 or greater"}]);if("azure"===ke)e=[].concat((0,l.Z)(e),[{fieldKey:"azure_endpoint",required:!0,value:null===rn||void 0===rn||null===(b=rn.keyvault)||void 0===b?void 0:b.endpoint},{fieldKey:"azure_tenant_id",required:!0,value:null===rn||void 0===rn||null===(C=rn.keyvault)||void 0===C||null===(S=C.credentials)||void 0===S?void 0:S.tenant_id},{fieldKey:"azure_client_id",required:!0,value:null===rn||void 0===rn||null===(w=rn.keyvault)||void 0===w||null===(K=w.credentials)||void 0===K?void 0:K.client_id},{fieldKey:"azure_client_secret",required:!0,value:null===rn||void 0===rn||null===(P=rn.keyvault)||void 0===P||null===(N=P.credentials)||void 0===N?void 0:N.client_secret}])}var I=(0,k.R)(e);Bn(0===Object.keys(I).length),Zi(I)}),[pn,fe,ke,null===si||void 0===si?void 0:si.encoded_key,null===si||void 0===si?void 0:si.encoded_cert,null===Nn||void 0===Nn?void 0:Nn.encoded_key,null===Nn||void 0===Nn?void 0:Nn.encoded_cert,null===ti||void 0===ti?void 0:ti.encoded_key,null===ti||void 0===ti?void 0:ti.encoded_cert,null===vi||void 0===vi?void 0:vi.encoded_key,null===vi||void 0===vi?void 0:vi.encoded_cert,De,Oe,Xe,nn,rn,cn,we]);var ki=function(){!Ee&&null!==se&&void 0!==se&&se.namespace&&null!==se&&void 0!==se&&se.name&&(ze(!0),m.Z.invoke("GET","/api/v1/namespaces/".concat(null===se||void 0===se?void 0:se.namespace,"/tenants/").concat(null===se||void 0===se?void 0:se.name,"/encryption")).then((function(e){ge(e.raw),e.policies&&We(e.policies),e.vault?(be("vault"),Ue(e.vault)):e.aws?(be("aws"),Je(e.aws)):e.gemalto?(be("gemalto"),ln(e.gemalto)):e.gcp?(be("gcp"),un(e.gcp)):e.azure&&(be("azure"),an(e.azure)),ye(!0),Ae(e.image),Ke(e.replicas),e.securityContext&&Te(e.securityContext),(e.server_tls||e.minio_mtls||e.kms_mtls)&&xn(!0),e.server_tls&&kn(e.server_tls),e.minio_mtls&&wn(e.minio_mtls),e.kms_mtls&&(Xn(e.kms_mtls.crt),ni(e.kms_mtls.ca)),ze(!1)})).catch((function(e){console.error(e),ze(!1)})))};(0,c.useEffect)((function(){ki()}),[se]);var bi=function(e){En([].concat((0,l.Z)(Fn),[e.name])),e.name===(null===jn||void 0===jn?void 0:jn.name)&&kn(null),e.name===(null===Sn||void 0===Sn?void 0:Sn.name)&&wn(null),e.name===(null===Qn||void 0===Qn?void 0:Qn.name)&&Xn(null),e.name===(null===ei||void 0===ei?void 0:ei.name)&&ni(null)};return(0,I.jsxs)(c.Fragment,{children:[_i&&(0,I.jsx)(b.Z,{isOpen:_i,title:fe?"Enable encryption at rest for tenant?":"Disable encryption at rest for tenant?",confirmText:fe?"Enable":"Disable",cancelText:"Cancel",onClose:function(){return ji(!1)},onConfirm:function(){var e,n,i,l,t,r,a,s,d,c,u,v,p,x,g,Z,h,f,y,_,j,k,b,C,w,K,P,N,I,A,R,F,E,z,G,q,D,T;if(fe){var M={};switch(ke){case"gemalto":M={gemalto:{keysecure:{endpoint:(null===nn||void 0===nn||null===(e=nn.keysecure)||void 0===e?void 0:e.endpoint)||"",credentials:{token:(null===nn||void 0===nn||null===(n=nn.keysecure)||void 0===n||null===(i=n.credentials)||void 0===i?void 0:i.token)||"",domain:(null===nn||void 0===nn||null===(l=nn.keysecure)||void 0===l||null===(t=l.credentials)||void 0===t?void 0:t.domain)||"",retry:parseInt(null===nn||void 0===nn||null===(r=nn.keysecure)||void 0===r||null===(a=r.credentials)||void 0===a?void 0:a.retry)}}}};break;case"aws":M={aws:{secretsmanager:{endpoint:(null===Xe||void 0===Xe||null===(s=Xe.secretsmanager)||void 0===s?void 0:s.endpoint)||"",region:(null===Xe||void 0===Xe||null===(d=Xe.secretsmanager)||void 0===d?void 0:d.region)||"",kmskey:(null===Xe||void 0===Xe||null===(c=Xe.secretsmanager)||void 0===c?void 0:c.kmskey)||"",credentials:{accesskey:(null===Xe||void 0===Xe||null===(u=Xe.secretsmanager)||void 0===u||null===(v=u.credentials)||void 0===v?void 0:v.accesskey)||"",secretkey:(null===Xe||void 0===Xe||null===(p=Xe.secretsmanager)||void 0===p||null===(x=p.credentials)||void 0===x?void 0:x.secretkey)||"",token:(null===Xe||void 0===Xe||null===(g=Xe.secretsmanager)||void 0===g||null===(Z=g.credentials)||void 0===Z?void 0:Z.token)||""}}}};break;case"azure":M={azure:{keyvault:{endpoint:(null===rn||void 0===rn||null===(h=rn.keyvault)||void 0===h?void 0:h.endpoint)||"",credentials:{tenant_id:(null===rn||void 0===rn||null===(f=rn.keyvault)||void 0===f||null===(y=f.credentials)||void 0===y?void 0:y.tenant_id)||"",client_id:(null===rn||void 0===rn||null===(_=rn.keyvault)||void 0===_||null===(j=_.credentials)||void 0===j?void 0:j.client_id)||"",client_secret:(null===rn||void 0===rn||null===(k=rn.keyvault)||void 0===k||null===(b=k.credentials)||void 0===b?void 0:b.client_secret)||""}}}};break;case"gcp":M={gcp:{secretmanager:{project_id:(null===cn||void 0===cn||null===(C=cn.secretmanager)||void 0===C?void 0:C.project_id)||"",endpoint:(null===cn||void 0===cn||null===(w=cn.secretmanager)||void 0===w?void 0:w.endpoint)||"",credentials:{client_email:(null===cn||void 0===cn||null===(K=cn.secretmanager)||void 0===K||null===(P=K.credentials)||void 0===P?void 0:P.client_email)||"",client_id:(null===cn||void 0===cn||null===(N=cn.secretmanager)||void 0===N||null===(I=N.credentials)||void 0===I?void 0:I.client_id)||"",private_key_id:(null===cn||void 0===cn||null===(A=cn.secretmanager)||void 0===A||null===(R=A.credentials)||void 0===R?void 0:R.private_key_id)||"",private_key:(null===cn||void 0===cn||null===(F=cn.secretmanager)||void 0===F||null===(E=F.credentials)||void 0===E?void 0:E.private_key)||""}}}};break;case"vault":M={vault:{endpoint:(null===Oe||void 0===Oe?void 0:Oe.endpoint)||"",engine:(null===Oe||void 0===Oe?void 0:Oe.engine)||"",namespace:(null===Oe||void 0===Oe?void 0:Oe.namespace)||"",prefix:(null===Oe||void 0===Oe?void 0:Oe.prefix)||"",approle:{engine:(null===Oe||void 0===Oe||null===(z=Oe.approle)||void 0===z?void 0:z.engine)||"",id:(null===Oe||void 0===Oe||null===(G=Oe.approle)||void 0===G?void 0:G.id)||"",secret:(null===Oe||void 0===Oe||null===(q=Oe.approle)||void 0===q?void 0:q.secret)||"",retry:parseInt(null===Oe||void 0===Oe||null===(D=Oe.approle)||void 0===D?void 0:D.retry)},status:{ping:parseInt(null===Oe||void 0===Oe||null===(T=Oe.status)||void 0===T?void 0:T.ping)}}}}var V={},B={},W={};null!==Nn&&void 0!==Nn&&Nn.encoded_key&&null!==Nn&&void 0!==Nn&&Nn.encoded_cert&&(B={minio_mtls:{key:null===Nn||void 0===Nn?void 0:Nn.encoded_key,crt:null===Nn||void 0===Nn?void 0:Nn.encoded_cert}}),null!==si&&void 0!==si&&si.encoded_key&&null!==si&&void 0!==si&&si.encoded_cert&&(V={server_tls:{key:null===si||void 0===si?void 0:si.encoded_key,crt:null===si||void 0===si?void 0:si.encoded_cert}});var L=null,H=null;null!==ti&&void 0!==ti&&ti.encoded_key&&null!==ti&&void 0!==ti&&ti.encoded_cert&&(L={key:null===ti||void 0===ti?void 0:ti.encoded_key,crt:null===ti||void 0===ti?void 0:ti.encoded_cert}),null!==vi&&void 0!==vi&&vi.encoded_cert&&(H={ca:null===vi||void 0===vi?void 0:vi.encoded_cert}),(L||H)&&(W={kms_mtls:(0,o.Z)((0,o.Z)({},L),H)});var O=(0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)({raw:ue?xe:"",secretsToBeDeleted:Fn||[],replicas:we,securityContext:De,image:Ie},B),V),W),M);hn||(fn(!0),m.Z.invoke("PUT","/api/v1/namespaces/".concat(null===se||void 0===se?void 0:se.namespace,"/tenants/").concat(null===se||void 0===se?void 0:se.name,"/encryption"),O).then((function(){ji(!1),fn(!1),ki()})).catch((function(e){fn(!1),ae((0,S.Ih)(e))})))}else hn||(fn(!0),m.Z.invoke("DELETE","/api/v1/namespaces/".concat(null===se||void 0===se?void 0:se.namespace,"/tenants/").concat(null===se||void 0===se?void 0:se.name,"/encryption"),{}).then((function(){ji(!1),fn(!1),ki()})).catch((function(e){fn(!1),ae((0,S.Ih)(e))})))},confirmationContent:(0,I.jsxs)(f.Z,{children:[fe?"Data will be encrypted using and external KMS":"Current encrypted information will not be accessible",fe&&(0,I.jsxs)("div",{className:re.warningBlock,children:[(0,I.jsx)(r.e6P,{}),(0,I.jsx)("span",{children:"The content of the KES config secret will be overwritten."})]})]})}),(0,I.jsxs)(x.ZP,{container:!0,spacing:1,children:[(0,I.jsx)(x.ZP,{item:!0,xs:!0,children:(0,I.jsx)(r.NZf,{children:"Encryption"})}),(0,I.jsx)(x.ZP,{item:!0,xs:4,justifyContent:"end",textAlign:"right",children:(0,I.jsx)(p.Z,{label:"",indicatorLabels:["Enabled","Disabled"],checked:fe,value:"tenant_encryption",id:"tenant-encryption",name:"tenant-encryption",onChange:function(){ye(!fe)},description:""})}),(0,I.jsx)(x.ZP,{xs:12,children:(0,I.jsx)(N.Z,{})}),fe&&(0,I.jsxs)(c.Fragment,{children:[(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsxs)(w.Z,{value:ue,onChange:function(e,n){ve(n)},indicatorColor:"primary",textColor:"primary","aria-label":"cluster-tabs",variant:"scrollable",scrollButtons:"auto",children:[(0,I.jsx)(K.Z,{id:"kms-options",label:"Options"}),(0,I.jsx)(K.Z,{id:"kms-raw-configuration",label:"Raw Edit"})]})}),ue?(0,I.jsx)(c.Fragment,{children:(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(P.Z,{value:xe,mode:"yaml",onBeforeChange:function(e,n,i){ge(i)},editorHeight:"550px"})})}):(0,I.jsxs)(c.Fragment,{children:[(0,I.jsx)(R,{policies:Be}),(0,I.jsx)(x.ZP,{item:!0,xs:12,className:re.encryptionTypeOptions,children:(0,I.jsx)(h.Z,{currentSelection:ke,id:"encryptionType",name:"encryptionType",label:"KMS",onChange:function(e){be(e.target.value)},selectorOptions:[{label:"Vault",value:"vault"},{label:"AWS",value:"aws"},{label:"Gemalto",value:"gemalto"},{label:"GCP",value:"gcp"},{label:"Azure",value:"azure"}]})}),"vault"===ke&&(0,I.jsxs)(c.Fragment,{children:[(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(Z.Z,{id:"vault_endpoint",name:"vault_endpoint",onChange:function(e){return Ue((0,o.Z)((0,o.Z)({},Oe),{},{endpoint:e.target.value}))},label:"Endpoint",tooltip:"Endpoint is the Hashicorp Vault endpoint",value:(null===Oe||void 0===Oe?void 0:Oe.endpoint)||"",error:gi.vault_ping||"",required:!0})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(Z.Z,{id:"vault_engine",name:"vault_engine",onChange:function(e){return Ue((0,o.Z)((0,o.Z)({},Oe),{},{engine:e.target.value}))},label:"Engine",tooltip:"Engine is the Hashicorp Vault K/V engine path. If empty, defaults to 'kv'",value:(null===Oe||void 0===Oe?void 0:Oe.engine)||""})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(Z.Z,{id:"vault_namespace",name:"vault_namespace",onChange:function(e){return Ue((0,o.Z)((0,o.Z)({},Oe),{},{namespace:e.target.value}))},label:"Namespace",tooltip:"Namespace is an optional Hashicorp Vault namespace. An empty namespace means no particular namespace is used.",value:(null===Oe||void 0===Oe?void 0:Oe.namespace)||""})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(Z.Z,{id:"vault_prefix",name:"vault_prefix",onChange:function(e){return Ue((0,o.Z)((0,o.Z)({},Oe),{},{prefix:e.target.value}))},label:"Prefix",tooltip:"Prefix is an optional prefix / directory within the K/V engine. If empty, keys will be stored at the K/V engine top level",value:(null===Oe||void 0===Oe?void 0:Oe.prefix)||""})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(r.NZf,{children:"App Role"})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsxs)("fieldset",{className:re.fieldGroup,children:[(0,I.jsx)("legend",{className:re.descriptionText,children:"App Role"}),(0,I.jsx)(x.ZP,{item:!0,xs:12,className:re.formFieldRow,children:(0,I.jsx)(Z.Z,{id:"vault_approle_engine",name:"vault_approle_engine",onChange:function(e){return Ue((0,o.Z)((0,o.Z)({},Oe),{},{approle:(0,o.Z)((0,o.Z)({},null===Oe||void 0===Oe?void 0:Oe.approle),{},{engine:e.target.value})}))},label:"Engine",tooltip:"AppRoleEngine is the AppRole authentication engine path. If empty, defaults to 'approle'",value:(null===Oe||void 0===Oe||null===(n=Oe.approle)||void 0===n?void 0:n.engine)||""})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,className:re.formFieldRow,children:(0,I.jsx)(Z.Z,{type:qn?"text":"password",id:"vault_id",name:"vault_id",onChange:function(e){return Ue((0,o.Z)((0,o.Z)({},Oe),{},{approle:(0,o.Z)((0,o.Z)({},null===Oe||void 0===Oe?void 0:Oe.approle),{},{id:e.target.value})}))},label:"AppRole ID",tooltip:"AppRoleSecret is the AppRole access secret for authenticating to Hashicorp Vault via the AppRole method",value:(null===Oe||void 0===Oe||null===(i=Oe.approle)||void 0===i?void 0:i.id)||"",required:!0,error:gi.vault_id||"",overlayIcon:qn?(0,I.jsx)(y.Z,{}):(0,I.jsx)(_.Z,{}),overlayAction:function(){return Dn(!qn)}})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,className:re.formFieldRow,children:(0,I.jsx)(Z.Z,{type:Hn?"text":"password",id:"vault_secret",name:"vault_secret",onChange:function(e){return Ue((0,o.Z)((0,o.Z)({},Oe),{},{approle:(0,o.Z)((0,o.Z)({},null===Oe||void 0===Oe?void 0:Oe.approle),{},{secret:e.target.value})}))},label:"AppRole Secret",tooltip:"AppRoleSecret is the AppRole access secret for authenticating to Hashicorp Vault via the AppRole method",value:(null===Oe||void 0===Oe||null===(a=Oe.approle)||void 0===a?void 0:a.secret)||"",required:!0,error:gi.vault_secret||"",overlayIcon:Hn?(0,I.jsx)(y.Z,{}):(0,I.jsx)(_.Z,{}),overlayAction:function(){return On(!Hn)}})}),(0,I.jsx)(x.ZP,{xs:12,className:re.formFieldRow,children:(0,I.jsx)(Z.Z,{type:"number",min:"0",id:"vault_retry",name:"vault_retry",onChange:function(e){return Ue((0,o.Z)((0,o.Z)({},Oe),{},{approle:(0,o.Z)((0,o.Z)({},null===Oe||void 0===Oe?void 0:Oe.approle),{},{retry:e.target.value})}))},label:"Retry (Seconds)",error:gi.vault_retry||"",value:(null===Oe||void 0===Oe||null===(s=Oe.approle)||void 0===s?void 0:s.retry)||""})})]})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,className:re.formFieldRow,style:{marginTop:15},children:(0,I.jsxs)("fieldset",{className:re.fieldGroup,children:[(0,I.jsx)("legend",{className:re.descriptionText,children:"Status"}),(0,I.jsx)(Z.Z,{type:"number",min:"0",id:"vault_ping",name:"vault_ping",onChange:function(e){return Ue((0,o.Z)((0,o.Z)({},Oe),{},{status:(0,o.Z)((0,o.Z)({},null===Oe||void 0===Oe?void 0:Oe.status),{},{ping:e.target.value})}))},label:"Ping (Seconds)",tooltip:"controls how often to Vault health status is checked. If not set, defaults to 10s",error:gi.vault_ping||"",value:(null===Oe||void 0===Oe||null===(d=Oe.status)||void 0===d?void 0:d.ping)||""})]})})]}),"azure"===ke&&(0,I.jsxs)(c.Fragment,{children:[(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(Z.Z,{id:"azure_endpoint",name:"azure_endpoint",onChange:function(e){return an((0,o.Z)((0,o.Z)({},rn),{},{keyvault:(0,o.Z)((0,o.Z)({},null===rn||void 0===rn?void 0:rn.keyvault),{},{endpoint:e.target.value})}))},label:"Endpoint",tooltip:"Endpoint is the Azure KeyVault endpoint",error:gi.azure_endpoint||"",value:(null===rn||void 0===rn||null===(A=rn.keyvault)||void 0===A?void 0:A.endpoint)||""})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsxs)("fieldset",{className:re.fieldGroup,children:[(0,I.jsx)("legend",{className:re.descriptionText,children:"Credentials"}),(0,I.jsx)(x.ZP,{item:!0,xs:12,className:re.formFieldRow,children:(0,I.jsx)(Z.Z,{id:"azure_tenant_id",name:"azure_tenant_id",onChange:function(e){var n;return an((0,o.Z)((0,o.Z)({},rn),{},{keyvault:(0,o.Z)((0,o.Z)({},null===rn||void 0===rn?void 0:rn.keyvault),{},{credentials:(0,o.Z)((0,o.Z)({},null===rn||void 0===rn||null===(n=rn.keyvault)||void 0===n?void 0:n.credentials),{},{tenant_id:e.target.value})})}))},label:"Tenant ID",tooltip:"TenantID is the ID of the Azure KeyVault tenant",value:(null===rn||void 0===rn||null===(F=rn.keyvault)||void 0===F||null===(E=F.credentials)||void 0===E?void 0:E.tenant_id)||"",error:gi.azure_tenant_id||""})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,className:re.formFieldRow,children:(0,I.jsx)(Z.Z,{id:"azure_client_id",name:"azure_client_id",onChange:function(e){var n;return an((0,o.Z)((0,o.Z)({},rn),{},{keyvault:(0,o.Z)((0,o.Z)({},null===rn||void 0===rn?void 0:rn.keyvault),{},{credentials:(0,o.Z)((0,o.Z)({},null===rn||void 0===rn||null===(n=rn.keyvault)||void 0===n?void 0:n.credentials),{},{client_id:e.target.value})})}))},label:"Client ID",tooltip:"ClientID is the ID of the client accessing Azure KeyVault",value:(null===rn||void 0===rn||null===(z=rn.keyvault)||void 0===z||null===(G=z.credentials)||void 0===G?void 0:G.client_id)||"",error:gi.azure_client_id||""})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,className:re.formFieldRow,children:(0,I.jsx)(Z.Z,{id:"azure_client_secret",name:"azure_client_secret",onChange:function(e){var n;return an((0,o.Z)((0,o.Z)({},rn),{},{keyvault:(0,o.Z)((0,o.Z)({},null===rn||void 0===rn?void 0:rn.keyvault),{},{credentials:(0,o.Z)((0,o.Z)({},null===rn||void 0===rn||null===(n=rn.keyvault)||void 0===n?void 0:n.credentials),{},{client_secret:e.target.value})})}))},label:"Client Secret",tooltip:"ClientSecret is the client secret accessing the Azure KeyVault",value:(null===rn||void 0===rn||null===(q=rn.keyvault)||void 0===q||null===(D=q.credentials)||void 0===D?void 0:D.client_secret)||"",error:gi.azure_client_secret||""})})]})})]}),"gcp"===ke&&(0,I.jsxs)(c.Fragment,{children:[(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(Z.Z,{id:"gcp_project_id",name:"gcp_project_id",onChange:function(e){return un((0,o.Z)((0,o.Z)({},cn),{},{secretmanager:(0,o.Z)((0,o.Z)({},null===cn||void 0===cn?void 0:cn.secretmanager),{},{project_id:e.target.value})}))},label:"Project ID",tooltip:"ProjectID is the GCP project ID",value:(null===cn||void 0===cn?void 0:cn.secretmanager.project_id)||""})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(Z.Z,{id:"gcp_endpoint",name:"gcp_endpoint",onChange:function(e){return un((0,o.Z)((0,o.Z)({},cn),{},{secretmanager:(0,o.Z)((0,o.Z)({},null===cn||void 0===cn?void 0:cn.secretmanager),{},{endpoint:e.target.value})}))},label:"Endpoint",tooltip:"Endpoint is the GCP project ID. If empty defaults to: secretmanager.googleapis.com:443",value:(null===cn||void 0===cn?void 0:cn.secretmanager.endpoint)||""})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsxs)("fieldset",{className:re.fieldGroup,children:[(0,I.jsx)("legend",{className:re.descriptionText,children:"Credentials"}),(0,I.jsx)(x.ZP,{item:!0,xs:12,className:re.formFieldRow,children:(0,I.jsx)(Z.Z,{id:"gcp_client_email",name:"gcp_client_email",onChange:function(e){return un((0,o.Z)((0,o.Z)({},cn),{},{secretmanager:(0,o.Z)((0,o.Z)({},null===cn||void 0===cn?void 0:cn.secretmanager),{},{credentials:(0,o.Z)((0,o.Z)({},null===cn||void 0===cn?void 0:cn.secretmanager.credentials),{},{client_email:e.target.value})})}))},label:"Client Email",tooltip:"Is the Client email of the GCP service account used to access the SecretManager",value:(null===cn||void 0===cn||null===(T=cn.secretmanager.credentials)||void 0===T?void 0:T.client_email)||""})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,className:re.formFieldRow,children:(0,I.jsx)(Z.Z,{id:"gcp_client_id",name:"gcp_client_id",onChange:function(e){return un((0,o.Z)((0,o.Z)({},cn),{},{secretmanager:(0,o.Z)((0,o.Z)({},null===cn||void 0===cn?void 0:cn.secretmanager),{},{credentials:(0,o.Z)((0,o.Z)({},null===cn||void 0===cn?void 0:cn.secretmanager.credentials),{},{client_id:e.target.value})})}))},label:"Client ID",tooltip:"Is the Client ID of the GCP service account used to access the SecretManager",value:(null===cn||void 0===cn||null===(M=cn.secretmanager.credentials)||void 0===M?void 0:M.client_id)||""})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,className:re.formFieldRow,children:(0,I.jsx)(Z.Z,{id:"gcp_private_key_id",name:"gcp_private_key_id",onChange:function(e){return un((0,o.Z)((0,o.Z)({},cn),{},{secretmanager:(0,o.Z)((0,o.Z)({},null===cn||void 0===cn?void 0:cn.secretmanager),{},{credentials:(0,o.Z)((0,o.Z)({},null===cn||void 0===cn?void 0:cn.secretmanager.credentials),{},{private_key_id:e.target.value})})}))},label:"Private Key ID",tooltip:"Is the private key ID of the GCP service account used to access the SecretManager",value:(null===cn||void 0===cn||null===(V=cn.secretmanager.credentials)||void 0===V?void 0:V.private_key_id)||""})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,className:re.formFieldRow,children:(0,I.jsx)(Z.Z,{id:"gcp_private_key",name:"gcp_private_key",onChange:function(e){return un((0,o.Z)((0,o.Z)({},cn),{},{secretmanager:(0,o.Z)((0,o.Z)({},null===cn||void 0===cn?void 0:cn.secretmanager),{},{credentials:(0,o.Z)((0,o.Z)({},null===cn||void 0===cn?void 0:cn.secretmanager.credentials),{},{private_key:e.target.value})})}))},label:"Private Key",tooltip:"Is the private key of the GCP service account used to access the SecretManager",value:(null===cn||void 0===cn||null===(B=cn.secretmanager.credentials)||void 0===B?void 0:B.private_key)||""})})]})})]}),"aws"===ke&&(0,I.jsxs)(c.Fragment,{children:[(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(Z.Z,{id:"aws_endpoint",name:"aws_endpoint",onChange:function(e){return Je((0,o.Z)((0,o.Z)({},Xe),{},{secretsmanager:(0,o.Z)((0,o.Z)({},null===Xe||void 0===Xe?void 0:Xe.secretsmanager),{},{endpoint:e.target.value})}))},label:"Endpoint",tooltip:"Endpoint is the AWS SecretsManager endpoint. AWS SecretsManager endpoints have the following schema: secrestmanager[-fips].<region>.amanzonaws.com",value:(null===Xe||void 0===Xe||null===(W=Xe.secretsmanager)||void 0===W?void 0:W.endpoint)||"",required:!0,error:gi.aws_endpoint||""})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(Z.Z,{id:"aws_region",name:"aws_region",onChange:function(e){return Je((0,o.Z)((0,o.Z)({},Xe),{},{secretsmanager:(0,o.Z)((0,o.Z)({},null===Xe||void 0===Xe?void 0:Xe.secretsmanager),{},{region:e.target.value})}))},label:"Region",tooltip:"Region is the AWS region the SecretsManager is located",value:(null===Xe||void 0===Xe||null===(L=Xe.secretsmanager)||void 0===L?void 0:L.region)||"",error:gi.aws_region||"",required:!0})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(Z.Z,{id:"aws_kmsKey",name:"aws_kmsKey",onChange:function(e){return Je((0,o.Z)((0,o.Z)({},Xe),{},{secretsmanager:(0,o.Z)((0,o.Z)({},null===Xe||void 0===Xe?void 0:Xe.secretsmanager),{},{kmskey:e.target.value})}))},label:"KMS Key",tooltip:"KMSKey is the AWS-KMS key ID (CMK-ID) used to en/decrypt secrets managed by the SecretsManager. If empty, the default AWS KMS key is used",value:(null===Xe||void 0===Xe||null===(H=Xe.secretsmanager)||void 0===H?void 0:H.kmskey)||""})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsxs)("fieldset",{className:re.fieldGroup,children:[(0,I.jsx)("legend",{className:re.descriptionText,children:"Credentials"}),(0,I.jsx)(x.ZP,{item:!0,xs:12,className:re.formFieldRow,children:(0,I.jsx)(Z.Z,{id:"aws_accessKey",name:"aws_accessKey",onChange:function(e){var n;return Je((0,o.Z)((0,o.Z)({},Xe),{},{secretsmanager:(0,o.Z)((0,o.Z)({},null===Xe||void 0===Xe?void 0:Xe.secretsmanager),{},{credentials:(0,o.Z)((0,o.Z)({},null===Xe||void 0===Xe||null===(n=Xe.secretsmanager)||void 0===n?void 0:n.credentials),{},{accesskey:e.target.value})})}))},label:"Access Key",tooltip:"AccessKey is the access key for authenticating to AWS",value:(null===Xe||void 0===Xe||null===(O=Xe.secretsmanager)||void 0===O||null===(U=O.credentials)||void 0===U?void 0:U.accesskey)||"",error:gi.aws_accessKey||"",required:!0})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,className:re.formFieldRow,children:(0,I.jsx)(Z.Z,{id:"aws_secretKey",name:"aws_secretKey",onChange:function(e){var n;return Je((0,o.Z)((0,o.Z)({},Xe),{},{secretsmanager:(0,o.Z)((0,o.Z)({},null===Xe||void 0===Xe?void 0:Xe.secretsmanager),{},{credentials:(0,o.Z)((0,o.Z)({},null===Xe||void 0===Xe||null===(n=Xe.secretsmanager)||void 0===n?void 0:n.credentials),{},{secretkey:e.target.value})})}))},label:"Secret Key",tooltip:"SecretKey is the secret key for authenticating to AWS",value:(null===Xe||void 0===Xe||null===(Y=Xe.secretsmanager)||void 0===Y||null===(Q=Y.credentials)||void 0===Q?void 0:Q.secretkey)||"",error:gi.aws_secretKey||"",required:!0})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,className:re.formFieldRow,children:(0,I.jsx)(Z.Z,{id:"aws_token",name:"aws_token",onChange:function(e){var n;return Je((0,o.Z)((0,o.Z)({},Xe),{},{secretsmanager:(0,o.Z)((0,o.Z)({},null===Xe||void 0===Xe?void 0:Xe.secretsmanager),{},{credentials:(0,o.Z)((0,o.Z)({},null===Xe||void 0===Xe||null===(n=Xe.secretsmanager)||void 0===n?void 0:n.credentials),{},{token:e.target.value})})}))},label:"Token",tooltip:"SessionToken is an optional session token for authenticating to AWS when using STS",value:(null===Xe||void 0===Xe||null===(X=Xe.secretsmanager)||void 0===X||null===(J=X.credentials)||void 0===J?void 0:J.token)||""})})]})})]}),"gemalto"===ke&&(0,I.jsxs)(c.Fragment,{children:[(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(Z.Z,{id:"gemalto_endpoint",name:"gemalto_endpoint",onChange:function(e){return ln((0,o.Z)((0,o.Z)({},nn),{},{keysecure:(0,o.Z)((0,o.Z)({},null===nn||void 0===nn?void 0:nn.keysecure),{},{endpoint:e.target.value})}))},label:"Endpoint",tooltip:"Endpoint is the endpoint to the KeySecure server",value:(null===nn||void 0===nn||null===($=nn.keysecure)||void 0===$?void 0:$.endpoint)||"",error:gi.gemalto_endpoint||"",required:!0})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,style:{marginBottom:15},children:(0,I.jsxs)("fieldset",{className:re.fieldGroup,children:[(0,I.jsx)("legend",{className:re.descriptionText,children:"Credentials"}),(0,I.jsx)(x.ZP,{item:!0,xs:12,className:re.formFieldRow,children:(0,I.jsx)(Z.Z,{id:"gemalto_token",name:"gemalto_token",onChange:function(e){var n;return ln((0,o.Z)((0,o.Z)({},nn),{},{keysecure:(0,o.Z)((0,o.Z)({},null===nn||void 0===nn?void 0:nn.keysecure),{},{credentials:(0,o.Z)((0,o.Z)({},null===nn||void 0===nn||null===(n=nn.keysecure)||void 0===n?void 0:n.credentials),{},{token:e.target.value})})}))},label:"Token",tooltip:"Token is the refresh authentication token to access the KeySecure server",value:(null===nn||void 0===nn||null===(ee=nn.keysecure)||void 0===ee||null===(ne=ee.credentials)||void 0===ne?void 0:ne.token)||"",error:gi.gemalto_token||"",required:!0})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,className:re.formFieldRow,children:(0,I.jsx)(Z.Z,{id:"gemalto_domain",name:"gemalto_domain",onChange:function(e){var n;return ln((0,o.Z)((0,o.Z)({},nn),{},{keysecure:(0,o.Z)((0,o.Z)({},null===nn||void 0===nn?void 0:nn.keysecure),{},{credentials:(0,o.Z)((0,o.Z)({},null===nn||void 0===nn||null===(n=nn.keysecure)||void 0===n?void 0:n.credentials),{},{domain:e.target.value})})}))},label:"Domain",tooltip:"Domain is the isolated namespace within the KeySecure server. If empty, defaults to the top-level / root domain",value:(null===nn||void 0===nn||null===(ie=nn.keysecure)||void 0===ie||null===(le=ie.credentials)||void 0===le?void 0:le.domain)||"",error:gi.gemalto_domain||"",required:!0})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,className:re.formFieldRow,children:(0,I.jsx)(Z.Z,{type:"number",min:"0",id:"gemalto_retry",name:"gemalto_retry",onChange:function(e){var n;return ln((0,o.Z)((0,o.Z)({},nn),{},{keysecure:(0,o.Z)((0,o.Z)({},null===nn||void 0===nn?void 0:nn.keysecure),{},{credentials:(0,o.Z)((0,o.Z)({},null===nn||void 0===nn||null===(n=nn.keysecure)||void 0===n?void 0:n.credentials),{},{retry:e.target.value})})}))},label:"Retry (seconds)",value:(null===nn||void 0===nn||null===(te=nn.keysecure)||void 0===te||null===(oe=te.credentials)||void 0===oe?void 0:oe.retry)||"",error:gi.gemalto_retry||""})})]})})]})]}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(r.NZf,{children:"Additional Configuration for KES"})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(p.Z,{value:"enableCustomCertsForKES",id:"enableCustomCertsForKES",name:"enableCustomCertsForKES",checked:pn,onChange:function(){return xn(!pn)},label:"Custom Certificates"})}),pn&&(0,I.jsxs)(c.Fragment,{children:[(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsxs)("fieldset",{className:re.fieldGroup,children:[(0,I.jsx)("legend",{className:re.descriptionText,children:"Encryption server certificates"}),jn?(0,I.jsx)(C.Z,{certificateInfo:jn,onDelete:function(){return bi(jn)}}):(0,I.jsxs)(c.Fragment,{children:[(0,I.jsx)(g.Z,{onChange:function(e,n){di({encoded_key:e||"",id:(null===si||void 0===si?void 0:si.id)||"",key:n||"",cert:(null===si||void 0===si?void 0:si.cert)||"",encoded_cert:(null===si||void 0===si?void 0:si.encoded_cert)||""}),hi("serverKey")},accept:".key,.pem",id:"serverKey",name:"serverKey",label:"Key",value:null===si||void 0===si?void 0:si.key}),(0,I.jsx)(g.Z,{onChange:function(e,n){di({encoded_key:(null===si||void 0===si?void 0:si.encoded_key)||"",id:(null===si||void 0===si?void 0:si.id)||"",key:(null===si||void 0===si?void 0:si.key)||"",cert:n||"",encoded_cert:e||""}),hi("serverCert")},accept:".cer,.crt,.cert,.pem",id:"serverCert",name:"serverCert",label:"Cert",value:null===si||void 0===si?void 0:si.cert})]})]})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsxs)("fieldset",{className:re.fieldGroup,children:[(0,I.jsx)("legend",{className:re.descriptionText,children:"MinIO mTLS certificates (connection between MinIO and the Encryption server)"}),Sn?(0,I.jsx)(C.Z,{certificateInfo:Sn,onDelete:function(){return bi(Sn)}}):(0,I.jsxs)(c.Fragment,{children:[(0,I.jsx)(g.Z,{onChange:function(e,n){In({encoded_key:e||"",id:(null===Nn||void 0===Nn?void 0:Nn.id)||"",key:n||"",cert:(null===Nn||void 0===Nn?void 0:Nn.cert)||"",encoded_cert:(null===Nn||void 0===Nn?void 0:Nn.encoded_cert)||""}),hi("clientKey")},accept:".key,.pem",id:"clientKey",name:"clientKey",label:"Key",value:null===Nn||void 0===Nn?void 0:Nn.key}),(0,I.jsx)(g.Z,{onChange:function(e,n){In({encoded_key:(null===Nn||void 0===Nn?void 0:Nn.encoded_key)||"",id:(null===Nn||void 0===Nn?void 0:Nn.id)||"",key:(null===Nn||void 0===Nn?void 0:Nn.key)||"",cert:n||"",encoded_cert:e||""}),hi("clientCert")},accept:".cer,.crt,.cert,.pem",id:"clientCert",name:"clientCert",label:"Cert",value:null===Nn||void 0===Nn?void 0:Nn.cert})]})]})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsxs)("fieldset",{className:re.fieldGroup,children:[(0,I.jsx)("legend",{className:re.descriptionText,children:"KMS mTLS certificates (connection between the Encryption server and the KMS)"}),Qn?(0,I.jsx)(C.Z,{certificateInfo:Qn,onDelete:function(){return bi(Qn)}}):(0,I.jsxs)(c.Fragment,{children:[(0,I.jsx)(g.Z,{onChange:function(e,n){oi({encoded_key:e||"",id:(null===ti||void 0===ti?void 0:ti.id)||"",key:n||"",cert:(null===ti||void 0===ti?void 0:ti.cert)||"",encoded_cert:(null===ti||void 0===ti?void 0:ti.encoded_cert)||""})},accept:".key,.pem",id:"kms_mtls_key",name:"kms_mtls_key",label:"Key",value:null===ti||void 0===ti?void 0:ti.key}),(0,I.jsx)(g.Z,{onChange:function(e,n){return oi({encoded_key:(null===ti||void 0===ti?void 0:ti.encoded_key)||"",id:(null===ti||void 0===ti?void 0:ti.id)||"",key:(null===ti||void 0===ti?void 0:ti.key)||"",cert:n||"",encoded_cert:e||""})},accept:".cer,.crt,.cert,.pem",id:"kms_mtls_cert",name:"kms_mtls_cert",label:"Cert",value:(null===ti||void 0===ti?void 0:ti.cert)||""})]}),ei?(0,I.jsx)(C.Z,{certificateInfo:ei,onDelete:function(){return bi(ei)}}):(0,I.jsx)(g.Z,{onChange:function(e,n){return mi({encoded_key:(null===vi||void 0===vi?void 0:vi.encoded_key)||"",id:(null===vi||void 0===vi?void 0:vi.id)||"",key:(null===vi||void 0===vi?void 0:vi.key)||"",cert:n||"",encoded_cert:e||""})},accept:".cer,.crt,.cert,.pem",id:"kms_mtls_ca",name:"kms_mtls_ca",label:"CA",value:(null===vi||void 0===vi?void 0:vi.cert)||""})]})})]}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(Z.Z,{type:"text",id:"image",name:"image",onChange:function(e){return Ae(e.target.value)},label:"Image",tooltip:"KES container image",placeholder:"minio/kes:2023-05-02T22-48-10Z",value:Ie})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(Z.Z,{type:"number",min:"1",id:"replicas",name:"replicas",onChange:function(e){return Ke(e.target.value)},label:"Replicas",tooltip:"Numer of KES pod replicas",value:we,required:!0,error:gi.replicas||""})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(r.NZf,{children:"SecurityContext for KES"})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsxs)("div",{className:"".concat(re.multiContainer," ").concat(re.responsiveContainer),children:[(0,I.jsx)("div",{className:"".concat(re.formFieldRow," ").concat(re.rightSpacer),children:(0,I.jsx)(Z.Z,{type:"number",id:"kes_securityContext_runAsUser",name:"kes_securityContext_runAsUser",onChange:function(e){Te((0,o.Z)((0,o.Z)({},De),{},{runAsUser:e.target.value}))},label:"Run As User",value:De.runAsUser,required:!0,error:gi.kes_securityContext_runAsUser||"",min:"0"})}),(0,I.jsx)("div",{className:"".concat(re.formFieldRow," ").concat(re.rightSpacer),children:(0,I.jsx)(Z.Z,{type:"number",id:"kes_securityContext_runAsGroup",name:"kes_securityContext_runAsGroup",onChange:function(e){Te((0,o.Z)((0,o.Z)({},De),{},{runAsGroup:e.target.value}))},label:"Run As Group",value:De.runAsGroup,required:!0,error:gi.kes_securityContext_runAsGroup||"",min:"0"})}),(0,I.jsx)("div",{className:"".concat(re.formFieldRow," ").concat(re.rightSpacer),children:(0,I.jsx)(Z.Z,{type:"number",id:"kes_securityContext_fsGroup",name:"kes_securityContext_fsGroup",onChange:function(e){Te((0,o.Z)((0,o.Z)({},De),{},{fsGroup:e.target.value}))},label:"FsGroup",value:De.fsGroup,required:!0,error:gi.kes_securityContext_fsGroup||"",min:"0"})})]})}),(0,I.jsx)(x.ZP,{item:!0,xs:12,children:(0,I.jsx)(p.Z,{value:"kesSecurityContextRunAsNonRoot",id:"kes_securityContext_runAsNonRoot",name:"kes_securityContext_runAsNonRoot",checked:De.runAsNonRoot,onChange:function(e){var n=e.target.checked;Te((0,o.Z)((0,o.Z)({},De),{},{runAsNonRoot:n}))},label:"Do not run as Root"})})]}),(0,I.jsx)(x.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"},children:(0,I.jsx)(r.zxk,{id:"save-encryption",type:"submit",variant:"callAction",disabled:!Vn,onClick:function(){return ji(!0)},label:"Save"})})]})]})}))},22512:function(e,n,i){var l=i(72791),t=i(20890),o=i(11135),r=i(25787),a=i(80184);n.Z=(0,r.Z)((function(e){var n;return(0,o.Z)({errorBlock:{color:(null===(n=e.palette)||void 0===n?void 0:n.error.main)||"#C83B51"}})}))((function(e){var n=e.classes,i=e.errorMessage,o=e.withBreak,r=void 0===o||o;return(0,a.jsxs)(l.Fragment,{children:[r&&(0,a.jsx)("br",{}),(0,a.jsx)(t.Z,{component:"p",variant:"body1",className:n.errorBlock,children:i})]})}))}}]);
//# sourceMappingURL=367.a627867c.chunk.js.map